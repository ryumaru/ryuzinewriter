DEBUG=0;var RYU=RYU||{};RYU=function(){function initBmarkData(){bmarkData=[[],[]],bmarkData[0][0]="Ryuzine User Forums",bmarkData[0][1]="http://www.ryumaru.com/forum/",bmarkData[1][0]="Ryu Maru Website",bmarkData[1][1]="http://www.ryumaru.com"}function initRackData(){rackData=[[]],rackData[0][0]="Catalog 1",rackData[0][1]="catalog1.htm"}function initMediaTypes(){mediaType=[],mediaType.length=5;for(var e=0;e<mediaType.length;e++)mediaType[e]=[];mediaType[0][0]="Ryuzine",mediaType[0][1]="Read Now",mediaType[1][0]="Download",mediaType[1][1]="Download",mediaType[2][0]="PDF",mediaType[2][1]="Download",mediaType[3][0]="Print",mediaType[3][1]="$ Buy Now",mediaType[4][0]="Website",mediaType[4][1]="View Site"}function initRackCategories(){rackCategory=[[],[],[],[],[],[],[]],rackCategory[0][0]="Comic",rackCategory[0][1]="",rackCategory[1][0]="Magazine",rackCategory[1][1]="",rackCategory[2][0]="Book",rackCategory[2][1]="",rackCategory[3][0]="Website",rackCategory[3][1]="",rackCategory[4][0]="Newsletter",rackCategory[4][1]="",rackCategory[5][0]="Fanzine",rackCategory[5][1]="",rackCategory[6][0]="Manga",rackCategory[6][1]=""}function zoomSet(){metacontent="ontouchstart"in document.documentElement||"WP7"==device.Platform||"FFM"==device.Platform?1==config.zoompan?"initial-scale=1.0,minimum-scale=1.0,maximum-scale=10,user-scalable=yes":"initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no":"width=device-width,height=device-height",document.getElementById("zooming")&&(document.getElementById("zooming").content=metacontent)}function loadAddOns(e){if(clearTimeout(addon_timer),addon.register!=regback&&(addon.register=regback),null==e&&(e=0),e<AddOns.length&&!document.getElementById("AddOn_"+AddOns[e])){if(addon_loaded=e,"register"==AddOns[e]);else{addon[""+AddOns[e]]={},addon[""+AddOns[e]].index=e;var t=document.createElement("script");t.setAttribute("id","AddOn_"+AddOns[e]),t.src="ryuzinewriter/addons/"+AddOns[e]+"/"+AddOns[e]+".config.js",document.getElementsByTagName("head")[0].appendChild(t)}addon_timer=setTimeout(function(){addon[""+AddOns[e]].name!=AddOns[e]&&loadAddOns(e+1)},1e3)}}function addonInjector(e){for(var t=document.getElementsByTagName("head")[0],n=t.getElementsByTagName("link"),a=[],o=0;o<n.length;o++)"stylesheet"==n[o].getAttribute("rel")&&a.push(n[o]);if(e.inject.js&&e.inject.js.length>0)for(var d=0;d<e.inject.js.length;d++){var l=document.createElement("script");l.src="ryuzinewriter/addons/"+e.name+"/"+e.inject.js[d][0],null!=e.inject.js[d][2]&&(l.id=e.inject.js[d][2]),1==e.inject.js[d][1]?t.insertBefore(l,a[0]):t.appendChild(l)}if(e.inject.css&&e.inject.css.length>0)for(var o=0;o<e.inject.css.length;o++){var i=document.createElement("link");i.setAttribute("rel","stylesheet"),i.setAttribute("type","text/css"),i.href="ryuzinewriter/addons/"+e.name+"/"+e.inject.css[o][0],null!=e.inject.css[o][2]&&(i.id=e.inject.css[o][2]),1==e.inject.css[o][1]?t.insertBefore(i,a[0]):t.appendChild(i)}}function setOptGhostList(e,t){if(isNaN(e))for(var n=0;n<addon_optData.length;n++)addon_optData[n][1]==e&&(e=n);var a=document.getElementById(""+addon_optData[e][1]);1==t?Get_Cookie(""+addon_optData[e][1])?(a.value=Get_Cookie(""+addon_optData[e][1]),config[""+addon_optData[e][1]]=Get_Cookie(""+addon_optData[e][1])):config[""+addon_optData[e][1]]&&(a.value=config[""+addon_optData[e][1]]):config[""+addon_optData[e][1]]=""+a.value;for(var o=0;e<a.options.length;o++)if(a.options[o].value===a.value){a.selectedIndex=o;break}a.parentNode.getElementsByTagName("p")[0].innerHTML=a.options[a.selectedIndex].text,1==addon_optData[e][5]&&Set_Cookie(""+addon_optData[e][1],""+a.value)}function toggleOptSwitch(i,dir){if(isNaN(i))for(var a=0;a<addon_optData.length;a++)addon_optData[a][1]==i&&(i=a);if(null==dir&&(dir=hasClass(document.getElementById("opt_"+addon_optData[i][1]),"opt-on")?"0":"1"),"0"==dir?(document.getElementById("opt_"+addon_optData[i][1]).className="opt-switch opt-off",1==addon_optData[i][5]&&Set_Cookie(addon_optData[i][1],"0"),config[""+addon_optData[i][1]]=0,addon_optData[i][4]=0):(document.getElementById("opt_"+addon_optData[i][1]).className="opt-switch opt-on",1==addon_optData[i][5]&&Set_Cookie(addon_optData[i][1],"1"),config[""+addon_optData[i][1]]=1,addon_optData[i][4]=1),"string"==typeof addon_optData[i][3])var fn=function(){return eval(addon_optData[i][3])}();else addon_optData[i][3]()}function addDialogBox(e,t,n,a,o,d){var l=dialogs.length;dialogs[l]=[],dialogs[l][0]=e,dialogs[l][1]=t,dialogs[l][2]=n,dialogs[l][3]=a,dialogs[l][4]=o,dialogs[l][5]=d}function toggleDialog(e){if("all"!=e){for(var t=null,n=0;n<dialogs.length;n++)if(dialogs[n][0]==e)var t=n;if(null==t)return void("about"==e&&aboutDialog());for(var a=!1,o=0;o<hide_dialogs.length;o++)e==hide_dialogs[o]&&(a=!0);if(document.getElementById(""+e))if("ryudialog out"==document.getElementById(""+e).className){if("0"==config.rzw_noobnags&&1==a)return;if(!document.getElementById("shade_box")){var d=document.createElement("div");d.id="shade_box",d.addEventListener(iDown,function(){RYU.toggleDialog(""+e)},!1),document.getElementsByTagName("body")[0].appendChild(d)}document.getElementById(""+e).className="ryudialog in"}else{if("1"==dialogs[t][4])document.getElementById(""+e).className="ryudialog out";else{for(var l=0;l<iscrollers.length;l++)iscrollers[l][0]==e&&null!=iscrollers[l][1]&&(iscrollers[l][1].destroy(),iscrollers[l][1]=null);document.getElementsByTagName("body")[0].removeChild(document.getElementById(""+e))}document.getElementsByTagName("body")[0].removeChild(document.getElementById("shade_box"))}else{if("0"==config.rzw_noobnags&&1==a)return;if(!document.getElementById("shade_box")){var d=document.createElement("div");d.id="shade_box",d.addEventListener(iDown,function(){RYU.toggleDialog(""+e)},!1),document.getElementsByTagName("body")[0].appendChild(d)}var i=document.createElement("div");i.id=e,i.className="ryudialog in";var s=document.createElement("div");s.className="titlebar";var c=document.createElement("h1");c.className="title",c.innerHTML=RYU._lc(dialogs[t][1]);var r=document.createElement("div");r.className="xdialog button type2 right",r.innerHTML='<p><span class="symbol"></span><span class="label l10n">'+RYU._lc("Close")+"</span></p>",r.addEventListener(iDown,function(){RYU.toggleDialog(""+e)},!1),s.appendChild(c),s.appendChild(r);var m=document.createElement("div");m.className="area";var u=document.createElement("div");if(u.className="scrollbox","string"==typeof dialogs[t][2]&&(u.innerHTML=""+unescape(dialogs[t][2])),m.appendChild(u),i.appendChild(s),i.appendChild(m),null!=dialogs[t][5]&&"0"!=dialogs[t][5]&&""!=dialogs[t][5]&&dialogs[t][3].unshift(["checkbox",e+"_hide","Do not show this again",function(){RYU.hideDialog(this,""+e)}]),null!=dialogs[t][3]&&""!=dialogs[t][3]){m.className="area action";var g=document.createElement("div");if(g.className="actionbar",Array.isArray(dialogs[t][3])){null!=dialogs[t][5]&&"0"!=dialogs[t][5]&&""!=dialogs[t][5]&&dialogs[t][3].length>3&&(dialogs[t][3].length=3),(null==dialogs[t][5]||"0"==dialogs[t][5]||""==dialogs[t][5])&&dialogs[t][3].length>6&&(dialogs[t][3].length=6);for(var p=0;p<dialogs[t][3].length;p++)if("button1"==dialogs[t][3][p][0]||"button2"==dialogs[t][3][p][0]||"checkbox"==dialogs[t][3][p][0]){if(null==dialogs[t][3][p][4])var y="left";else{dialogs[t][3][p][4].match(/left/gi)||dialogs[t][3][p][4].match(/right/gi)||(dialogs[t][3][p][4]="left "+dialogs[t][3][p][4]);var y=dialogs[t][3][p][4]}if("button1"==dialogs[t][3][p][0]||"button2"==dialogs[t][3][p][0]){var h=document.createElement("div");h.id=dialogs[t][3][p][1],h.className="button "+y,h.innerHTML='<p><span class="symbol"></span><span class="label l10n">'+RYU._lc(dialogs[t][3][p][2])+"</span></p>",h.addEventListener(eDown,dialogs[t][3][p][3],!1),g.appendChild(h)}else{var v=document.createElement("div");v.className="hidebox left";var f=document.createElement("input");f.id=dialogs[t][3][p][1],f.type="checkbox",1==a&&f.setAttribute("checked","true"),f.addEventListener(eDown,dialogs[t][3][p][3],!1);var _=document.createElement("span");_.className="label l10n",_.innerHTML=RYU._lc(dialogs[t][3][p][2]),v.appendChild(f),v.appendChild(_),g.appendChild(v)}}}i.appendChild(g)}if(document.getElementsByTagName("body")[0].appendChild(i),Array.isArray(dialogs[t][2]))for(var p=0;p<dialogs[t][2].length;p++)addControl(dialogs[t][2][p][0],dialogs[t][2][p][1],dialogs[t][2][p][2],dialogs[t][2][p][3],dialogs[t][2][p][4],dialogs[t][2][p][5],e,dialogs[t][2][p][7],dialogs[t][2][p][8]);iScrollApply(""+e)}}else for(var E=document.getElementsByClassName("ryudialog"),B=0;B<E.length;B++)hasClass(E[B],"in")&&toggleDialog(""+E[B].id)}function hideDialog(e,t){if("1"==config.rzw_noobnags&&alert(""+RYU._lc("Hiding dialogs is being overidden, go to OPTIONS > SHOW ALL DIALOGS and turn it OFF to allow hiding")),e.checked)for(var n=hide_dialogs.length-1;n>-1;n--)t==hide_dialogs[n]&&hide_dialogs.splice(n,1);else{for(var a=!1,n=0;n<hide_dialogs.length;n++)t==hide_dialogs[n]&&(a=!0);0==a&&hide_dialogs.push(""+t)}Set_Cookie("rzw_hide_dialogs",hide_dialogs)}function isEven(e){return e%2==0}function getsupportedprop(e){for(var t=document.documentElement,n=0;n<e.length;n++)if("string"==typeof t.style[e[n]])return e[n]}function hasClass(e,t){return new RegExp("(\\s|^)"+t+"(\\s|$)").test(e.className)}function addClass(e,t){hasClass(e,t)||(e.className+=(e.className?" ":"")+t)}function removeClass(e,t){hasClass(e,t)&&(e.className=e.className.replace(new RegExp("(\\s|^)"+t+"(\\s|$)")," ").replace(/^\s+|\s+$/g,""))}function getStyle(e,t){var n="",a=document.getElementById(e);return window.getComputedStyle?(t=t.replace(/([A-Z])/g,"-$1").toLowerCase(),n=document.defaultView.getComputedStyle(a,null).getPropertyValue(t)):a.currentStyle&&(t=t.replace(/\-(\w)/g,function(e,t){return t.toUpperCase()}),n=a.currentStyle[t]),n}function iEvent(){if("ontouchstart"in document.documentElement&&"webOS"!=device.Platform)var e="touchstart",t="touchstart",n="touchend",a="touchmove",o="touchstart",d="touchend";else var e="click",t="mousedown",n="mouseup",a="mousemove",o="mouseover",d="mouseout";if("undefined"!=typeof IScroll)var l="tap";else var l=t;return{iClick:e,iDown:t,iUp:n,iMove:a,iOver:o,iOut:d,eDown:l}}function defaultPrevention(){"Android"==device.Platform&&window.scrollTo(0,0),preventDefault()}function preventDefault(e){if(null==e)var e=document;e.ontouchstart=function(e){e.elementIsEnabled||e.preventDefault()},e.ontouchmove=function(e){e.elementIsEnabled||e.preventDefault()},e.ontouchend=function(e){e.elementIsEnabled||e.preventDefault()}}function restoreDefault(e){if(null==e)var e=document;e.ontouchstart=function(e){e.elementIsEnabled||(e.elementIsEnabled=!0)},e.ontouchmove=function(e){e.elementIsEnabled||(e.elementIsEnabled=!0)},e.ontouchend=function(e){e.elementIsEnabled||(e.elementIsEnabled=!0)}}function onRebind(e){"undefined"!=typeof iScroll&&null!=e&&(setTimeout(function(){e.refresh()},0),e.scrollTo(0,0))}function docPropReset(){doc_title=doc_author=doc_summary=doc_keywords=doc_version=doc_social=doc_link=doc_welcome=doc_banner=doc_splash=doc_goodbye=doc_copyright="",doc_social_src=doc_converted=0}function fixlayout(e){null==e&&alert(""+RYU._lc("Ryuzine Writer will now attempt to reload and reset the UI.")),document.getElementById("writer_layout").href="ryuzinewriter/css/blank.css",document.getElementById("writer_layout").href="ryuzinewriter/css/writer.css",setTimeout(function(){document.getElementById("start").className="workspace ws_deck",document.getElementById("editor").className="workspace ws_deck",document.getElementById("export").className="workspace ws_deck",document.getElementById("simulator").className="workspace ws_deck",document.getElementById("configuration").className="workspace ws_deck",document.getElementById("databuilder").className="workspace ws_deck";for(var e=document.getElementsByClassName("navset"),t=e.length-1;t>=0;t--)e[t].className="navset nav_out"},1),setTimeout(function(){RYU.slideSpace(5),RYU.slideSpace(4),RYU.slideSpace(3),RYU.slideSpace(2),RYU.slideSpace(1),RYU.slideSpace(0)},1e3),setTimeout(function(){document.getElementById("start").className="workspace ws_in"},5e3)}function keydown(e){var t,n;if(document.all){if(!e){var n=window.event;t=n.keyCode}}else e.which&&(t=e.which,n=e);if(69==t&&n.ctrlKey&&n.shiftKey&&RYU.slideSpace(1),88==t&&n.ctrlKey&&n.shiftKey&&RYU.slideSpace(2),83==t&&n.ctrlKey&&n.shiftKey&&RYU.slideSpace(3),67==t&&n.ctrlKey&&n.shiftKey&&RYU.slideSpace(4),82==t&&n.ctrlKey&&n.shiftKey&&RYU.slideSpace(5),72==t&&n.ctrlKey&&n.shiftKey&&RYU.helpPlay(1),36==t&&n.shiftKey&&n.ctrlKey&&RYU.slideSpace(0),27==t&&toggleDialog("all"),27==t&&n.shiftKey&&fixlayout(),0==config.rzw_tabindex&&9==t&&document.activeElement){var a=document.activeElement;if("rackdata"!=a.parentNode.parentNode.parentNode.parentNode.id)return!1;if("lastcell"==a.id)return document.getElementById("rackdata").getElementsByTagName("input")[0].focus(),!1}if("chooser"==document.activeElement.id||"chooser2"==document.activeElement.id||"chooser3"==document.activeElement.id||"chooser4"==document.activeElement.id){var o=document.activeElement,d=o.parentNode.parentNode.parentNode.parentNode.parentNode.id;13==t&&(RYU.toggleDialog(""+d,0),"chooser"==o.id?(RYU.selectFile(0),RYU.slideSpace(1)):"chooser2"==o.id?(RYU.selectFile(1),RYU.slideSpace(2)):"chooser3"==o.id?RYU.loadURL2Sim():"chooser4"==o.id&&RYU.cat2data(""+document.getElementById(""+o.id).value))}}function init(){function e(e){var t=baseurl+"/ryuzine/addons/"+e+"/"+e+".config.js",n=new XMLHttpRequest;n.open("GET",t,!0),n.send(),n.onreadystatechange=function(){if(exists=!1,4==n.readyState&&200==n.status){addons_info[""+e]={};for(var t=n.responseText.split(/\n/),a=1;7>a;a++){t[a]=t[a].replace(/\'|\"|,/gi,"");var o=t[a].split(/:(?!\/\/)/);o.length<2&&(o=["",""]),addons_info[""+e][""+o[0].toLowerCase().trim()]=""+o[1].trim()}}}}function t(e){for(var t=0;t<e.length;t++){if(addons_info[""+e[t]])var n="The config file did not contain information about this add-on.";else{addons_info[""+e[t]]={};var n='<span style="color:red;">The config file for this add-on is missing.  If loaded it will not work.  You should remove it from the /addons folder.</span>'}for(var a=[["name",""+e[t]],["version","Unknown"],["author","Unknown"],["url","#"],["license","Unknown"],["about",n]],o=0;o<a.length;o++)addons_info[""+e[t]][""+a[o][0]]&&null!=addons_info[""+e[t]][""+a[o][0]]||(addons_info[""+e[t]][""+a[o][0]]=a[o][1])}for(var d=document.getElementById("config_addons_list"),l='<table class="wp-list-table widefat plugins" id="available_addons">\n<thead>\n	<tr>\n		<th scope="col" class="manage-column column-cb check-column">\n			<label class="screen-reader-text" for="cb-select-all-1">Select All</label>\n			<input type="checkbox" onclick="if(this.checked){RYU.all_addons_selected(true);}else{RYU.all_addons_selected(false);}">\n		</th>\n		<th scope="col" class="manage-column column-name">Add-On</th>\n		<th scope="col" class="manage-column column-description">Description</th>\n	</tr>\n</thead>\n<tbody>\n',t=0;t<e.length;t++)"socialwidget"!=e[t]&&(l+='<tr class="inactive"><th scope="row" class="check-column"><input type="checkbox" value="'+e[t]+'" onclick="if(this.checked){RYU.add_selected_addon(this);}else{RYU.cut_selected_addon(this);}" /></th><td class="plugin-title"><strong>'+addons_info[""+e[t]].name+'</strong></td>\n<td class="column-description desc"><div class="plugin-description"><p>'+addons_info[""+e[t]].about+'</p></div><div class="second plugin-version-author-uri">Version '+addons_info[""+e[t]].version+' | <a href="'+addons_info[""+e[t]].url+'" target="_blank">'+addons_info[""+e[t]].author+"</a> | "+addons_info[""+e[t]].license+" License</div>\n</td></tr>");l+='</tbody>\n</table>\n<p id="addons_load_order"><strong>Add-On Load Order:</strong> (no addons will be loaded) </p>\n',d.innerHTML=l}if(body=document.getElementsByTagName("body")[0],up_box=document.getElementById("upbox"),opt_slide=document.getElementById("opt_panel"),opt_list=document.getElementById("optlist"),addons_slide=document.getElementById("addons_panel"),addons_list=document.getElementById("addonslist"),controls=document.getElementById("tabbar0"),light_box=document.getElementById("lightbox"),lightshade=document.getElementById("shade"),sh=document.getElementById("sheet"),document.getElementById("ui_theme")){var n=window.location.href;n=n.split("#"),n=n[0],defaultTheme=document.getElementById("ui_theme").href==n?""+RYU.baseurl+"ryuzinewriter/theme/writer/writer.css":document.getElementById("ui_theme").href}else 1==swapThemes&&(themeline=document.getElementsByTagName("head")[0].innerHTML,themeline+='\n<link rel="stylesheet" type="text/css" href="" id="ui_theme" />\n',document.getElementsByTagName("head")[0].innerHTML=themeline),defaultTheme=""+RYU.baseurl+"ryuzinewriter/theme/writer/writer.css";0==defaultTheme.length&&0==swapThemes?config.rzw_themeset=0:Get_Cookie("rzw_themeset")?config.rzw_themeset=Get_Cookie("rzw_themeset"):config.rzw_themeset=1,1==config.rzw_themeset&&0==splashad,1==config.rzw_filenew&&(document.getElementById("ed_file_operations").getElementsByTagName("option")[1].innerHTML="Clear Editor");var a=[[],[],[],[],[],[],[],[],[],[]];a[0][0]="toggle",a[0][1]="rzw_styles",a[0][2]="Auto-import Master Styles",a[0][3]=function(){alert(""+RYU._lc("Setting takes effect after reloading Ryuzine Writer."))},a[0][4]=config.rzw_styles,a[1][0]="toggle",a[1][1]="rzw_wysiwyg",a[1][2]="Rich Text Editor",a[1][3]=function(){alert(""+RYU._lc("Setting takes effect after reloading Ryuzine Writer."))},a[1][4]=config.rzw_wysiwyg,a[2][0]="toggle",a[2][1]="rzw_noobnags",a[2][2]="Show All Dialogs",a[2][3]=function(){},a[2][4]=config.rzw_noobnags,a[3][0]="toggle",a[3][1]="rzw_nscroll",a[3][2]="Native Scrolling",a[3][3]=function(){RYU.scrollToggle()},a[3][4]=config.nscroll,a[4][0]="toggle",a[4][1]="rzw_zoompan",a[4][2]="Zoom &#38; Pan",a[4][3]=function(){RYU.zoomSet()},a[4][4]=config.zoompan,a[5][0]="toggle",a[5][1]="rzw_themeset",a[5][2]="Theme UI",a[5][3]=function(){themeToggle()},a[5][4]=config.rzw_themeset,a[6][0]="toggle",a[6][1]="rzw_tabkey",a[6][2]="Normal Tab Key",a[6][3]=function(){},a[6][4]=config.rzw_tabindex,a[7][0]="button3",a[7][1]="tourguide",a[7][2]="Guided Tour",a[7][3]=function(){RYU.helpPlay(1),RYU.togglePanel("opt_panel")},a[7][4]=null,a[8][0]="button3",a[8][1]="aboutbutton",a[8][2]="About Ryuzine",a[8][3]=function(){RYU.toggleDialog("about")},a[8][4]=null,a[9][0]="button4",a[9][1]="altoptdone",a[9][2]="Close",a[9][3]=function(){RYU.togglePanel(5)},a[9][4]=null,firstclass=1;for(var o=0;o<a.length;o++){if("toggle"==a[o][0])var d=1;else var d=0;addControl(a[o][0],a[o][1],a[o][2],a[o][3],a[o][4],d)}firstclass=0;for(var l=document.getElementsByClassName("ryudialog"),i=0;i<l.length;i++){addDialogBox(""+l[i].id,"","","",1);var s=l[i].getElementsByClassName("xdialog")[0];s.addEventListener(iDown,function(e){return function(){RYU.toggleDialog(""+e)}}(l[i].id),!1)}writeHelp(),loadAddOns(),document.getElementsByTagName("iframe").length>0&&(config.nscroll=0),"undefined"!=typeof IScroll&&(iScroll=IScroll),Get_Cookie("iscroll_iscroll")?config.iscroll_iscroll=Get_Cookie("iscroll_iscroll"):"undefined"!=typeof iScroll?config.iscroll_iscroll=1:config.iscroll_iscroll=0,document.onkeydown=keydown,winSize();var c=winSize();if(W=c.W,H=c.H,"Android"==device.Platform&&device.v<3&&(document.getElementById("preview").style.display="none"),document.getElementById("zooming"))document.getElementById("zooming").content=metacontent;else{var r=document.createElement("meta");r.setAttribute("name","viewport"),r.setAttribute("content",metacontent),r.setAttribute("id","zooming"),document.getElementsByTagName("head")[0].appendChild(r)}window.innerWidth<720&&(document.getElementById("tourguide").style.display="none"),alertCSS=document.getElementById("alert_text"),mySource=document.getElementById("inputBox"),mySourceFrame=document.getElementById("sourceframe"),myOutput=document.getElementById("outputBox"),myCSS=document.getElementById("stylesBox"),myDevice=document.getElementById("device"),myWindow=document.getElementById("preview"),myScreen=document.getElementById("screen"),myStatus=document.getElementById("statusbar"),myNavBar=document.getElementById("navbar"),myTabBar=document.getElementById("tabbar"),myTabStat=document.getElementById("tabstatus"),appTab[0]=document.getElementById("simulator"),appTab[1]=document.getElementById("editor"),devSize(),devSelect=document.getElementById("device_selector"),devSelector(),adjustBox(),add2ConfigList(0,1),add2ConfigList(1,1),add2ConfigList(2,1),add2ConfigList(3,1),addRackData(1),window.addEventListener("resize",function(){RYU.adjustBox(),RYU.resize_panels()},!1),window.addEventListener("orientationchange",function(){RYU.resize_panels()},!1),document.getElementById("under_glass").addEventListener(iDown,function(){RYU.togglePanel("all")},!1),document.getElementById("helpbutton").addEventListener(iDown,function(){RYU.helpPlay(1),RYU.togglePanel("opt_panel")},!1),("webOS"==device.Platform||"iOS"==device.Platform&&device.v<5||"Android"==device.Platform&&device.v<3)&&(document.getElementById("opt_rzw_wysiwyg_li").style.display="none",document.getElementById("opt_rzw_styles_li").style.display="none"),void 0!=nativeScroll&&null!=nativeScroll||"Android"==device.Platform&&device.v>2||(document.getElementById("opt_rzw_zoompan_li").style.display="none",document.getElementById("opt_rzw_nscroll_li").style.display="none",config.nscroll=0,config.zoompan=0),(0==swapThemes||1==swapThemes&&""==dynTheme())&&(config.rzw_themeset=0,document.getElementById("opt_rzw_themeset_label").className="optitem opt-disabled"),themeToggle(config.rzw_themeset),document.getElementById("b_start").addEventListener(iDown,function(){RYU.slideSpace(0)},!1),document.getElementById("b_start1").addEventListener(iDown,function(){RYU.slideSpace(0)},!1),document.getElementById("ed_file_operations").onchange=function(){var e=this.value||this.options[this.selectedIndex].value;RYU.fileOps(e),this.selectedIndex=0},document.getElementById("ed_splitter").onchange=function(){var e=this.value||this.options[this.selectedIndex].value;RYU.splitView(e),this.selectedIndex=0},document.getElementById("ed_build").addEventListener(iDown,function(){RYU.outputOptions(),RYU.clearSimulator(),RYU.refreshSrc(),RYU.slideSpace(3),RYU.reWrite()},!1),document.getElementById("ed_opt").addEventListener(iDown,function(){RYU.toggleDialog("output-options",1)},!1),document.getElementById("ed_refresh").addEventListener(iDown,function(){RYU.refreshSrc()}),document.getElementById("ed_sim").addEventListener(iDown,function(){RYU.clearSimulator(),RYU.slideSpace(3),setTimeout("RYU.updatePreview(0);",1e3)},!1),document.getElementById("fill_refresh").addEventListener(iDown,function(){RYU.clearSimulator(),RYU.slideSpace(3),setTimeout("RYU.updatePreview(0);",1e3)},!1),document.getElementById("back2rack").addEventListener(iDown,function(){RYU.toggleDropBar(),RYU.popOut(0)},!1),document.getElementById("droptab").addEventListener(iDown,function(){RYU.toggleDropBar()},!1),document.getElementById("device_selector").onchange=function(){return document.getElementById("device_opt_label").innerHTML=this.options[this.selectedIndex].innerHTML,RYU.switchDevice(this.options[this.selectedIndex].value),!1},document.getElementById("sim_add").addEventListener(iDown,function(){RYU.toggleDialog("customize",1)},!1),document.getElementById("sim_rotate").addEventListener(iDown,function(){RYU.rotateDevice()},!1),document.getElementById("view_style").onchange=function(){return document.getElementById("view_opt_label").innerHTML=this.options[this.selectedIndex].innerHTML,RYU.viewDrop(this.options[this.selectedIndex].value),!1},document.getElementById("zoom_factor").onchange=function(){return document.getElementById("zoom_opt_label").innerHTML=this.options[this.selectedIndex].innerHTML,RYU.zoomFactor(this.options[this.selectedIndex].value),!1},document.getElementById("sim_load").addEventListener(iDown,function(){RYU.toggleDialog("loadurl",1)},!1),document.getElementById("cfg_reset").addEventListener(iDown,function(){RYU.resetConfigFile()},!1),document.getElementById("cfg_build").addEventListener(iDown,function(){RYU.buildConfigFile()},!1),document.getElementById("rack_sel_file").onchange=function(){var e=this.value||this.options[this.selectedIndex].value;1==e?RYU.newRackCat():2==e?RYU.fileOps(10):3==e&&(RYU.getRackData(1),RYU.fileOps(8))},document.getElementById("db_add").addEventListener(iDown,function(){RYU.addRackData()},!1),document.getElementById("rack_sel_edit").onchange=function(){var e=this.value||this.options[this.selectedIndex].value;1==e?RYU.toggleDialog("addrows",1):2==e?RYU.toggleDialog("edittypes",1):3==e&&RYU.toggleDialog("editcats",1)},document.getElementById("rack_build").addEventListener(iDown,function(){RYU.getRackData(1)}),document.getElementById("startbutton1").addEventListener(iDown,function(){RYU.toggleDialog("add-template",1)},!1),document.getElementById("startbutton2").addEventListener(iDown,function(){RYU.fileOps(3)},!1),document.getElementById("startbutton3").addEventListener(iDown,function(){RYU.toggleDialog("loadzine",1)},!1),document.getElementById("startbutton4").addEventListener(iDown,function(){RYU.slideSpace(4)},!1),document.getElementById("startbutton5").addEventListener(iDown,function(){RYU.slideSpace(5)},!1),document.getElementById("startbutton6").addEventListener(iDown,function(){RYU.toggleDialog("loadurl",1)},!1),document.getElementById("export_tab0").addEventListener(iDown,function(){RYU.swapAppTab("export","export_tab0","export_section0")},!1),document.getElementById("export_tab1").addEventListener(iDown,function(){RYU.swapAppTab("export","export_tab1","export_section1")},!1),document.getElementById("export_tab2").addEventListener(iDown,function(){RYU.swapAppTab("export","export_tab2","export_section2")},!1),document.getElementById("export_tab3").addEventListener(iDown,function(){RYU.swapAppTab("export","export_tab3","export_section3")},!1),document.getElementById("configuration_tab0").addEventListener(iDown,function(){RYU.swapAppTab("configuration","configuration_tab0","configuration_section0")},!1),document.getElementById("configuration_tab1").addEventListener(iDown,function(){RYU.swapAppTab("configuration","configuration_tab1","configuration_section1")},!1),document.getElementById("configuration_tab2").addEventListener(iDown,function(){RYU.swapAppTab("configuration","configuration_tab2","configuration_section2")},!1),document.getElementById("configuration_tab3").addEventListener(iDown,function(){RYU.swapAppTab("configuration","configuration_tab3","configuration_section3")},!1),document.getElementById("addonsbutton").addEventListener(iDown,function(){RYU.togglePanel("addons_panel")},!1),document.getElementById("addonsdone").addEventListener(iDown,function(){RYU.togglePanel("addons_panel")},!1),document.getElementById("optbutton").addEventListener(iDown,function(){RYU.togglePanel("opt_panel")},!1),document.getElementById("optdone").addEventListener(iDown,function(){RYU.togglePanel("opt_panel")},!1),iScrollToggle(config.iscroll_iscroll),document.getElementById("newstyle_tab0").addEventListener(iDown,function(){RYU.swapAppTab("newstyle","newstyle_tab0","newstyle_section0")},!1),document.getElementById("newstyle_tab1").addEventListener(iDown,function(){RYU.swapAppTab("newstyle","newstyle_tab1","newstyle_section1")},!1),document.getElementById("newstyle_tab2").addEventListener(iDown,function(){RYU.swapAppTab("newstyle","newstyle_tab2","newstyle_section2")},!1);for(var m=["pos","pad","margin","bordersize"],u=["top","left","bottom","right","top_units","left_units","bottom_units","right_units"],g=0;g<m.length;g++){document.getElementById("css_object_"+m[g]+"_linked").addEventListener("change",function(){RYU.cssLinkCheck(this)},!1);for(var p=0;p<u.length;p++)document.getElementById("css_object_"+m[g]+"_"+u[p]).addEventListener("change",function(){RYU.cssLinkCheck(this)},!1)}for(var y=document.getElementById("newstyle").getElementsByTagName("input"),h=document.getElementById("newstyle").getElementsByTagName("select"),v=0;v<y.length;v++)y[v].addEventListener("change",function(){RYU.buildCustomCSS()},!1);for(var g=0;g<h.length;g++)h[g].addEventListener("change",function(){RYU.buildCustomCSS()},!1);if(1==xfileman){document.getElementById("instruct0").style.display="none",document.getElementById("instruct1").style.display="block",document.getElementById("file_chooser").innerHTML="";var f=document.createElement("iframe");f.setAttribute("id","file_list"),f.setAttribute("style","display:none;"),f.src="ryuzinewriter/php/scandir.php",document.getElementById("scandir").appendChild(f);var _=document.createElement("iframe");_.setAttribute("id","save_wip_frame"),_.setAttribute("scrolling","no"),_.src="ryuzinewriter/php/save_wip.php",document.getElementById("wip_input").appendChild(_),document.getElementById("ex_file").style.display="block";var E=document.createElement("iframe");E.setAttribute("id","save_file_frame"),E.setAttribute("scrolling","no"),E.src="ryuzinewriter/php/save_file.php",document.getElementById("save_input").appendChild(E);var B=document.createElement("iframe");B.setAttribute("id","build_package_frame"),B.setAttribute("style","height:240px;"),B.src="ryuzinewriter/php/build_package.php",document.getElementById("packaging").appendChild(B),setTimeout(function(){for(var e=document.getElementById("file_list").contentWindow.images,t=document.getElementById("imagefolder_name"),n=0;n<e.length;n++){var a=document.createElement("option");a.value=e[n],a.innerHTML=e[n],t.appendChild(a)}},1e3),setTimeout(function(){RYU.config.addonsList=document.getElementById("file_list").contentWindow.addons;for(var t=0;t<RYU.config.addonsList.length;t++)e(RYU.config.addonsList[t]);parseInt(RYU.config.addonsList.length/4*1e3)>buildwait&&(buildwait=parseInt(RYU.config.addonsList.length/4*1e3))},1e3),setTimeout(function(){for(var e=document.getElementById("file_list").contentWindow.themes,t=document.getElementById("config_themes_list"),n=[["deskTheme","Desktop General/Fallback"],["winTheme","Windows Systems"],["macTheme","Mac OSX Systems"],["nixTheme","Linux Systems"],["iOSTheme","iOS Devices"],["andTheme","Android Devices"],["wp7Theme","Windows Phone 7"],["w8mTheme","Windows 8 Metro/Modern UI"],["bbtTheme","BlackBerry Devices"]],a="",o=0;o<n.length;o++){a=a+'<select id="'+n[o][0]+'" name="'+n[o][0]+'"><option value="">NONE</option>';for(var d=0;d<e.length;d++)a=a+'<option value="'+e[d]+'">'+e[d]+"</option>";a=a+"</select> "+n[o][1]+"<br/>"}t.innerHTML=a},1e3)}else{var I=document.getElementById("ed_file_operations").getElementsByTagName("option");document.getElementById("ed_file_operations").removeChild(I[I.length-1]),I=document.getElementById("rack_sel_file").getElementsByTagName("option"),document.getElementById("rack_sel_file").removeChild(I[I.length-1]);for(var w=0;w<RYU.config.addonsList.length;w++)e(RYU.config.addonsList[w]);parseInt(RYU.config.addonsList.length/4*1e3)>buildwait&&(buildwait=parseInt(RYU.config.addonsList.length/4*1e3))}if(setTimeout(function(){t(RYU.config.addonsList)},buildwait),splashAction(),"IE"==device.Platform&&(RYU.fixlayout(1),setTimeout(function(){RYU.slideSpace(6)},3e3),setTimeout(function(){RYU.slideSpace(0)},5e3)),switchDevice(0),(600>W||"iOS"==device.OS||"Android"==device.OS)&&alert(_lc("Ryuzine Writer is not designed for small screen devices.  The mobile interface is experimental and incomplete.  Do not use it for production.")),toolCheck(),Get_Cookie("rzw_customos")){customOSadds=JSON.parse(Get_Cookie("rzw_customos"));for(var b=0;b<customOSadds.length;b++)customOSstyles(b)}else;}function iScrollApply(e,t,n){if("string"==typeof e){if(!document.getElementById(""+e))return;e=document.getElementById(""+e)}if(null==t&&(t="area"),"string"==typeof t)if(document.getElementById(""+t))t=document.getElementById(""+t);else{if(!(e.getElementsByClassName(""+t).length>0))return;t=e.getElementsByClassName(""+t)[0]}if(n=null==n?t:document.getElementById(""+n)?document.getElementById(""+n):e.getElementsByClassName(""+n).length>0?e.getElmentsByClassName(""+n)[0]:t,
n.scrollTop=0,"undefined"!=typeof iScroll&&1==config.iscroll_iscroll){n.style.overflow="hidden",n.style.height="auto";for(var a=iscrollers.length,o=0,d=0;a>d;d++)iscrollers[d][0]==e.id&&null!=iscrollers[d][1]&&(o=1,onRebind(iscrollers[d][1]));0==o&&(iscrollers[a]=[],iscrollers[a][0]=e.id,void 0==nativeScroll&&"Firefox"!=device.Platform&&"IE"!=device.Platform?iscrollers[a][1]=new iScroll(t,{scrollbarClass:"iscrollbar",scrollbars:"custom",mouseWheel:!0,interactiveScrollbars:!0,onBeforeScrollStart:function(){return!1},onScrollMove:function(){touchmoveCheck=1},onBeforeScrollEnd:function(){touchmoveCheck=0},tap:!0}):iscrollers[a][1]=new iScroll(t,{scrollbarClass:"iscrollbar",scrollbars:"custom",mouseWheel:!0,interactiveScrollbars:!0,onScrollMove:function(){touchmoveCheck=1},onBeforeScrollEnd:function(){touchmoveCheck=0},tap:!0}))}else{n.style.height="",1==config.nscroll&&"iOS"==device.Platform&&void 0!=nativeScroll&&1==config.zoompan&&0==zoomed||1==config.nscroll&&"Android"==device.Platform&&device.v>2&&1==config.zoompan||"WP7"==device.Platform?(n.style.overflow="auto",n.style.overflowX="hidden",void 0!=nativeScroll&&(n.style[nativeScroll]="touch")):"ontouchstart"in document.documentElement?(n.style.overflow="hidden",n.addEventListener("touchstart",RYU.scrollIt,!1)):(n.style.overflow="auto",n.style.overflowX="hidden");for(var l=0;l<iscrollers.length;l++)null!=iscrollers[l][1]&&(iscrollers[l][1].destroy(),iscrollers[l][1]=null);t.children[0].setAttribute("style","")}}function clearSplash(e){null==e?e=0:splashad=e,clearTimeout(splashoff),clearTimeout(splashout),clearTimeout(splashload),clearTimeout(adtrigger),splashoff=null,splashout=null,splashload=null,adtrigger=null;var t=function(){document.getElementById("loadicon").className=""},n=function(){document.getElementById("splash").style.display="none"};if(void 0!=cssTransitionDelay&&void 0!=cssTransitionDuration){var a=getStyle("splash",cssTransitionDelay),o=getStyle("splash",cssTransitionDuration);null==a&&(a=0),null==o&&(o=0),splashtime=parseInt(1e3*(parseFloat(o)+parseFloat(a))),splashload=setTimeout(t,splashtime),document.getElementById("splash").className="splash_out",splashoff=setTimeout(n,splashtime)}else document.getElementById("loadicon").className="",document.getElementById("splash").style.display="none"}function togglePanel(e){onRebind(addonsscroll),onRebind(optscroll),clearTimeout(o),clearTimeout(a);var t=document.getElementsByClassName("panel");if(isNaN(e))for(var n=0;n<t.length;n++)t[n].id==e&&(e=n);if("block"!=up_box.style.display){up_box.style.display="block",up_box.style.visibility="visible";var a=setTimeout(function(){addClass(t[e],"in"),removeClass(t[e],"out")},5)}else if("all"==e||hasClass(t[e],"in")){for(var n=0;n<t.length;n++)addClass(t[n],"out"),removeClass(t[n],"in");var o=setTimeout(function(){up_box.style.display="none",up_box.style.visibility="hidden"},1001)}else{for(var n=0;n<t.length;n++)addClass(t[n],"out"),removeClass(t[n],"in");addClass(t[e],"in"),removeClass(t[e],"out")}}function devSize(){devH=myDevice.offsetHeight,devW=myDevice.offsetWidth}function adjustBox(){if(1==autoAdjust){myBody=document.getElementsByTagName("body")[0].offsetHeight,winSize();var e=winSize();W=e.W,H=e.H,document.getElementById("outputBox").style.height=myBody-200+"px",document.getElementById("stylesBox").style.height=myBody-200+"px",document.getElementById("configBox").style.height=myBody-200+"px",document.getElementById("dataBox").style.height=myBody-200+"px",document.getElementById("leftbox").style.height="100%",document.getElementById("inputBox").style.height="100%",0==config.rzw_wysiwyg||document.getElementById("inputBox").parentNode.addEventListener("DOMNodeInserted",function(){xinhaInsert()})}}function adjustEditor(){if("undefined"!=typeof xinha_editors.inputBox)if("iOS"==device.Platform&&device.v>4){var e=document.getElementById("XinhaIFrame_inputBox").parentNode;e.parentNode.previousSibling.style.display="none",e.parentNode.nextSibling.style.display="none",e.className="xinha_mobile"}else if("Android"==device.Platform&&device.v>2){var e=document.getElementById("XinhaIFrame_inputBox").parentNode;e.parentNode.previousSibling.style.background="none",e.parentNode.nextSibling.style.background="none",e.style.height="100%",e.style.width="100%"}else xinha_editors.inputBox.sizeEditor("100%","100%",!0,!0)}function devSelector(){for(var e="",t=0;t<config.deviceList.length;t++)e=e+'<option value="'+t+'">'+config.deviceList[t][0]+"</option>\n";devSelect.innerHTML=e}function bookBinder(){"undefined"!=typeof IScroll&&(iScroll=IScroll),("Android"==device.Platform&&device.v<3||"Safari"==device.Platform&&device.v<4||"WP7"==device.Platform)&&(iScroll=void 0);for(var e=document.getElementsByClassName("style1"),t=0;t<e.length;t++)iScrollApply(e[t])}function reWrite(){var e=document.getElementById("sourceframe").contentWindow.document,t=myWindow.contentWindow.document;if(e.getElementById("permalink"))var n=e.getElementById("permalink").innerHTML;else if(e.getElementsByClassName("offline").length>0)var n=e.getElementsByClassName("offline")[0].innerHTML;else if(e.getElementById("offline"))var n=e.getElementById("offline").innerHTML;else var n="no";if((""==n||null==n||void 0==n)&&(n="no"),e.getElementById("app_logo"))if(e.getElementById("app_logo").getElementsByTagName("img").length>0)if(e.getElementById("app_logo").getElementsByTagName("img")[0])var a=e.getElementById("app_logo").getElementsByTagName("img")[0].src;else var a="";else var a="";else var a="";if(e.getElementById("summary"))var o=e.getElementById("summary").textContent||e.getElementById("summary").innerText;else var o="";if(""==o&&(o=""!=doc_summary?doc_summary:""),e.getElementsByClassName("splash_screen").length>0)var d=e.getElementsByClassName("splash_screen")[0].innerHTML;else if(e.getElementById("splash_screen"))var d=e.getElementById("splash_screen").innerHTML;else if(e.getElementsByClassName("splash-screen").length>0)var d=e.getElementsByClassName("splash-screen")[0].innerHTML;else var d="";if(e.getElementsByClassName("splash_title").length>0?splashTitle=e.getElementsByClassName("splash_title")[0].innerHTML:e.getElementById("splash_title")?splashTitle=e.getElementById("splash_title").innerHTML:e.getElementsByClassName("splash-title").length>0?splashTitle=e.getElementsByClassName("splash-title")[0].innerHTML:e.getElementsByTagName("title").length>0?splashTitle=e.getElementsByTagName("title")[0].innerHTML:splashTitle="My Magazine",(""==splashTitle||null==splashTitle||void 0==typeof splashTitle)&&(splashTitle="My Magazine"),e.getElementsByClassName("social_widget").length>0)var l=e.getElementsByClassName("social_widget")[0].innerHTML;else if(e.getElementById("social_widget"))var l=e.getElementById("social_widget").innerHTML;else var l="";e.getElementsByTagName("body")[0];if(e.getElementsByClassName("welcome_sign").length>0)var i=e.getElementsByClassName("welcome_sign")[0].innerHTML;else if(e.getElementById("welcome_sign"))var i=e.getElementById("welcome_sign").innerHTML;else if(e.getElementsByClassName("welcome-sign").length>0)var i=e.getElementsByClassName("welcome-sign")[0].innerHTML;else var i="";var s=e.getElementsByClassName("section_head");0==s.length&&(s=e.getElementsByClassName("section-head"));for(var c=[],r=0;r<s.length;r++)if(c[r]=s[r].innerHTML,""==c[r]||null==c[r]){if(0==r)var m="Front Cover";else if(r==s.length-1)var m="Back Cover";else var m="Page "+r;c[r]=m}var u=e.getElementsByClassName("page_box");0==u.length&&(u=e.getElementsByClassName("group")),isEven(u.length)?(pagecount=u.length,s=s.length):(pagecount=u.length+1,s=s.length+1);for(var g=[],p=[],r=0;r<pagecount;r++)if(void 0==u[r])c[r]="Page "+r,g[r]=escape("<p>This Page Was Intentionally Left Blank</p>"),p[r]="col1";else if(g[r]=escape(u[r].innerHTML),u[r].className.length>8){var y=u[r].className.split(" ");p[r]=y[1]}else p[r]="col1";for(var h=e.getElementsByClassName("light_boxed"),v=[],f=[],_=[],E=!1,r=0;r<h.length;r++){if(v[r]=h[r].innerHTML,h[r].className.length>11){var y=h[r].className.split(" ");f[r]=y[1]}else f[r]="land";h[r].id?_[r]=h[r].id:_[r]=r,"boxad"==_[r]&&(E=!0)}for(var B=e.getElementsByClassName("lightbox_link"),I=[],w=[],b=[],r=0;r<B.length;r++)if(I[r]=B[r].innerHTML,"a"!=B[r].tagName.toLowerCase())if(B[r].className.match(/ t-/gi)?(w[r]=B[r].className.match(/t-[^\s]+/gi)[0].replace("t-",""),isNaN(parseInt(w[r]))||(w[r]="lightbox-"+w[r])):w[r]="lightbox-0",B[r].className.length>17){var k=B[r].className.split(" "),x=k[2].split("_");b[r]=x[1]}else b[r]="";else{var T=B[r].href;T=T.split("#"),isNaN(parseInt(T[1]))?w[r]=""+T[1]:w[r]="lightbox-"+T[1];var C=B[r].className;C=C.split(" ");for(var S=0;S<C.length;S++)C[S].match(/lb_/gi)?b[r]=C[S]:b[r]=""}for(var R=e.getElementsByClassName("new_link"),N="",r=0;r<R.length;r++){if(""==b[r]||void 0==b[r]){var U="";b[r]="lightboxbutton"}else if(b[r].match(/lb_/gi))var U="";else var U="lb_";if(window.devicePixelRatio>=2);else;N='<div class="lightboxthumb center">'+I[r]+"<a href=\"javascript:RYU.lightBox('"+w[r]+"',1);\" ontouchstart=\"RYU.lightBox('"+w[r]+'\',1);" class="'+U+b[r]+'"></a></div>\n',R[r].innerHTML=N}if(e.getElementsByClassName("exit_sign").length>0)var Y=e.getElementsByClassName("exit_sign")[0].innerHTML;else if(e.getElementById("exit_sign"))var Y=e.getElementById("exit_sign").innerHTML;else if(e.getElementsByClassName("exit-sign").length>0)var Y=e.getElementsByClassName("exit-sign")[0].innerHTML;else var Y="";if(e.getElementsByClassName("copy_right").length>0)var z=e.getElementsByClassName("copy_right")[0].innerHTML;else if(e.getElementById("copy_right"))var z=e.getElementById("copy_right").innerHTML;else if(e.getElementsByClassName("copy-right").length>0)var z=e.getElementsByClassName("copy-right")[0].innerHTML;else z="";if(e.getElementsByClassName("appbanner").length>0)var D=e.getElementsByClassName("appbanner")[0].innerHTML;else if(e.getElementById("appbanner"))var D=e.getElementById("appbanner").innerHTML;else var D="";if(null!=e.getElementById("boxad")&&0==E)var L=e.getElementById("boxad").innerHTML;else var L="";if(e.getElementsByClassName("ovr").length>0);else;if(""==opt_edition&&(""==myCSS.value&&(myCSS.value=issueStyles()),alert(""+RYU._lc("Rules in the CSS Export Box are written into the HTML for testing. Before publishing export CSS to an external stylesheet."))),inPageCSS="",e.getElementsByTagName("style").length>0)for(var H=0;H<e.getElementsByTagName("style").length;H++)inPageCSS+=e.getElementsByTagName("style")[H].innerHTML;""!=inPageCSS?(inPageCSS="/* Preserved In-Page Styles\n    You should move these to an external stylesheet before final publication\n*/\n"+inPageCSS,1==opt_inpage?""==opt_edition?alert(""+RYU._lc("Your In-Page Styles will be written into the page for testing. Before publishing you should copy them into an external stylesheet.")):(myCSS.value=inPageCSS,alert(""+RYU._lc("Your In-Page Styles will be added to the CSS Export Box and written into the page for testing. Before you publish you should export it to an external stylesheet."))):alert(""+RYU._lc("You appear to be using In-Page Styles. Unless you check PRESERVE IN-PAGE STYLES in the Output Options or you copy and paste the CSS code into your external stylesheet they will not be used."))):opt_inpage=0;var O='<!--// publication content below this line //-->\n\n<div id="ryu_mask">\n	<div id="front_matter">		<h1 id="splash_title">'+splashTitle+"</h1>\n\n";""!=o&&(O=O+'		<p id="summary">'+o+"</p>\n\n"),""!=a&&(O=O+'		<div id="app_logo"><img src="'+a+'" width="300"/></div>\n\n'),""!=d&&(O=O+'		<div id="splash_screen">'+d+"</div>\n\n"),""!=D&&(O=O+'		<div id="appbanner">\n'+D+"</div>\n\n"),""!=i&&(O=O+'		<div id="welcome_sign">'+i+"</div>\n\n"),O+='	</div> <!--// end of #front_matter //-->	<div id="issue">';for(var r=0;r<pagecount;r++)O=O+'<div class="page" id="page'+r+'">\n<h1 class="header section_head">'+c[r]+'</h1>\n<div id="page'+r+'" class="live page_box">\n'+unescape(g[r])+"</div>\n</div>\n";for(O+='</div> <!--// end of #issue //-->\n<div id="end_matter">\n',""!=Y&&(O=O+'	<div id="exit_sign">'+Y+"</div>\n\n"),O+='		<h1>Table of Contents</h1>\n			<ul id="nav">\n',r=0;s>r;r++)(""!=c[r]||null!=c[r])&&(O=O+'<li class="list_up"><a href="#page'+r+'">'+c[r]+"</a></li>\n");if(O+='			</ul>\n<div id="issue_gallery">\n',h.length>0)for(O+='<h1 class="title">Appendix: Gallery</h1>\n',r=0;r<h.length;r++)O=O+'<h3>Lightbox Gallery Item:</h3>\n<div id="'+_[r]+'" class="light_boxed '+f[r]+'">'+v[r]+"</div>\n\n";O+="</div>\n",""!=l&&(O=O+'<div id="social_widget">\n'+l+"\n</div>\n"),"no"!=n&&(O=O+'<a href="'+n+'" target="_blank">'+n+"</a>"),""!=z&&(O=O+'<p id="copy_right">'+z+"</p>"),O+="	</div> <!--// end of #End Matter //--></div> <!--// end of #ryu_mask //-->",O+='<div id="splash">\n	<div id="splashcell">\n		<div id="splashblock">\n			<div style="background:transparent url(\'ryuzine/images/app/icons/ryuzine-icon-02.png\') 0 0 no-repeat;height:72px;width:72px;margin:0 auto;-webkit-border-radius:8px;-moz-border-radius:8px;-o-border-radius:8px;-ms-border-radius:8px;border-radius:8px;-webkit-box-shadow:0px 0px 1000px #fff;-moz-box-shadow:0px 0px 1000px #fff;box-shadow:0px 0px 1000px #fff;">\n				<p style="display:none;">This page was made for the <img src="ryuzine/images/app/icons/ryuzine-icon-02.png" alt="Ryuzine Icon" height="16" width="16" align="bottom" /> <a href="http://www.ryumaru.com/products/ryuzine/" target="_blank">Ryuzine&trade; webapp</a>.</p>\n			</div>\n			<p><noscript style="display:block;margin:0 20px;text-align:left;">App Error: Javascript is disabled! Enable both Javascript and Stylesheets to view as a webapp, or disable both to view as a plain page, then reload/refresh.</noscript></p>\n		</div>\n		<p id="copyright" class="splash-fineprint">Ryuzine and the Ryuzine logos are trademarks of K.M. Hansen &amp; Ryu Maru</p>\n	</div>\n</div>\n',t.getElementsByTagName("body")[0].innerHTML=O;var A="<!DOCTYPE html>\n";A+='<head>\n<meta content="text/html; charset=UTF-8" http-equiv="content-type">\n<meta name="apple-mobile-web-app-capable" content="yes" />\n',A+=5==doc_converted?'<meta name="msapplication-TileColor" content="#ADDEFA" />\n<meta name="msapplication-TileImage" content="ryuzine/images/app/icons/rack-tile.png" />\n<link rel="shortcut icon" type="images/vnd.microsoft.icon" href="ryuzine/images/app/icons/rack-favicon.ico" sizes="16x16 32x32 48x48 64x64 128x128" />\n<link rel="icon" type="image/png" href="ryuzine/images/app/icons/rack-favicon.png" />\n<link rel="apple-touch-icon-precomposed" sizes="114x114" href="ryuzine/images/app/icons/rack-icon-01.png" />\n<link rel="apple-touch-icon-precomposed" sizes="72x72" href="ryuzine/images/app/icons/rack-icon-02.png" />\n<link rel="apple-touch-icon-precomposed" href="ryuzine/images/app/icons/rack-icon-03.png" />\n':'<meta name="msapplication-TileColor" content="#ADDEFA" />\n<meta name="msapplication-TileImage" content="ryuzine/images/app/icons/ryuzine-tile.png" />\n<link rel="shortcut icon" type="images/vnd.microsoft.icon" href="ryuzine/images/app/icons/favicon.ico" sizes="16x16 32x32 48x48 64x64 128x128" />\n<link rel="icon" type="image/png" href="ryuzine/images/app/icons/ryuzine-favicon.png" />\n<link rel="apple-touch-icon-precomposed" sizes="114x114" href="ryuzine/images/app/icons/ryuzine-icon-01.png" />\n<link rel="apple-touch-icon-precomposed" sizes="72x72" href="ryuzine/images/app/icons/ryuzine-icon-02.png" />\n<link rel="apple-touch-icon-precomposed" href="ryuzine/images/app/icons/ryuzine-icon-03.png" />\n',""!=doc_author&&(A=A+'<meta name="author" content="'+doc_author+'"/>\n'),""!=doc_summary&&(A=A+'<meta name="description" content="'+doc_summary+'"/>\n'),""!=doc_keywords&&(A=A+'<meta name="keywords" content="'+doc_keywords+'"/>\n'),""!=doc_version&&(A=A+'<meta name="generator" content="'+doc_version+'"/>\n'),""!=opt_js&&null!=opt_js&&0==opt_loadwhen&&(A=A+'<script type="text/javascript" src="'+opt_js+'"></script>\n'),A+='<link rel="stylesheet" type="text/css" href="ryuzine/css/ui.css" id="ui_format" />\n',document.getElementsByName("dTheme")[0].checked?A+='<link rel="stylesheet" type="text/css" href="ryuzine/theme/dark/theme.css" id="ui_theme" />\n':document.getElementsByName("dTheme")[1].checked?A+='<link rel="stylesheet" type="text/css" href="ryuzine/theme/light/theme.css" id="ui_theme" />\n':""!=opt_themename&&null!=opt_themename?A=A+'<link rel="stylesheet" type="text/css" href="ryuzine/theme/'+opt_themename+'/theme.css" id="ui_theme" />\n':A+='<link rel="stylesheet" type="text/css" href="ryuzine/theme/dark/theme.css" id="ui_theme" />\n',A+=5==doc_converted?'<link rel="stylesheet" type="text/css" href="ryuzine/css/rackgrid.css" id="screen_format" />\n<link rel="stylesheet" type="text/css" href="ryuzine/css/continuous.css" />\n':'<link rel="stylesheet" type="text/css" href="ryuzine/css/ryuzine_leftbound.css" id="screen_format" />\n',""!=opt_edition&&null!=opt_edition?A=A+'<link rel="stylesheet" type="text/css" href="css/'+opt_edition+'" id="this_issue" />\n':A+='<link rel="stylesheet" type="text/css" href="css/thisissue.css" id="this_issue" />\n',""!=opt_css&&null!=opt_css&&(A=A+'<link rel="stylesheet" type="text/css" href="'+opt_css+'" />\n'),""==opt_edition&&(A=A+'<style type="text/css">\n'+myCSS.value+"\n</style>\n"),1==opt_inpage&&(A=A+'<style type="text/css" id="myCSS">\n'+inPageCSS+"\n</style>\n"),A+='<link rel="stylesheet" type="text/css" href="ryuzine/css/blank.css" id="colortext" />\n',A=e.getElementsByTagName("title")[0]?A+"<title>"+e.getElementsByTagName("title")[0].innerHTML+"</title>\n\n":A+"<title>"+splashTitle+"</title>\n\n","test"==opt_config?((""==document.getElementById("configBox").value||"// Custom Configuration File Javascript Code: //"==document.getElementById("configBox").value)&&(alert(""+RYU._lc("Configuration File is set to TEST but there is no configuration to test!\n A default one will automatically be built for you.")),RYU.buildConfigFile()),A=A+'<script type="text/javascript">'+document.getElementById("configBox").value+"</script>\n",alert(""+RYU._lc("Using TEST CONFIGURATION FILE\n\n Before final export you should switch the Output Options selection for the configuration file to either DEFAULT or a CUSTOM external file.\n Using an in-page configuration file is not recommended."))):((""==opt_config||null==opt_config)&&(opt_config="ryuzine.config.js",alert(""+RYU._lc("Configuration File was not defined, using default!"))),A=A+'<script type="text/javascript" src="js/'+opt_config+'" ></script>\n'),A+=5==doc_converted?'<script type="text/javascript" src="ryuzine/js/ryuzine.rack.js"></script>\n':'<script type="text/javascript" src="ryuzine/js/ryuzine.js" ></script>\n',""!=opt_js&&null!=opt_js&&1==opt_loadwhen&&(A=A+'<script type="text/javascript" src="'+opt_js+'"></script>\n'),A+="</head>\n",A+=5==doc_converted?'<body id="ryuzinerack">\n':'<body id="ryuzinereader">\n',A+='<a href="#nav" id="skip2nav">Skip to Navigation</a>\n',A=A+t.getElementsByTagName("body")[0].innerHTML+"\n",""!=opt_js&&null!=opt_js&&2==opt_loadwhen&&(A=A+'<script type="text/javascript" src="'+opt_js+'"></script>\n'),""!=L&&(A=A+'<div id="boxad">'+L+"</div>\n"),A+="</body>\n</html>",document.getElementById("outputBox").value=A,updatePreview(0),RYU.swapAppTab("export","export_tab0","export_section0"),RYU.swapAppTab("newstyle","newstyle_tab0","newstyle_section0")}function loadURL2Sim(){extsrc=1;var e=document.getElementById("chooser3").value;e.match(/http:\/\//)||(e="http://"+e),document.getElementById("preview").setAttribute("scrolling","yes"),document.getElementById("preview").src=e,slideSpace(3)}function loadTemplate(e){null==e&&(e=1),doc_converted=e;var t=parseInt(document.getElementById("numpgs").value),n='<!DOCTYPE html>\n<html>\n<head>\n<meta name="author" content="'+doc_author+'" />\n<meta name="keywords" content="'+doc_keywords+'" />\n';if(n+=5==doc_converted?'<meta name="generator" content="Ryuzine Rack 1.0"/>\n':'<meta name="generator" content="Ryuzine 1.0" />\n',n=n+'<link rel="stylesheet" type="text/css" href="css/'+RYU.config.importStyles+'" id="this_issue" />\n',document.getElementById("wcyes").checked&&document.getElementById("wcstyles").checked){var a=document.getElementById("wctype").value,o=document.getElementById("wczero").value,d=document.getElementById("wcfolder").value;if(n+='<style type="text/css">\n',document.getElementById("wccontain").checked){n+=".header { height: 5px; visibility: hidden; }\n.footer { height: 15px; visibility: hidden; }\n.live img { display: none; }\n";for(var l=0;t>l;l++){if("3"==o)if(l>100&&1e3>l)var i="0"+l;else if(l>9&&100>l)var i="00"+l;else if(10>l)var i="000"+l;else var i=l;else if("2"==o)if(l>9&&100>l)var i="0"+l;else if(10>l)var i="00"+l;else var i=l;else if("1"==o&&10>l)var i="0"+l;else var i=l;n=document.getElementById("wccover").checked&&0==l?n+"#page"+l+" { background: black url('images/"+d+"/"+document.getElementById("wcprefix").value+i+document.getElementById("wcsuffix").value+"."+a+"') center center no-repeat; }\n":document.getElementById("wccover").checked&&l==t-1?n+"#page"+l+" { background: black url('images/"+d+"/"+document.getElementById("wcprefix").value+i+document.getElementById("wcsuffix").value+"."+a+"') center center no-repeat; }\n":n+"#live"+l+" { background: url('images/"+d+"/"+document.getElementById("wcprefix").value+i+document.getElementById("wcsuffix").value+"."+a+"') center center no-repeat; }\n"}if(document.getElementById("wccover").checked)var s="#page0, #page"+(t-1)+", ",c="#page0, #page"+(t-1)+" { background-image: none;}\n";else var s=c="";n=n+s+".live { -webkit-background-size: contain !important;-moz-background-size: contain !important; -ms-background-size: contain !important; -o-background-size: contain !important; background-size: contain !important;}\n@media only screen and (min-width: 480px) and (max-width: 599px) {\n"+c+".live { background: none !important; }\n.live img { width: 100%; height: auto; display: block;}\n}\n"}else if(n+=".header { height: 5px; visibility: hidden; }\n.footer { border: none; }\n#footer0 { visibility: hidden;}\n.covercorners-back .footer { visibility: hidden; }\n.live img { width: 100%; height: auto;}\n",document.getElementById("wccover").checked){if(l=t-1,"3"==o){var r="0000";if(l>100&&1e3>l)var i="0"+l;else if(l>9&&100>l)var i="00"+l;else if(10>l)var i="000"+l;else var i=l}else if("2"==o){var r="000";if(l>9&&100>l)var i="0"+l;else if(10>l)var i="00"+l;else var i=l}else if("1"==o&&10>l)var r="00",i="0"+l;else var r="0",i=l;n=n+"#page0 { background: black url('images/"+d+"/"+document.getElementById("wcprefix").value+r+document.getElementById("wcsuffix").value+"."+a+"') center 0 no-repeat; }\n#page"+l+" { background: black url('images/"+d+"/"+document.getElementById("wcprefix").value+i+document.getElementById("wcsuffix").value+"."+a+"') center 0 no-repeat; }\n#page0, #page"+(t-1)+" { -webkit-background-size: contain;-moz-background-size: contain; -ms-background-size: contain; -o-background-size: contain; background-size: contain;}\n#live0 img, #live"+l+" img { display: none; }@media only screen and (min-width: 480px) and (max-width: 599px) {\n#page0, #page"+l+" { background-image: none;}\n#live0 img, #live"+l+" img { display: block; }\n}\n"}if(n+="</style>",document.getElementById("inpage_css").checked=!0,document.getElementById("configit1").checked=!0,document.getElementById("wcmanga").checked)var m="manga.config.js";else var m="comic.config.js";document.getElementById("configName").value=m,RYU.outputOptions(),document.getElementById("onerun").checked&&setTimeout(function(){RYU.clearSimulator(),RYU.refreshSrc(),RYU.slideSpace(2),RYU.reWrite()},2e3),"1"==xfileman&&(document.getElementsByName("packtype")[2].checked=!0,document.getElementsByName("configfile_src")[2].checked=!0,document.getElementById("advsettings").style.display="none",document.getElementById("packtext").style.display="block",document.getElementById("add_config_drop").style.display="table-cell",document.getElementById("add_css_drop").style.display="table-cell")}n+="</head>\n<body>\n",n+='<div id="front_matter">',n=n+'<h1 id="splash_title">'+document.getElementById("magtitle").value+"</h1>\n",n+='<p id="summary">Write a short summary of your publication, this is often used by search engines as the blurb in search results.</p>',document.getElementById("applogo").checked&&(n+='<div id="app_logo"></div>\n'),document.getElementById("splashad").checked&&(n+='<div id="splash_screen">\n</div>\n'),document.getElementById("advert").checked&&(n+='<div id="appbanner">\n\n</div>\n'),document.getElementById("hellogoodbye").checked&&(n+='<div id="welcome_sign"><p>Optional Greeting Message</p></div>\n'),n+='</div>\n<div id="issue">',1==RYU.config.rzw_wysiwyg&&(document.getElementById("pagemanager").getElementsByTagName("ul")[0].innerHTML="");for(var l=0;t>l;l++){if(isEven(l))var u="recto";else var u="verso";if(0==l)var g="Front Cover ";else if(l==t-1)var g="Back Cover ";else var g="Page "+l;if(document.getElementById("wcyes").checked){var a=document.getElementById("wctype").value,o=document.getElementById("wczero").value;if("3"==o)if(l>100&&1e3>l)var i="0"+l;else if(l>9&&100>l)var i="00"+l;else if(10>l)var i="000"+l;else var i=l;else if("2"==o)if(l>9&&100>l)var i="0"+l;else if(10>l)var i="00"+l;else var i=l;else if("1"==o&&10>l)var i="0"+l;else var i=l;var d=document.getElementById("wcfolder").value,p='<img src="images/'+d+"/"+document.getElementById("wcprefix").value+i+document.getElementById("wcsuffix").value+"."+a+'" />';document.getElementById("onerun").checked&&(document.getElementById("imagefolder_name").value=d)}else if(0==l&&5==e)var p='<div id="racktop" class="run-ads"></div>\n<div id="item_list"></div>\n<div id="footer">\n';else if(1==l&&5==e)var p='<div id="autocat0">'+buildRackTable()+"</div>\n";else var p="<p>Put "+g+" Content In This Box</p>";n=n+'<div class="page '+u+'" id="page'+l+'">',n=n+'<h2 class="header section_head">'+g+'</h2>\n<div class="live page_box">\n'+p+"\n</div>\n",n+="</div>\n"}n+='</div>\n<div id="end_matter">\n<div id="issue_gallery">\n';for(var l=0;l<parseInt(document.getElementById("numlbs").value);l++)n+='<p></p><div class="light_boxed land">\n	<p>(Insert An Image Here)</p>\n	<p class="caption">Picture Caption</p>\n</div>\n';n+="</div>\n",document.getElementById("hellogoodbye").checked&&(n+='<div id="exit_sign"><p>Optional Exit Message</p></div>\n'),document.getElementById("swbi").checked||(n+='<div id="social_widget"></div>'),""!=document.getElementById("urlbox").value&&(n=n+'<a href="'+document.getElementById("urlbox").value+'" id="permalink">'+document.getElementById("urlbox").value+"</a>\n"),n=n+'<p id="copy_right">'+document.getElementById("copynote").value+"</p>\n",n+="</div>\n</body>\n</html>",0==RYU.config.rzw_wysiwyg?document.getElementById("inputBox").value=n:xinha_editors.inputBox.setEditorContent(n),refreshSrc()}function selectFile(e){1==e?(extsrc=1,myOutput.value="Loading....please wait",myWindow.src=document.getElementById("chooser2").value,myWindow.setAttribute("onload","RYU.pullSource(1)")):(mySource.value="Loading....please wait",mySourceFrame.src=document.getElementById("chooser").value,mySourceFrame.setAttribute("onload","RYU.pullSource()"))}function convertIDfile(e,t){if(mySourceFrame.contentWindow.document.getElementsByClassName(""+e).length>0){for(var n=mySourceFrame.contentWindow.document.getElementsByClassName(""+e),a=0;a<n.length;a++)mySourceFrame.contentWindow.document.getElementsByClassName(""+e)[a].className=""+e+" "+t;for(var o=mySourceFrame.contentWindow.document.getElementsByClassName(""+t),a=0;a<o.length;a++)mySourceFrame.contentWindow.document.getElementsByClassName(""+t)[a].className=""+t}}function convertOldFormat(e){for(var t=mySourceFrame.contentWindow.document,n=t.getElementsByClassName("section_head"),a=t.getElementsByClassName("page_box"),o=t.getElementsByClassName("light_boxed"),d=null,l=0;l<a.length;l++){if(isEven(l))var i="recto";else var i="verso";var s=a[l].parentNode;null==d&&(d=s),a[l].removeAttribute("id");var c=document.createElement("div");c.id="page"+l,c.className="page "+i,s.insertBefore(c,a[l])}var r=t.getElementsByClassName("page");pagecheck=r;for(var l=0;l<r.length;l++)r[l].appendChild(n[l]),r[l].appendChild(a[l]);var m=document.createElement("div");if(m.id="front_matter",mySourceFrame.contentWindow.document.getElementById("splash_title"))m.appendChild(mySourceFrame.contentWindow.document.getElementById("splash_title"));else{var u=document.createElement("h1");u.id="splash_title",u.innerHTML=e,m.appendChild(u)}if(mySourceFrame.contentWindow.document.getElementById("summary"))mySourceFrame.contentWindow.document.getElementById("summary").innerHTML=mySourceFrame.contentWindow.document.getElementById("summary").textContent||mySourceFrame.contentWindow.document.getElementById("summary").innerText,m.appendChild(mySourceFrame.contentWindow.document.getElementById("summary"));else{var g=document.createElement("div");g.id="summary",m.appendChild(g)}if(mySourceFrame.contentWindow.document.getElementById("splash_screen"))m.appendChild(mySourceFrame.contentWindow.document.getElementById("splash_screen"));else{var p=document.createElement("div");p.id="splash_screen",m.appendChild(p)}if(mySourceFrame.contentWindow.document.getElementById("appbanner"))m.appendChild(mySourceFrame.contentWindow.document.getElementById("appbanner"));else{var y=document.createElement("div");y.id="appbanner",m.appendChild(y)}if(mySourceFrame.contentWindow.document.getElementById("welcome_sign"))m.appendChild(mySourceFrame.contentWindow.document.getElementById("welcome_sign"));else{var h=document.createElement("div");h.id="welcome_sign",m.appendChild(h)}var v=document.createElement("div");v.id="issue";for(var l=r.length-1;l>-1;l--)v.insertBefore(r[l],v.firstChild);var f=document.createElement("div");f.id="end_matter";var _=document.createElement("div");_.id="issue_gallery";for(var l=o.length-1;l>-1;l--)_.insertBefore(o[l],_.firstChild);if(f.appendChild(_),mySourceFrame.contentWindow.document.getElementById("exit_sign"))f.appendChild(mySourceFrame.contentWindow.document.getElementById("exit_sign"));else{var E=document.createElement("div");E.id="exit_sign",f.appendChild(E)}if(mySourceFrame.contentWindow.document.getElementById("permalink"))f.appendChild(mySourceFrame.contentWindow.document.getElementById("permalink"));else{var B=document.createElement("a");B.id="permalink",f.appendChild(B)}if(mySourceFrame.contentWindow.document.getElementById("copy_right"))f.appendChild(mySourceFrame.contentWindow.document.getElementById("copy_right"));else{var I=document.createElement("div");I.id="copy_right",f.appendChild(I)}var w="";if(mySourceFrame.contentWindow.document.getElementById("ryu_mask")&&(w=mySourceFrame.contentWindow.document.getElementById("ryu_mask").innerHTML),""!=w){var b=document.createElement("div");b.innerHTML=w,mySourceFrame.contentWindow.document.getElementById("ryu_mask").innerHTML="",f.insertBefore(b,f.firstChild)}d.insertBefore(m,d.firstChild),d.appendChild(v),d.appendChild(f),mySourceFrame.contentWindow.document.getElementById("splash")&&("ryu_mask"==d.id?d.parentNode.appendChild(mySourceFrame.contentWindow.document.getElementById("splash")):"body"==d.tagName&&d.appendChild(mySourceFrame.contentWindow.document.getElementById("splash")))}function pullSource(e){if(clearDocProps(),1==config.rzw_wysiwyg&&(document.getElementById("pagemanager").getElementsByTagName("ul")[0].innerHTML=""),mySourceFrame.contentWindow.document.getElementsByTagName("title").length>0)var t="<title>"+mySourceFrame.contentWindow.document.getElementsByTagName("title")[0].innerHTML+"</title>";else var t="";if(mySourceFrame.contentWindow.document.getElementById("this_issue")){var n=mySourceFrame.contentWindow.document.getElementById("this_issue").href;if(document.getElementById("edition1").checked)a=document.getElementById("editionName").value;else{n=n.split("/");var a=n[n.length-1];"thisissue.css"==a||document.getElementById("edition2").checked||(document.getElementById("edition1").checked=!0,document.getElementById("customFile").style.display="table-cell",
document.getElementById("editionName").value=a)}n='<link rel="stylesheet" type="text/css" href="css/'+a+'" id="this_issue" />'}else var n="";var o="";if(mySourceFrame.contentWindow.document.getElementsByTagName("style").length>0){for(var d=mySourceFrame.contentWindow.document.getElementsByTagName("style").length-1;d>=0;d--)"head"!=mySourceFrame.contentWindow.document.getElementsByTagName("style")[d].parentNode.tagName.toLowerCase()&&(o+=mySourceFrame.contentWindow.document.getElementsByTagName("style")[d].innerHTML),mySourceFrame.contentWindow.document.getElementsByTagName("style")[d].parentNode.removeChild(mySourceFrame.contentWindow.document.getElementsByTagName("style")[d]);if(""!=o){var l=mySourceFrame.contentWindow.document.createElement("style");l.type="text/css",l.innerHTML=o,mySourceFrame.contentWindow.document.getElementsByTagName("body")[0].appendChild(l)}}if(mySourceFrame.contentWindow.document.getElementsByTagName("img").length>0)for(var i=mySourceFrame.contentWindow.document.getElementsByTagName("img"),s="",c=0;c<i.length;c++)i[c].hasAttribute("href_fmt")&&(s=i[c].getAttribute("href_fmt"),i[c].setAttribute("href",s),i[c].removeAttribute("href_fmt"));if(null!=mySourceFrame.contentWindow.document.getElementById("racktop"))doc_converted=5,alert(""+RYU._lc("Error: This is a Ryuzine Rack Newsstand.  Editing this file is only recommended for advanced authors."));else if(null!=mySourceFrame.contentWindow.document.getElementById("binder"))doc_converted=4,alert(""+RYU._lc("Error: File could not be converted"));else if(mySourceFrame.contentWindow.document.getElementsByClassName("splash-screen").length>0||mySourceFrame.contentWindow.document.getElementsByClassName("splash-title").length>0||mySourceFrame.contentWindow.document.getElementsByClassName("welcome-sign").length>0||mySourceFrame.contentWindow.document.getElementsByClassName("section-head").length>0||mySourceFrame.contentWindow.document.getElementsByClassName("group").length>0||mySourceFrame.contentWindow.document.getElementsByClassName("page-box").length>0||mySourceFrame.contentWindow.document.getElementsByClassName("light-boxed").length>0||mySourceFrame.contentWindow.document.getElementsByClassName("exit-sign").length>0){if(alert("This file appears to be an InDesign > Export for Dreamweaver file. It will be converted to Ryuzine format. You should save from the Editor immediately and in the future import the new file instead of this one."),convertIDfile("splash-screen","splash_screen"),convertIDfile("splash-title","splash_title"),convertIDfile("welcome-sign","welcome_sign"),convertIDfile("section-head","header section_head"),convertIDfile("group","live page_box"),convertIDfile("page-box","live page_box"),convertIDfile("light-boxed","light_boxed"),convertIDfile("exit-sign","exit_sign"),mySourceFrame.contentWindow.document.getElementsByClassName("section_head").length>0)for(var r=mySourceFrame.contentWindow.document.getElementsByClassName("section_head"),m="",u=0;u<r.length;u++)r[u].getElementsByTagName("p").length>0&&(m=r[u].getElementsByTagName("p")[0].innerHTML,r[u].innerHTML=m);convertOldFormat(t),doc_converted=3}else if(pagecheck=mySourceFrame.contentWindow.document.getElementsByClassName("page"),pagecheck.length>0){for(var g=0;g<pagecheck.length;g++){if(isEven(g))var p="recto";else var p="verso";hasClass(pagecheck[g],p)||addClass(pagecheck[g],p),pagecheck[g].getElementsByClassName("header").length<1&&pagecheck[g].getElementsByClassName("section_head").length<1&&(pagecheck[g].innerHTML='<h1 class="header section_head">Page '+g+"</h1>\n"+pagecheck[g].innerHTML),pagecheck[g].getElementsByClassName("live").length<1&&pagecheck[g].getElementsByClassName("page_box").length<1&&(pagecheck[g].innerHTML=pagecheck[g].innerHTML+'<div class="live page_box"></div>\n')}mySourceFrame.contentWindow.document.getElementById("summary")&&(mySourceFrame.contentWindow.document.getElementById("summary").innerHTML=mySourceFrame.contentWindow.document.getElementById("summary").textContent||mySourceFrame.contentWindow.document.getElementById("summary").innerText),doc_converted=1}else convertOldFormat(t),doc_converted=2;var y=mySourceFrame.contentWindow.document.getElementsByTagName("body")[0].innerHTML,h="<html><head>"+t+n+"</head><body>"+y+"</body></html>";if(1==e)myOutput.value="<!DOCTYPE html>\n"+myWindow.contentWindow.document.getElementsByTagName("html")[0].innerHTML+"</html>";else if(0==config.rzw_wysiwyg)mySource.value="<!DOCTYPE html>\n"+h;else{xinha_editors.inputBox.setEditorContent(h);for(var g=0;g<pagecheck.length;g++)add_thumbnail(g);if(mySourceFrame.contentWindow.document.getElementById("issue")){var v=mySourceFrame.contentWindow.document.getElementById("issue").className.split(" ");-1!=v.indexOf("spreads")?document.getElementById("show_spreads").checked=!0:-1!=v.indexOf("continuous")?document.getElementById("show_inline").checked=!0:document.getElementById("show_single").checked=!0,-1!=v.indexOf("bindright")&&(document.getElementById("right_bound").checked=!0);var f=document.getElementById("pagemanager").getElementsByTagName("ul")[0];f.className="";for(var _=0;_<v.length;_++)addClass(f,v[_])}}}function clearDocProps(){doc_title="",doc_author="",doc_applogo="",doc_summary="",doc_keywords="",doc_version="",doc_social_src=0,doc_social="",doc_link="",doc_welcome="",doc_banner="",doc_boxad="",doc_splash="",doc_goodbye="",doc_copyright="",doc_converted=0}function getDocProps(){if(1==config.rzw_wysiwyg){var e=document.getElementById("XinhaIFrame_inputBox").contentWindow.document;null!=e.getElementById("splash_title")?doc_title=e.getElementById("splash_title").innerHTML:e.getElementsByTagName("title").length>0&&(doc_title=e.getElementsByTagName("title")[0].innerHTML),document.getElementById("my_doc_title").value=doc_title,e.getElementsByName("author").length>0?doc_author=e.getElementsByName("author")[0].content:mySourceFrame.contentWindow.document.getElementsByName("author").length>0&&(doc_author=mySourceFrame.contentWindow.document.getElementsByName("author")[0].content),document.getElementById("my_doc_author").innerHTML=doc_author,null!=e.getElementById("copy_right")&&(doc_copyright=e.getElementById("copy_right").innerHTML),document.getElementById("my_doc_copyright").value=doc_copyright,doc_version=e.getElementsByName("generator").length>0?e.getElementsByName("generator")[0].content:mySourceFrame.contentWindow.document.getElementsByName("generator").length>0?mySourceFrame.contentWindow.document.getElementsByName("generator")[0].content:5==doc_converted?"Ryuzine Rack Newsstand":4==doc_converted?"Ryuzine 0.9.5.x (or earlier)":3==doc_converted||2==doc_converted?"Ryuzine 1.0 (Converted)":1==doc_converted?"Ryuzine 1.0 (Inferred)":"Version data missing",document.getElementById("my_doc_version").innerHTML=doc_version,document.getElementById("my_doc_pagecount").innerHTML=e.getElementsByClassName("page").length,null!=e.getElementById("summary")?doc_summary=e.getElementById("summary").textContent||e.getElementById("summary").innerText:null!=mySourceFrame.contentWindow.document.getElementById("summary")?doc_summary=mySourceFrame.contentWindow.document.getElementById("summary").textContent||mySourceFrame.contentWindow.document.getElementById("summary").innerText:e.getElementsByName("description").length>0&&(doc_summary=e.getElementsByName("description")[0].content),document.getElementById("my_doc_summary").value=doc_summary,countChars("my_doc_summary","my_doc_charcount"),e.getElementsByName("keywords").length>0?doc_keywords=e.getElementsByName("keywords")[0].content:mySourceFrame.contentWindow.document.getElementsByName("keywords").length>0&&(doc_keywords=mySourceFrame.contentWindow.document.getElementsByName("keywords")[0].content),doc_keywords=doc_keywords.split(",");for(var t=0;t<doc_keywords.length;t++)doc_keywords[t]=doc_keywords[t].trim();doc_keywords=doc_keywords.join(),document.getElementById("my_doc_keywords").value=doc_keywords,null!=e.getElementById("app_logo")?(e.getElementById("app_logo").getElementsByTagName("img").length>0&&(doc_applogo=e.getElementById("app_logo").getElementsByTagName("img")[0].src),document.getElementById("my_app_logo").checked=!0):document.getElementById("my_app_logo").checked=!1,null!=e.getElementById("welcome_sign")?(document.getElementById("my_doc_welcome").checked=!0,doc_welcome=e.getElementById("welcome_sign").innerHTML):document.getElementById("my_doc_welcome").checked=!1,null!=e.getElementById("exit_sign")?(document.getElementById("my_doc_goodbye").checked=!0,doc_goodbye=e.getElementById("exit_sign").innerHTML):document.getElementById("my_doc_goodbye").checked=!1,null!=e.getElementById("appbanner")?(document.getElementById("my_doc_banner").checked=!0,doc_banner=e.getElementById("appbanner").innerHTML):document.getElementById("my_doc_banner").checked=!1,null!=e.getElementById("splash_screen")?(document.getElementById("my_doc_splash").checked=!0,doc_splash=e.getElementById("splash_screen").innerHTML):document.getElementById("my_doc_splash").checked=!1,null!=e.getElementById("permalink")?(document.getElementById("my_doc_link").checked=!0,doc_link=e.getElementById("permalink").innerHTML):null!=e.getElementById("offline")?(document.getElementById("my_doc_link").checked=!0,doc_link=e.getElementById("permalink").innerHTML):document.getElementById("my_doc_link").checked=!1,null!=e.getElementById("boxad")?(doc_boxad=e.getElementById("boxad").innerHTML,document.getElementById("my_doc_boxad").checked=!0):document.getElementById("my_doc_boxad").checked=!1,null!=e.getElementById("social_widget")?(doc_social=e.getElementById("social_widget").innerHTML,""!=doc_social.trim()?document.getElementById("my_doc_social").checked=!0:document.getElementById("my_doc_social").checked=!1):document.getElementById("my_doc_social").checked=!1}}function setDocProps(){if(1==config.rzw_wysiwyg){var e=document.getElementById("XinhaIFrame_inputBox").contentWindow.document;if(null==e.getElementById("ryu_mask")){var t=document.createElement("div");t.id="ryu_mask",e.getElementsByTagName("body")[0].appendChild(t)}var n=e.getElementById("ryu_mask");if(null==e.getElementById("front_matter")){var a=document.createElement("div");a.id="front_matter",n.appendChild(a)}if(null==e.getElementById("issue")){var o=document.createElement("div");o.id="issue",n.appendChild(o)}if(null==e.getElementById("end_matter")){var d=document.createElement("div");d.id="end_matter",n.appendChild(d)}var a=e.getElementById("front_matter"),d=e.getElementById("end_matter");if(null==e.getElementById("splash_title")){var l=document.createElement("h1");l.id="splash_title",a.appendChild(l)}if(e.getElementById("splash_title").innerHTML=document.getElementById("my_doc_title").value,0==e.getElementsByName("author").length){var i=document.createElement("meta");i.name="author",e.getElementsByTagName("head")[0].appendChild(i)}if(doc_author=document.getElementById("my_doc_author").value,e.getElementsByName("author")[0].content=doc_author,null==e.getElementById("copy_right")){var s=document.createElement("p");s.id="copy_right",d.appendChild(s)}if(e.getElementById("copy_right").innerHTML=document.getElementById("my_doc_copyright").value,0==e.getElementsByName("generator").length){var c=document.createElement("meta");c.name="generator",e.getElementsByTagName("head")[0].appendChild(c)}if(e.getElementsByName("generator")[0].content=doc_version,null==e.getElementById("summary")){var r=document.createElement("p");r.id="summary",a.appendChild(r)}if(doc_summary=document.getElementById("my_doc_summary").value,e.getElementById("summary").innerHTML=doc_summary,0==e.getElementsByName("description").length){var m=document.createElement("meta");m.name="description",e.getElementsByTagName("head")[0].appendChild(m)}if(e.getElementsByName("description")[0].content=doc_summary.replace(/"/g,"'"),0==e.getElementsByName("keywords").length){var u=document.createElement("meta");u.name="keywords",e.getElementsByTagName("head")[0].appendChild(u)}""==doc_keywords&&(doc_keywords=document.getElementById("my_doc_keywords").value),doc_keywords=doc_keywords.split(",");for(var g=0;g<doc_keywords.length;g++)doc_keywords[g]=doc_keywords[g].trim();if(doc_keywords=doc_keywords.join(),e.getElementsByName("keywords")[0].content=doc_keywords,!e.getElementById("app_logo")){var p=document.createElement("div");p.id="app_logo",a.appendChild(p)}if(e.getElementById("app_logo").innerHTML='<img src="'+doc_applogo+'" width="300"/>',document.getElementById("my_doc_welcome").checked){if(null==e.getElementById("welcome_sign")){var y=document.createElement("div");y.id="welcome_sign",a.appendChild(y)}e.getElementById("welcome_sign").innerHTML=doc_welcome}else null!=e.getElementById("welcome_sign")&&e.getElementById("welcome_sign").parentNode.removeChild(e.getElementById("welcome_sign"));if(document.getElementById("my_doc_goodbye").checked){if(null==e.getElementById("exit_sign")){var h=document.createElement("div");h.id="exit_sign",d.appendChild(h)}e.getElementById("exit_sign").innerHTML=doc_goodbye}else null!=e.getElementById("exit_sign")&&e.getElementById("exit_sign").parentNode.removeChild(e.getElementById("exit_sign"));if(document.getElementById("my_doc_banner").checked){if(null==e.getElementById("appbanner")){var v=document.createElement("div");v.id="appbanner",a.appendChild(v)}e.getElementById("appbanner").innerHTML=doc_banner}else null!=e.getElementById("appbanner")&&e.getElementById("appbanner").parentNode.removeChild(e.getElementById("appbanner"));if(document.getElementById("my_doc_splash").checked){if(null==e.getElementById("splash_screen")){var f=document.createElement("div");f.id="splash_screen",a.appendChild(f)}e.getElementById("splash_screen").innerHTML=doc_splash}else null!=e.getElementById("splash_screen")&&e.getElementById("splash_screen").parentNode.removeChild(e.getElementById("splash_screen"));if(document.getElementById("my_doc_link").checked){if(null==e.getElementById("permalink")){var _=document.createElement("a");_.id="permalink",d.appendChild(_)}e.getElementById("permalink").innerHTML=doc_link,e.getElementById("permalink").href=doc_link}else null!=e.getElementById("permalink")&&e.getElementById("permalink").parentNode.removeChild(e.getElementById("permalink"));if(document.getElementById("my_doc_boxad").checked){if(null==e.getElementById("boxad")){var E=document.createElement("div");E.id="boxad",d.appendChild(E)}e.getElementById("boxad").innerHTML=doc_boxad}else null!=e.getElementById("boxad")&&e.getElementById("boxad").parentNode.removeChild(e.getElementById("boxad"));if(document.getElementById("my_doc_social").checked){if(null==e.getElementById("social_widget")){var B=document.createElement("div");B.id="social_widget",d.appendChild(B)}e.getElementById("social_widget").innerHTML=doc_social}else null!=e.getElementById("social_widget")&&e.getElementById("social_widget").parentNode.removeChild(e.getElementById("social_widget"))}}function clearSimulator(){if(1==extsrc){var e=document.getElementById("simscreen");e.removeChild(document.getElementById("preview")),nuscreen=document.createElement("iframe"),nuscreen.setAttribute("id","preview"),nuscreen.setAttribute("scrolling","no"),e.appendChild(nuscreen),myWindow=document.getElementById("preview"),rotateDevice(),extsrc=0}}function refreshSrc(){var e=document.getElementById("sourceframe").contentWindow.document;e.open(),0==config.rzw_wysiwyg?e.write(document.getElementById("inputBox").value):e.write(xinha_editors.inputBox.getEditorContent()),e.close(),document.getElementById("notice1").style.display="none"}function updatePreview(){if("Android"==device.Platform&&device.v<3);else if(0==extsrc){var e=document.getElementById("preview").contentWindow.document;e.open(),e.write(document.getElementById("outputBox").value),e.close(),document.getElementById("notice").style.display="none"}}function subMenu(e){"none"==document.getElementById(e).style.display?document.getElementById(e).style.display="block":document.getElementById(e).style.display="none"}function rotateDevice(e){if(null!=e&&(d=e),0==dSim)var t=" noskin";else var t="";if(""!=config.deviceList[d][3])var n=config.deviceList[d][3];else var n="";if(1==dView)var a="browser";else var a="appview";if(0==r?(myDevice.className=n+" portrait "+config.deviceList[d][1]+" "+config.deviceList[d][2]+" "+a+t,r=1):(myDevice.className=n+" landscape "+config.deviceList[d][1]+" "+config.deviceList[d][2]+" "+a+t,r=0),config.deviceList[d][4]&&""!=config.deviceList[d][4]&&isNaN(config.deviceList[d][4]))var o="ryuzinewriter/addons/"+config.deviceList[d][4]+"/";else var o="ryuzinewriter/skins/";if(config.deviceList[d][5]&&""!=config.deviceList[d][5])if(isNaN(config.deviceList[d][5]))var l=config.deviceList[d][5];else{var l="default";if(!document.getElementById("custom_skin_css")){var i=document.createElement("style");i.id="custom_skin_css",document.getElementsByTagName("body")[0].appendChild(i)}if("phone"==config.deviceList[d][1])var s=landbezel_tb=30,c=landbezel_lr=200;else var s=landbezel_tb=100,c=landbezel_lr=100;document.getElementById("custom_skin_css").innerHTML="#device.custom.portrait, #device.custom.portrait.noskin {	height: "+config.deviceList[d][4]+"px;	width:  "+config.deviceList[d][5]+"px;	margin-top: -"+parseInt((config.deviceList[d][4]+c)/2)+"px;	margin-left: -"+parseInt((config.deviceList[d][5]+s)/2)+"px;}	#device.custom.portrait #screen {		height: "+config.deviceList[d][4]+"px;		width:  "+config.deviceList[d][5]+"px;	}#device.custom.landscape, #device.custom.landscape.noskin {	height: "+config.deviceList[d][5]+"px;	width: "+config.deviceList[d][4]+"px;	margin-top: -"+parseInt((config.deviceList[d][5]+landbezel_tb)/2)+"px;	margin-left: -"+parseInt((config.deviceList[d][4]+landbezel_lr)/2)+"px;}	#device.custom.landscape #screen {		height: "+config.deviceList[d][5]+"px;		width:  "+config.deviceList[d][4]+"px;	}#device.custom.portrait.noskin {	height: "+config.deviceList[d][4]+"px;	width:  "+config.deviceList[d][5]+"px;	margin-top: -"+parseInt(config.deviceList[d][4]/2)+"px;	margin-left: -"+parseInt(config.deviceList[d][5]/2)+"px;}#device.custom.landscape.noskin {	height: "+config.deviceList[d][5]+"px;	width: "+config.deviceList[d][4]+"px;	margin-top: -"+parseInt(config.deviceList[d][5]/2)+"px;	margin-left: -"+parseInt(config.deviceList[d][4]/2)+"px;}"}else var l=config.deviceList[d][3];""==l?document.getElementById("skin").href=o+"default/skin.css":document.getElementById("skin").href=o+l+"/skin.css",devSize(),updatePreview()}function switchDevice(e){d=e,document.getElementById("custom_skin_css")&&(document.getElementById("custom_skin_css").innerHTML=""),r="phone"==config.deviceList[d][1]?0:1,zoomFactor(1);var t=document.getElementById("zoom_factor");t.selectedIndex=0,document.getElementById("zoom_opt_label").innerHTML=t.options[t.selectedIndex].innerHTML,rotateDevice(d)}function customPreview(){var e=config.deviceList.length,t=document.getElementById("custom_name").value;if((""==t||null==t)&&(t="Device "+e),document.getElementById("device_profile").checked)var n="phone";else var n="tablet";var a=document.getElementById("os_select").value;if("other"==a){if(a=document.getElementById("custom_os").value||"os"+e,document.getElementById("os_sizes").checked){var o=document.getElementById("custom_status").value;(""==o||null==o||NaN==o)&&(o=20);var d=document.getElementById("custom_navbar").value;(""==d||null==d||NaN==d)&&(d=44);var l=document.getElementById("custom_tabbar").value;(""==l||null==l||NaN==l)&&(l=44);for(var i=!0,s=0;s<customOSadds.length;s++)a==customOSadds[s][0]&&n==customOSadds[s][1]&&(i=!1);if(1==i){var c=[""+a,""+n,""+o,""+d,""+l];customOSadds.push(c)}Set_Cookie("rzw_customos",JSON.stringify(customOSadds)),customOSstyles(customOSadds.length-1)}}else var o="",d="",l="";if(document.getElementById("toskin").checked)var r=document.getElementById("custom_skin").value.trim().replace(/\s/g,"_")||"default",m="",u="";else{var r="custom",m=document.getElementById("custom_width").value;(""==m||null==m||NaN==m)&&(m=568);var u=document.getElementById("custom_height").value;(""==u||null==u||NaN==u)&&(u=320)}var g=[t,n,a,r,parseInt(m),parseInt(u),parseInt(o),parseInt(d),parseInt(l)];customDevices.push(g),config.deviceList.push(g),devSelector(),Set_Cookie("deviceList",JSON.stringify(customDevices))}function customOSstyles(e){if(!document.getElementById("os_additions")){var t=document.createElement("style");t.id="os_additions",document.getElementsByTagName("body")[0].appendChild(t)}document.getElementById("os_additions").innerHTML+="#device.portrait."+customOSadds[e][1]+"."+customOSadds[e][0]+".appview #simscreen {	top: 0px;	bottom: 0px;}#device.portrait."+customOSadds[e][1]+"."+customOSadds[e][0]+".browser #simscreen {	top: "+parseInt(1*customOSadds[e][2]+1*customOSadds[e][3])+"px;	bottom: "+customOSadds[e][4]+"px;}	#device.portrait."+customOSadds[e][1]+"."+customOSadds[e][0]+".appview #statusbar {	display: none;}#device.portrait."+customOSadds[e][1]+"."+customOSadds[e][0]+".browser #statusbar {	height: "+customOSadds[e][2]+"px;	line-height: "+customOSadds[e][2]+"px;	color: #ccc;	background-color: #111;	display: block;}#device.portrait."+customOSadds[e][1]+"."+customOSadds[e][0]+".appview #navbar {	display: none;}#device.portrait."+customOSadds[e][1]+"."+customOSadds[e][0]+".browser #navbar {	height: "+customOSadds[e][3]+"px;	line-height: "+customOSadds[e][3]+"px;	background-color: #ccc;	display: block;}#device.portrait."+customOSadds[e][1]+"."+customOSadds[e][0]+".appview #tabbar {	display: none;}#device.portrait."+customOSadds[e][1]+"."+customOSadds[e][0]+".browser #tabbar {	height: "+customOSadds[e][4]+"px;	line-height: "+customOSadds[e][4]+"px;	background-color: #999;	display: block;}#device.landscape."+customOSadds[e][1]+"."+customOSadds[e][0]+".appview #simscreen {	top: 0px;	bottom: 0px;	right: 0px;}#device.landscape."+customOSadds[e][1]+"."+customOSadds[e][0]+".browser #simscreen {	top: "+parseInt(1*customOSadds[e][2]+1*customOSadds[e][3])+"px;	bottom: "+customOSadds[e][4]+"px;	right: 0px;}#device.landscape."+customOSadds[e][1]+"."+customOSadds[e][0]+".appview #statusbar {	display: none;}#device.landscape."+customOSadds[e][1]+"."+customOSadds[e][0]+".browser #statusbar {	height: "+customOSadds[e][2]+"px;	line-height: "+customOSadds[e][2]+"px;	color: #ccc;	background-color: #111;	display: block;}#device.landscape."+customOSadds[e][1]+"."+customOSadds[e][0]+".appview #navbar {	display: none;}#device.landscape."+customOSadds[e][1]+"."+customOSadds[e][0]+".browser #navbar {	height: "+customOSadds[e][3]+"px;	line-height: "+customOSadds[e][3]+"px;	background-color: #ccc;	display: block;}#device.landscape."+customOSadds[e][1]+"."+customOSadds[e][0]+".appview #tabbar {	display: none;}#device.landscape."+customOSadds[e][1]+"."+customOSadds[e][0]+".browser #tabbar {	height: "+customOSadds[e][4]+"px;	line-height: "+customOSadds[e][4]+"px;	background-color: #999;	display: block;}"}function zoomFactor(e){devSize();var t=document.getElementById("simbox"),n=document.getElementById("device");"Fit Height"==e&&(e=Math.round(t.offsetHeight/devH*100)/100),"Fit Width"==e&&(e=Math.round(t.offsetWidth/devW*100)/100),t.style.overflow="",n.style[cssTransform]="scale("+e+")",t.style.overflow="auto"}function outputOptions(){opt_lang=""==document.getElementById("natLang").value?"en":document.getElementById("natLang").value,opt_themename=document.getElementsByName("dTheme")[2].checked?document.getElementById("dThemeName").value:"",opt_config=document.getElementById("configit2").checked?"test":document.getElementById("configit1").checked?document.getElementById("configName").value:"ryuzine.config.js",document.getElementById("edition2").checked?(opt_edition="",0==clearStyleBox&&(clearStyleBox=1,myCSS.value="")):document.getElementById("edition1").checked?(opt_edition=document.getElementById("editionName").value,clearStyleBox=0,myCSS.value="",""==opt_edition&&(alert(""+RYU._lc("ERROR: Custom Issue-Specific stylesheet filename missing, using default.")),opt_edition="thisissue.css",document.getElementById("editionName").value=opt_edition)):(clearStyleBox=0,myCSS.value="",opt_edition="thisissue.css"),opt_inpage=document.getElementById("inpage_css").checked?1:0,opt_css=document.getElementById("custCSS").checked?document.getElementById("custCSSName").value:"",opt_js=document.getElementById("custJS").checked?document.getElementById("custJSName").value:"",opt_loadwhen=document.getElementById("loadwhen2").checked?2:document.getElementById("loadwhen1").checked?1:0}function slideSpace(e,t){if(e!=active_workspace){1==e&&runonce();for(var n=document.getElementsByClassName("selected_workspace"),a=n.length-1;a>=0;a--)removeClass(n[a],"selected_workspace");var o=document.getElementById(workspace[e]),d=document.getElementById(workspace[active_workspace]),l=document.getElementById("navset"+e),i=document.getElementById("navset"+active_workspace);removeClass(d,"ws_in"),addClass(d,"ws_out"),removeClass(i,"nav_in"),addClass(i,"nav_out"),setTimeout(function(){d.style[cssTransitionDuration]="0s",i.style[cssTransitionDuration]="0s",removeClass(d,"ws_out"),addClass(d,"ws_deck"),removeClass(i,"nav_out"),addClass(i,"nav_deck")},1100),o.style[cssTransitionDuration]="1s",l.style[cssTransitionDuration]="1s",removeClass(o,"ws_deck"),addClass(o,"ws_in"),removeClass(l,"nav_deck"),addClass(l,"nav_in"),active_workspace=e,6>e?addClass(document.getElementById("b_"+workspace[e]),"selected_workspace"):addClass(document.getElementById("addonsbutton"),"selected_workspace")}}function swapAppTab(e,t,n){for(var a=(document.getElementById(t).style.zIndex,document.getElementById(e).getElementsByClassName("tab")),o=0;o<a.length;o++)a[o].id==t?a[o].style.zIndex="10":a[o].style.zIndex="";for(var d=document.getElementById(n).className,l=document.getElementById(e).getElementsByClassName(d),i=0;i<l.length;i++)l[i].id!=n&&(l[i].style.display="none");document.getElementById(n).style.display="block"}function controlSlide(e,t,n){"nav"==e?(e="navset",c="nav"):"control"==e?(e="controlset",c="control"):c=e,n>0?(document.getElementById(""+e+(t+1)).className=e+" "+c+"_deck",document.getElementById(""+e+t).className=e+" "+c+"_in"):(document.getElementById(""+e+t).className=e+" "+c+"_in",t>0&&(document.getElementById(""+e+(t-1)).className=e+" "+c+"_out"))}function uniqueElements(){if(1==config.rzw_wysiwyg){var e=document.getElementById("XinhaIFrame_inputBox").contentWindow.document;null!=e.getElementById("front_matter")&&("none"==e.getElementById("front_matter").style.display?e.getElementById("front_matter").style.display="block":e.getElementById("front_matter").style.display="none"),null!=e.getElementById("end_matter")&&("none"==e.getElementById("end_matter").style.display?e.getElementById("end_matter").style.display="block":e.getElementById("end_matter").style.display="none")}}function toggleDropBar(){if(void 0!=typeof document.getElementById("dropbar")){var e=document.getElementById("dropbar");"navbars dropbar_hide"==e.className?e.className="navbars dropbar_show":e.className="navbars dropbar_hide"}}function clearEditor(){var e=confirm("Warning: This will erase everything in the editor!");if(1==e){var t="<p>&nbsp;</p><p>&nbsp</p><p>&nbsp;</p>";0==config.rzw_wysiwyg?document.getElementById("inputBox").value=t:(xinha_editors.inputBox.setEditorContent(t),document.getElementById("pagemanager").getElementsByTagName("ul")[0].innerHTML=""),docPropReset()}}function splitView(e){winSize();var t=winSize();if(W=t.W,H=t.H,"1"==e)if(H>=W)var e="2";else var e="3";"2"==e?(document.getElementById("ed_refresh").style.display="block",document.getElementById("leftbox").style.height="50%",document.getElementById("leftbox").style.width="100%",0==config.rzw_wysiwyg||xinha_editors.inputBox.sizeEditor("","100%",!0,!0),document.getElementById("rightbox").style.display="block",document.getElementById("rightbox").style.height="50%",document.getElementById("rightbox").style.width="100%",document.getElementById("rightbox").style.borderTop="1px solid #333",document.getElementById("sourceframe").style.width="100%",document.getElementById("sourceframe").style.height="100%",split=1,htmlMode("textmode")):"3"==e?(document.getElementById("ed_refresh").style.display="block",document.getElementById("leftbox").style.width="50%",document.getElementById("leftbox").style.height="100%",document.getElementById("leftbox").style.cssFloat="left",0==config.rzw_wysiwyg||xinha_editors.inputBox.sizeEditor("100%","100%",!0,!0),document.getElementById("rightbox").style.display="block",document.getElementById("rightbox").style.width="50%",document.getElementById("rightbox").style.height="100%",document.getElementById("rightbox").style.cssFloat="right",document.getElementById("sourceframe").style.height="100%",document.getElementById("sourceframe").style.width="100%",split=1,htmlMode("textmode")):(document.getElementById("ed_refresh").style.display="none",document.getElementById("leftbox").style.height="100%",document.getElementById("leftbox").style.width="100%",document.getElementById("leftbox").style.cssFloat="none",0==config.rzw_wysiwyg||xinha_editors.inputBox.sizeEditor("100%","100%",!0,!0),document.getElementById("rightbox").style.display="none",document.getElementById("rightbox").style.cssFloat="none",document.getElementById("rightbox").style.border="none",document.getElementById("rightbox").style.height="100%",document.getElementById("rightbox").style.width="100%",split=0,htmlMode("wysiwyg"))}function tapCheck(e){1==touchmoveCheck||setTimeout("RYU.helpOpt("+e+")",300)}function deviceSizer(e){var t=document.getElementById("os_select");if(document.getElementById("phone_profile").checked)var n=1;else var n=0;"custom_width"==e.id&&(1==n?e.value="480":e.value="1024"),"custom_height"==e.id&&(1==n?e.value="320":5==t.selectedIndex?e.value="600":e.value="768"),"custom_status"==e.id&&(0==t.selectedIndex||1==t.selectedIndex?e.value="20":2==t.selectedIndex?e.value="25":3==t.selectedIndex?1==n?e.value="25":e.value="50":6==t.selectedIndex||7==t.selectedIndex?e.value="30":(5==t.selectedIndex||4==t.selectedIndex)&&(e.value="0")),"custom_navbar"==e.id&&(0==t.selectedIndex?e.value="44":1==t.selectedIndex?1==n?e.value="44":e.value="76":2==t.selectedIndex?e.value="40":3==t.selectedIndex?1==n?e.value="40":e.value="50":4==t.selectedIndex||5==t.selectedIndex?e.value="0":6==t.selectedIndex?e.value="58":7==t.selectedIndex&&(e.value="54")),"custom_tabbar"==e.id&&(0==t.selectedIndex||1==t.selectedIndex||5==t.selectedIndex?1==n?e.value="49":e.value="0":4==t.selectedIndex?e.value="68":e.value="0")}function popOut(e){1==e?(autoAdjust=0,document.getElementById("skin").href="ryuzinewriter/skins/fillview/skin.css",document.getElementById("device").className="fillview landscape desktop none appview noskin",zoomFactor(1)):(autoAdjust=1,adjustBox(),switchDevice(document.getElementById("device_selector").options[document.getElementById("device_selector").selectedIndex].value),RYU.dSim(1),document.getElementById("view_style").value=dView,document.getElementById("view_opt_label").innerHTML=document.getElementById("view_style").options[document.getElementById("view_style").selectedIndex].innerHTML)}function viewDrop(e){0==e?RYU.dView(0):1==e?RYU.dView(1):2==e?RYU.dSim(1):3==e?RYU.dSim(0):(RYU.dSim(0),RYU.popOut(1))}function add2ConfigList(e,t,n){if(0==e)var a=bmarkData,o=document.getElementById("config_bookmarks_list"),d="Text",l="Link",i="bmark",s="bmarkurl";else if(1==e)var a=rackData,o=document.getElementById("config_catalogs_list"),d="Text",l="File",i="cat",s="caturl";else if(2==e)var a=mediaType,o=document.getElementById("edit_mediatypes_list"),d="Media",l="Label",i="media",s="button";else if(3==e)var a=rackCategory,o=document.getElementById("edit_categories_list"),d="Category",l="",i="rcat",s="rcatNO";if(1==t||a.push([[],[]]),1==n)for(var c=o.getElementsByTagName("li"),r=0;r<a.length;r++)a[r][0]=c[r].getElementsByTagName("input")[0].value,3==e||(a[r][1]=c[r].getElementsByTagName("input")[1].value);for(var m="",u=0;u<a.length;u++)m+='<li><div class="left">',3==e?(m=m+'<span style="width:auto;">'+d+" "+u+':</span><input id="'+i+u+'" type="text" value="'+a[u][0]+'" />',
'	<span style="display:none;">'+l+':</span><input id="'+s+u+'" type="text" value="'+a[u][1]+'" style="display:none;"/>'):m=m+"	<span>"+d+':</span><input id="'+i+u+'" type="text" value="'+a[u][0]+'" /><br />	<span>'+l+':</span><input id="'+s+u+'" type="text" value="'+a[u][1]+'" />',m=m+'</div><input type="button" value="Delete" class="left" onclick="RYU.delConfigList('+e+","+u+');" /></li>';if(0==e)o.innerHTML=m,bmarkData=a;else if(1==e)o.innerHTML=m,rackData=a;else if(2==e){o.innerHTML=m,mediaType=a;for(var m="",g=0;g<mediaType.length;g++)m=m+"<li><strong>Media Type:</strong> "+mediaType[g][0]+'</li><li><strong>Button Sample:</strong><div class="button type2" style="display:table;"><p style="padding-right:10px;">'+mediaType[g][1]+"</p></div></li>";document.getElementById("config_mediatypes_list").innerHTML=m,buildRackInput()}else 3==e?(o.innerHTML=m,rackCategory=a,buildRackInput()):alert(""+RYU._lc("Error: Unknown list."))}function delConfigList(e,t){confirm(""+RYU._lc("Delete Entry")+" "+t+"? "+RYU._lc("This cannot be undone!"))&&deleteConfigList(e,t)}function deleteConfigList(e,t){0==e?bmarkData.splice(t,1):1==e?rackData.splice(t,1):2==e?mediaType.splice(t,1):3==e&&rackCategory.splice(t,1),add2ConfigList(e,1)}function getCheckedValue(e,t){for(var n=document.forms[""+e].elements[t],a=0;a<n.length;a++)if(n[a].checked)return n[a].value;return""}function resetConfigFile(){bmarkData.length=0,mediaType.length=0,rackCategory.length=0,rackData.length=0,initBmarkData(),initMediaTypes(),initRackCategories(),initRackData(),add2ConfigList(0,1),add2ConfigList(1,1),add2ConfigList(2,1),add2ConfigList(3,1),document.getElementsByName("binding")[0].checked=!0,document.getElementsByName("fillpad")[0].checked=!0,document.getElementsByName("zoomable")[1].checked=!0,document.getElementById("maxzoom").value="5",document.getElementsByName("pgslide")[0].checked=!0,document.getElementsByName("viewani")[0].checked=!0;for(var e=document.getElementById("config_addons_list").getElementsByTagName("input"),t=0;t<e.length;t++)cut_selected_addon(e[t]);document.getElementById("language").selectedIndex=3,document.getElementsByName("swapThemes")[0].checked=!0,document.getElementById("deskTheme").value="",document.getElementById("winTheme").value="",document.getElementById("macTheme").value="",document.getElementById("nixTheme").value="",document.getElementById("iOSTheme").value="",document.getElementById("andTheme").value="",document.getElementById("bbtTheme").value="",document.getElementById("wp7Theme").value="",document.getElementById("w8mTheme").value="",document.getElementById("rackTitle").value="Newsstand",document.getElementById("autopromo").value=5,document.getElementById("maxpromos").value=5,document.getElementById("rackItems").value=10,document.getElementById("linkOpens").value=0,document.getElementById("splash_ad").value=0,document.getElementById("box_ad").value=0,document.getElementById("banner_ad").value=0}function buildConfigFile(){if(document.getElementById("minify").checked){for(var e='var RYU = RYU || {};RYU.config = {language:"'+document.getElementById("language").value+'",binding:"'+getCheckedValue("config_form","binding")+'",pgsize:'+getCheckedValue("config_form","fillpad")+",zoomable:"+getCheckedValue("config_form","zoomable")+",maxzoom:"+document.getElementById("maxzoom").value+",pgslide:"+getCheckedValue("config_form","pgslide")+",viewani:"+getCheckedValue("config_form","viewani")+",bmarkData:[",t=document.getElementById("config_bookmarks_list").getElementsByTagName("li"),n=0;n<t.length;n++)e+='["'+unescape(document.getElementById("bmark"+n).value)+'","'+unescape(document.getElementById("bmarkurl"+n).value)+'"]',e+=n==t.length-1?"":",";e+='],rackTitle:"'+document.getElementById("rackTitle").value+'",rackItems:'+document.getElementById("rackItems").value+",linkOpens:"+document.getElementById("linkOpens").value+",rackData:[";for(var a=document.getElementById("config_catalogs_list").getElementsByTagName("li"),n=0;n<a.length;n++){if(0==n&&"autocat0"==unescape(document.getElementById("caturl0").value)){e+='["Catalog1","autocat0","'+current_catalog+'"]';break}e+='["'+unescape(document.getElementById("cat"+n).value)+'","'+unescape(document.getElementById("caturl"+n).value)+'"]',e+=n==a.length-1?"":","}e+="],mediaType:[";for(var o=document.getElementById("edit_mediatypes_list").getElementsByTagName("li"),n=0;n<o.length;n++)e+='["'+unescape(document.getElementById("media"+n).value)+'"],["'+unescape(document.getElementById("button"+n).value)+'"]',e+=n==o.length-1?"":",";e+="],swapThemes:"+getCheckedValue("config_form","swapThemes")+',deskTheme:"'+document.getElementById("deskTheme").value+'",winTheme:"'+document.getElementById("winTheme").value+'",macTheme:"'+document.getElementById("macTheme").value+'",nixTheme:"'+document.getElementById("nixTheme").value+'",iOSTheme:"'+document.getElementById("iOSTheme").value+'",andTheme:"'+document.getElementById("andTheme").value+'",wp7Theme:"'+document.getElementById("wp7Theme").value+'",w8mTheme:"'+document.getElementById("w8mTheme").value+'",bbtTheme:"'+document.getElementById("bbtTheme").value+'",splashad:'+document.getElementById("splash_ad").value+",boxad:"+document.getElementById("box_ad").value+",appbanner:"+document.getElementById("banner_ad").value+",autopromo:"+document.getElementById("autopromo").value+",maxpromos:"+document.getElementById("maxpromos").value+",AddOns:[";for(var d=0;d<selected_addons.length;d++)e+='"'+selected_addons[d]+'"',e+=d<selected_addons.length-1?",":"";e+="]};"}else{for(var e='/*	RYUZINE READER/RACK CONFIG FILE\n	Version 1.0\n\n	Load this file before ryuzine.js or ryuzine.rack.js\n*/\n\nvar RYU = RYU || {};\nRYU.config = {\n	/* 	LOCALIZATION SETTINGS	*/\n	language	:	"'+document.getElementById("language").value+'",		// ISO 639-1 language code (ignored is "localize" add-on is not loaded)\n	/*	RYUZINE READER/RACK		*/\n	binding		:	"'+getCheckedValue("config_form","binding")+'",		// Book Binding "spine" side\n	pgsize		:	'+getCheckedValue("config_form","fillpad")+",			// 0 = square | 1 = tall | 2 = fill all\n	zoomable   	:	"+getCheckedValue("config_form","zoomable")+",			// User Scale-Able: 1 = yes | 2 = no\n	maxzoom		:	"+document.getElementById("maxzoom").value+",		// Maximum Zoom Factor (if zooming is enabled)\n	pgslide		:	"+getCheckedValue("config_form","pgslide")+",			// 0 = on | 1 = off	: Page Slider navigation on load\n	viewani		:	"+getCheckedValue("config_form","viewani")+',			// 0 = on | 1 = off : Animate Changing Views\n	bmarkData	:	[			// Default preset Reader bookmarks : ["label","URL"]\n',t=document.getElementById("config_bookmarks_list").getElementsByTagName("li"),n=0;n<t.length;n++)e+='		["'+unescape(document.getElementById("bmark"+n).value)+'","'+unescape(document.getElementById("bmarkurl"+n).value)+'"]',e+=n==t.length-1?"\n":",\n";e+='	],\n	/*	RYUZINE RACK SETTINGS	*/\n	rackTitle	:	"'+document.getElementById("rackTitle").value+'",			// Optional name to insert as rack.htm title\n	rackItems	:	'+document.getElementById("rackItems").value+",			// 0 = default | value = number of items per page (5, 10, 20, 50, 100)\n	linkOpens	:	"+document.getElementById("linkOpens").value+',			// 0 = default | 1 = _self | 2 = _blank | 3 = _parent | 4 = _top | 5 = inrack | "id" = window id\n	rackData	:	[			// Data Catalog in /data/cat/ folder : ["Label","filename.htm"]\n';for(var a=document.getElementById("config_catalogs_list").getElementsByTagName("li"),n=0;n<a.length;n++){if(0==n&&"autocat0"==unescape(document.getElementById("caturl0").value)){e+='		["Catalog1","autocat0","'+current_catalog+'"]\n';break}e+='		["'+unescape(document.getElementById("cat"+n).value)+'","'+unescape(document.getElementById("caturl"+n).value)+'"]',e+=n==a.length-1?"\n":",\n"}e+='	],\n	mediaType	:	[			// Media Types : ["type","label"]\n';for(var o=document.getElementById("edit_mediatypes_list").getElementsByTagName("li"),n=0;n<o.length;n++)e+='		["'+unescape(document.getElementById("media"+n).value)+'","'+unescape(document.getElementById("button"+n).value)+'"]',e+=n==o.length-1?"\n":",\n";e+="	],\n	/* 	THEME SETTINGS			*/\n	swapThemes	:	"+getCheckedValue("config_form","swapThemes")+',				// 0 = no | 1 = yes : Swap themes based on device type\n	deskTheme	:	"'+document.getElementById("deskTheme").value+'",		// Fallback theme for unspecified desktop/laptop OS\n	winTheme 	:	"'+document.getElementById("winTheme").value+'",		// General Windows desktop/laptop systems\n	macTheme	:	"'+document.getElementById("macTheme").value+'",	// Macintosh Systems\n	nixTheme   	:	"'+document.getElementById("nixTheme").value+'",				// Linux Systems\n	iOSTheme   	:	"'+document.getElementById("iOSTheme").value+'",	// iOS Devices (iPad, iPhone, iPod Touch)\n	andTheme	:	"'+document.getElementById("andTheme").value+'",		// Android Phones and Tablets\n	wp7Theme	:	"'+document.getElementById("wp7Theme").value+'",		// Windows Phone 7 devices\n	w8mTheme	:	"'+document.getElementById("w8mTheme").value+'",		// Windows 8.x desktop/laptops in "Metro" mode\n	bbtTheme   	:	"'+document.getElementById("bbtTheme").value+'",				// BlackBerry Tablet (legacy device)\n	/* 	INTEGRATED ADVERTISING 	*/\n	splashad   	:	'+document.getElementById("splash_ad").value+",			// 0 = no splash ad | value = display time for ad in seconds\n	boxad		:	"+document.getElementById("box_ad").value+',			// 0 = no box ad	| value = display time in seconds | "x" = persistent (user must close)\n	appbanner	:	'+document.getElementById("banner_ad").value+',			// 0 = no banner ad	| value = display time in seconds | "x" = persistent (user must close)\n	autopromo	:	'+document.getElementById("autopromo").value+",			// 0 = off | value = animation interval in seconds (Ryuzine Rack)\n	maxpromos	:	"+document.getElementById("maxpromos").value+",			// Maximum number of promotions in carousel	(Ryuzine Rack)\n	AddOns		: [\n";for(var d=0;d<selected_addons.length;d++)e+='	"'+selected_addons[d]+'"',e+=d<selected_addons.length-1?",\n":"\n";e+="	]\n};"}document.getElementById("configBox").value=e,slideSpace(2),swapAppTab("export","export_tab2","export_section2")}function initRack(){cat_masthead="",rackBuilder=[[]],rackBuilder[0][0]="ID",rackBuilder[0][1]="Date",rackBuilder[0][2]="Title",rackBuilder[0][3]="Description",rackBuilder[0][4]="Category",rackBuilder[0][5]="URL",rackBuilder[0][6]="Type",rackBuilder[0][7]="Thumbnail",rackBuilder[0][8]="Promotion"}function newRackCat(){confirm("New blank table? All current data will be lost!")&&(rackBuilder.length=0,initRack(),addRackData(1)),current_catalog=""}function addRackRows(e){if(null!=e)for(var t=0;e>t;t++)addRackData()}function addRackData(e){1==e||getRackData();var t=rackBuilder.length;rackBuilder[t],rackBuilder[t]=[],rackBuilder[t][0]=t,rackBuilder[t][1]="",rackBuilder[t][2]="",rackBuilder[t][3]="",rackBuilder[t][4]="",rackBuilder[t][5]="",rackBuilder[t][6]="",rackBuilder[t][7]="",rackBuilder[t][8]="",buildRackInput()}function delRackData(e){if(confirm("Delete Row "+e+"? This cannot be undone!")){rackBuilder.splice(e,1);for(var t=0;t<rackBuilder.length;t++)0==t||(rackBuilder[t][0]=t);buildRackInput()}}function getRackData(e){for(var t=document.getElementById("rackdata").getElementsByTagName("tr"),n=0;n<rackBuilder.length;n++){if(0==n){var a=t[n].getElementsByTagName("th");rackBuilder[n][0]=a[0].getElementsByTagName("input")[0].value,rackBuilder[n][3]=a[3].getElementsByTagName("input")[0].value,rackBuilder[n][4]=a[4].getElementsByTagName("input")[0].value,rackBuilder[n][6]=a[6].getElementsByTagName("input")[0].value}else{var a=t[n].getElementsByTagName("td");rackBuilder[n][0]=a[0].getElementsByTagName("p")[0].innerHTML,rackBuilder[n][3]=a[3].getElementsByTagName("textarea")[0].value,rackBuilder[n][4]=a[4].getElementsByTagName("select")[0].value,rackBuilder[n][6]=a[6].getElementsByTagName("select")[0].value}rackBuilder[n][1]=a[1].getElementsByTagName("input")[0].value,rackBuilder[n][2]=a[2].getElementsByTagName("input")[0].value,rackBuilder[n][5]=a[5].getElementsByTagName("input")[0].value,rackBuilder[n][7]=a[7].getElementsByTagName("input")[0].value,rackBuilder[n][8]=a[8].getElementsByTagName("input")[0].value}1==e&&buildRackData()}function buildRackInput(){var e="";e=e+'<thead>\n<tr>\n<th class="nosort end"><input type="text" value="'+rackBuilder[0][0]+'" /></th>\n<th><input type="text" value="'+rackBuilder[0][1]+'" /></th>\n<th><input type="text" value="'+rackBuilder[0][2]+'" /></th>\n<th class="nosort"><input type="text" value="'+rackBuilder[0][3]+'" /></th>\n<th><input type="text" value="'+rackBuilder[0][4]+'"/></th>\n<th class="nosort"><input type="text" value="'+rackBuilder[0][5]+'" /></th>\n<th><input type="text" value="'+rackBuilder[0][6]+'" /></th>\n<th class="nosort"><input type="text" value="'+rackBuilder[0][7]+'" /></th>\n<th class="nosort"><input type="text" value="'+rackBuilder[0][8]+'" /></th>\n<th class="unstyle end"></th>\n</tr>\n</thead>\n<tbody>\n';for(var t=1;t<rackBuilder.length;t++){if(t==rackBuilder.length-1)var n='id="lastcell" ';else var n="";e=e+'<tr>\n<td class="end"><p class="noedit">'+t+'</p></td>\n<td><input type="text" value="'+rackBuilder[t][1]+'" /></td>\n<td><input type="text" value="'+rackBuilder[t][2]+'" /></td>\n<td><textarea>'+rackBuilder[t][3]+"</textarea></td>\n<td><select>";for(var a=0;a<rackCategory.length;a++){if(rackBuilder[t][4]==rackCategory[a][0])var o="selected";else var o="";e=e+'<option value="'+rackCategory[a][0]+'" '+o+">"+rackCategory[a][0]+"</option>\n"}e=e+'</select></td>\n<td><input type="text" value="'+rackBuilder[t][5]+'" /></td>\n<td><select>\n';for(var d=0;d<mediaType.length;d++){if(rackBuilder[t][6]==mediaType[d][0])var o="selected";else var o="";e=e+'<option value="'+mediaType[d][0]+'" '+o+">"+mediaType[d][0]+"</option>\n"}e=e+'</select></td>\n<td><input type="text" value="'+rackBuilder[t][7]+'" /></td>\n<td><input type="text" value="'+rackBuilder[t][8]+'" '+n+'/></td>\n<td class="unstyle end"><div class="delete" onclick="RYU.delRackData('+t+');"></div></td>\n</tr>\n'}var e=e+"</tbody>\n";document.getElementById("rackdata").innerHTML=e}function buildRackTable(){var e='<table cellpadding="5" cellspacing="0" border="1"><tr><td><strong>Masthead</strong> (optional):</td><td title="masthead">';e+=document.getElementById("masthead")?document.getElementById("masthead").value:cat_masthead,e+='</td></tr></table><p></p>\n<table cellpadding="0" cellspacing="0" border="1" title="table" class="sortable"><thead>\n<tr>\n<th class="nosort">'+rackBuilder[0][0]+'"</th>\n<th>'+rackBuilder[0][1]+"</th>\n<th>"+rackBuilder[0][2]+'</th>\n<th class="nosort">'+rackBuilder[0][3]+"</th>\n<th>"+rackBuilder[0][4]+'</th>\n<th class="nosort">'+rackBuilder[0][5]+"</th>\n<th>"+rackBuilder[0][6]+'</th>\n<th class="nosort">'+rackBuilder[0][7]+'</th>\n<th class="nosort">'+rackBuilder[0][8]+"</th>\n</tr>\n</thead>\n<tbody>\n";for(var t=1;t<rackBuilder.length;t++)e=e+"<tr>\n<td>"+t+"</td>\n<td>"+rackBuilder[t][1]+"</td>\n<td>"+rackBuilder[t][2]+"</td>\n<td>"+rackBuilder[t][3]+"</td>\n<td>"+rackBuilder[t][4]+"</td>\n<td>"+rackBuilder[t][5]+"</td>\n<td>"+rackBuilder[t][6]+"</td>\n<td>"+rackBuilder[t][7]+"</td>\n<td>"+rackBuilder[t][8]+"</td>\n</tr>\n";var e=e+"</tbody>\n</table>\n";return e}function buildRackData(){rack_html='<!DOCTYPE html>\n<html>\n<head>\n<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />\n<title>Ryuzine Rack Data</title>\n</head>\n<body>\n'+buildRackTable()+"</body>\n</html>\n",document.getElementById("dataBox").value=rack_html,slideSpace(2),swapAppTab("export","export_tab3","export_section3")}function cat2data(e){if(null==e||""==e)alert(""+RYU._lc("You must enter a catalog file name"));else if(current_catalog=e.replace(".htm",""),e.match(/http:/)||(e="data/"+e),void 0==document.getElementById("loadbox")){var t=document.createElement("iframe");t.setAttribute("id","loadbox"),t.setAttribute("style","display:none;"),t.src=e,t.setAttribute("onload","RYU.loadRackData();"),document.getElementsByTagName("body")[0].appendChild(t)}else document.getElementById("loadbox").src=e}function iframeRef(e){return e.contentWindow?e.contentWindow.document:e.contentDocument}function loadRackData(){var e=iframeRef(document.getElementById("loadbox"));if("masthead"==!e.getElementsByTagName("table")[0].getElementsByTagName("td")[1].title||"table"==!e.getElementsByTagName("table")[1].title)return void alert(""+RYU._lc("This is not a valid catalog file."));document.getElementById("masthead")?(document.getElementById("masthead").value=e.getElementsByTagName("table")[0].getElementsByTagName("td")[1].innerHTML,cat_masthead=document.getElementById("masthead").value):cat_masthead=e.getElementsByTagName("table")[0].getElementsByTagName("td")[1].innerHTML;var t=e.getElementsByTagName("table")[1].getElementsByTagName("tr");rackBuilder.length=0,rackBuilder=[];for(var n=0;n<t.length;n++)if(rackBuilder[n]=[],0==n)for(var a=t[n].getElementsByTagName("th"),o=0;o<a.length;o++)rackBuilder[n][o]=a[o].innerHTML;else for(var a=t[n].getElementsByTagName("td"),o=0;o<a.length;o++){if(4==o){for(var d=a[o].innerHTML,l=0,i=0;i<rackCategory.length;i++)d.toLowerCase()==rackCategory[i][0].toLowerCase()&&(d!=rackCategory[i][0]&&(a[o].innerHTML=rackCategory[i][0]),l=1);0==l&&(rackCategory.push([[],[]]),rackCategory[rackCategory.length-1][0]=d,rackCategory[rackCategory.length-1][1]="",RYU.add2ConfigList(3,1,0))}if(6==o){for(var d=a[o].innerHTML,l=0,s=0;s<mediaType.length;s++)d.toLowerCase()==mediaType[s][0].toLowerCase()&&(d!=mediaType[s][0]&&(a[o].innerHTML=mediaType[s][0]),l=1);0==l&&(mediaType.push([[],[]]),mediaType[mediaType.length-1][0]=d,mediaType[mediaType.length-1][1]=d,RYU.add2ConfigList(2,1,0))}rackBuilder[n][o]=a[o].innerHTML}buildRackInput()}function previewRack(){""==current_catalog&&(current_catalog=prompt("Folder name where cover art is kept for this catalog:")),document.getElementById("config_catalogs_list").innerHTML="",deleteConfigList(1,1),document.getElementById("cat0").value="Catalog 1",document.getElementById("caturl0").value="autocat0",document.getElementById("configBox").value="",document.getElementById("magtitle").value="RyuzineRack",document.getElementById("configit2").checked=!0,RYU.outputOptions(),doc_converted=5,RYU.getRackData(1),RYU.loadTemplate(5),RYU.clearSimulator(),RYU.refreshSrc(),RYU.reWrite(),RYU.slideSpace(3)}function xpandIFRAME(e){var t=iframeRef(e),n=t.getElementsByTagName("html")[0].offsetHeight;e.style.height=n+"px"}function issueStyles(e){null==e&&(e="");var t='/* Styles for THIS Issue (not used by "Plain" view) */\n.section_head, .page_box { background: #fff;}\n\n'+e+"\n@media screen {\n\n}\n/*====================*/\n/* Widescreen Monitor */\n@media only screen and (min-width: 1600px) {\n\n}\n\n/*==============================================================*/\n/* Widescreen Monitor (High Density) */\n@media only screen and (min-width: 1600px) and (-webkit-min-device-pixel-ratio: 2),\nonly screen and (min-width: 1600px) and (min--moz-device-pixel-ratio: 2),\nonly screen and (min-width:1600px) and (-o-min-device-pixel-ratio: 2/1),\nonly screen and (min-width:1600px) and (min-device-pixel-ratio: 2) {\n\n}\n\n/*===================*/\n/* iPad in Landscape */\n@media only screen and (min-width: 1024px) and (max-width: 1599px)  {\n\n}\n\n/*===================================================*/\n/* iPad Retina and other hi-res tablets in Landscape */\n@media only screen and (min-width: 1024px) and (max-width: 1599px) and (-webkit-min-device-pixel-ratio : 2.0),\nonly screen and (min-width: 1024px) and (max-width: 1599px) and (min--moz-device-pixel-ratio: 2.0),\nonly screen and (min-width: 1024px) and (max-width: 1599px) and (-o-min-device-pixel-ration: 2/1),\nonly screen and (min-width: 1024px) and (max-width: 1599px) and (min-device-pixel-ratio : 2.0) {\n\n}\n\n/*================================*/\n/* Desktop Screen 1280 to 1600 px */\n@media only screen and (min-width: 1280px) and (max-width: 1599px) and (min-height: 800px) {\n\n}\n\n/*==============================================================*/\n/* Desktop Screen (High Density) */\n@media only screen and (min-width: 1280px) and (max-width: 1599px) and (min-height: 800px) and (-webkit-min-device-pixel-ratio: 2),\nonly only screen and (min-width: 1280px) and (max-width: 1599px) and (min-height: 800px) and (min--moz-device-pixel-ratio: 2),\nonly only screen and (min-width: 1280px) and (max-width: 1599px) and (min-height: 800px) and (-o-min-device-pixel-ratio: 2/1),\nonly only screen and (min-width: 1280px) and (max-width: 1599px) and (min-height: 800px) and (min-device-pixel-ratio: 2) {\n\n}\n\n/*===================================*/\n/* iPad + Android Tablet in Portrait */\n@media only screen and (min-width: 768px) and (max-width: 1023px) {\n\n}\n\n/*==============================================================*/\n/* iPad Retina + Hi-Res Other Tablet in Portrait */\n@media only screen and (min-width: 768px) and (max-width: 1023px) and (-webkit-min-device-pixel-ratio : 2.0),\nonly screen and (min-width: 768px) and (max-width: 1023px) and (min--moz-device-pixel-ration: 2),\nonly screen and (min-width: 768px) and (max-width: 1023px) and (-o-min-device-pixel-ratio: 2/1),\nonly screen and (min-width: 768px) and (max-width: 1023px) and (min-device-pixel-ratio: 2) {\n\n}\n\n/*==============================================================*/\n/* Android HVGA and WVGA in Landscape */\n@media only screen and (min-width: 600px) and (max-width: 767px) {\n\n}\n\n/*==============================================================*/\n/* Android Landscape (High Density) */\n@media only screen and (min-width: 600px) and (max-width: 767px) and (-webkit-min-device-pixel-ratio : 2.0),\nonly screen and (min-width: 600px) and (max-width: 767px) and (min--moz-device-pixel-ration: 2),\nonly screen and (min-width: 600px) and (max-width: 767px) and (-o-min-device-pixel-ratio: 2/1),\nonly screen and (min-width: 600px) and (max-width: 767px) and (min-device-pixel-ratio: 2) {\n\n}\n\n/*==============================================================*/\n/* iPhone + iPod Touch + Android Phone in Landscape */\n@media only screen and (min-width: 480px) and (max-width: 599px),\nonly screen and(min-width:600px) and (max-width:767px) and (max-height:480px) {\n\n}\n\n/*==============================================================*/\n/* iPhone + iPod Touch + Android Phone in Landscape (High Density) */\n@media only screen and (min-width: 480px) and (max-width: 599px) and (-webkit-min-device-pixel-ratio : 2.0),\nonly screen and (min-width: 480px) and (max-width: 599px) and (min--moz-device-pixel-ration: 2),\nonly screen and (min-width: 480px) and (max-width: 599px) and (-o-min-device-pixel-ratio: 2/1),\nonly screen and (min-width: 480px) and (max-width: 599px) and (min-device-pixel-ratio: 2) {\n\n}\n\n/*==============================================================*/\n/* iPhone + iPod Touch + Android Portrait */\n@media only screen and (max-width: 479px) {\n\n\n}\n\n/*==============================================================*/\n/* iPhone Retina + Android (High Density) Portrait */\n@media only screen and (max-width: 479px) and (-webkit-min-device-pixel-ratio : 2.0),\nonly screen and (max-width: 479px) and (min--moz-device-pixel-ration: 2),\nonly screen and (max-width: 479px) and (-o-min-device-pixel-ratio: 2/1),\nonly screen and (max-width: 479px) and (min-device-pixel-ratio: 2) {\n\n}\n\n}\n";return t}function dynTheme(){if("Android"==device.Platform)var e=andTheme;else if("iOS"==device.Platform)var e=iOSTheme;else if("WP7"==device.Platform)var e=wp7Theme;else if("IE"==device.Platform&&1==device.metro)if(""!=w8mTheme)var e=w8mTheme;else if(""!=winTheme[0])var e=winTheme;else var e=deskTheme;else if("Windows"==device.OS&&""!=winTheme)var e=winTheme;else if("Mac"==device.OS&&""!=macTheme)var e=macTheme;else if("Linux"==device.OS&&""!=nixTheme)var e=nixTheme;else var e=deskTheme;return e}function themeToggle(e){if(null!=e&&(config.rzw_themeset=e),1==config.rzw_themeset){if(0!=swapThemes){var t=dynTheme();if(""==t||null==t)if(""!=defaultTheme&&null!=defaultTheme)var n=defaultTheme;else var n="";else var n=""+baseurl+"ryuzinewriter/theme/"+t+"/writer.css";document.getElementById("ui_theme").href=n}else""!=defaultTheme&&null!=defaultTheme&&(document.getElementById("ui_theme").href=defaultTheme);document.getElementById("opt_rzw_themeset").className="opt-switch opt-on"}else null!=document.getElementById("ui_theme")&&(document.getElementById("ui_theme").href=defaultTheme),document.getElementById("opt_rzw_themeset").className="opt-switch opt-off";if(0!=config.rzw_themeset)var a=2;else var a=1;var o=window.setInterval(function(){document.getElementById("tcheck").clientWidth==a&&window.clearInterval(o)},30);setTimeout(function(){window.clearInterval(o)},2e3)}function stylesToggle(){1==config.rzw_styles?config.rzw_styles=0:config.rzw_styles=1,Set_Cookie("rzw_myStyles",""+config.rzw_styles),alert(""+RYU._lc("Change takes effect after reloading Ryuzine Writer"))}function scrollToggle(e){null!=e&&(config.nscroll=e),0==config.rzw_nscroll?document.getElementById("opt_rzw_nscroll").className="opt-switch opt-off":document.getElementById("opt_rzw_nscroll").className="opt-switch opt-on",setTimeout(function(){bookBinder()},1e3)}function iScrollToggle(e){null!=e&&(config.iscroll_iscroll=e),0==config.iscroll_iscroll?"undefined"!=typeof iScroll&&(scrollHolder=iScroll,iScroll=void 0,"undefined"!=typeof IScroll&&(IScroll=void 0,eDown=iDown)):"undefined"==typeof iScroll&&void 0!=scrollHolder&&("IScroll"in window?(iScroll=IScroll=scrollHolder,eDown="tap",scrollHolder=void 0):(iScroll=scrollHolder,scrollHolder=void 0)),setTimeout(function(){bookBinder()},1e3)}function zoomToggle(e){if(null!=e&&(config.zoompan=e),"ontouchstart"in document.documentElement||"FFM"==device.Platform||"WP7"==device.Platform)if(1==config.zoompan){if("WP7"==device.Platform)var t="width=device-width,height=device-height,";else{var t="";body.removeEventListener("touchstart",RYU.defaultPrevention(),!1),body.addEventListener("touchstart",RYU.restoreDefault(),!1)}if(document.getElementById("zoom").style.display="block",document.getElementById("zooming")){document.getElementsByTagName("head")[0].removeChild(document.getElementById("zooming"));var n=document.createElement("meta");n.setAttribute("name","viewport"),n.setAttribute("content",""+t+"initial-scale=1.0,minimum-scale=1.0,maximum-scale="+maxzoom+",user-scalable=yes"),n.setAttribute("id","zooming"),document.getElementsByTagName("head")[0].appendChild(n)}else{var n=document.createElement("meta");n.setAttribute("name","viewport"),n.setAttribute("content",""+t+"initial-scale=1.0,minimum-scale=1.0,maximum-scale="+maxzoom+",user-scalable=yes"),n.setAttribute("id","zooming"),document.getElementsByTagName("head")[0].appendChild(n)}document.getElementById("opt_rzw_zoompan").className="opt-switch opt-on",document.getElementById("opt_rzw_nscroll_label").parentNode.className=""}else{if("WP7"==device.Platform)var t="width=device-width,height=device-height,";else{var t="";body.addEventListener("touchstart",RYU.defaultPrevention())}if(document.getElementById("zoom").style.display="none",document.getElementById("zooming")){document.getElementsByTagName("head")[0].removeChild(document.getElementById("zooming"));var n=document.createElement("meta");n.setAttribute("name","viewport"),n.setAttribute("content",""+t+"initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no"),n.setAttribute("id","zooming"),document.getElementsByTagName("head")[0].appendChild(n)}else{var n=document.createElement("meta");n.setAttribute("name","viewport"),n.setAttribute("content",""+t+"initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no"),n.setAttribute("id","zooming"),document.getElementsByTagName("head")[0].appendChild(n)}document.getElementById("opt_rzw_zoompan").className="opt-switch opt-off",document.getElementById("opt_rzw_nscroll_label").parentNode.className="opt-disabled",1==config.nscroll&&(config.nscroll=0,scrollToggle(0))}}function Get_Cookie(e){var t=document.cookie.indexOf(e+"="),n=t+e.length+1;if(!t&&e!=document.cookie.substring(0,e.length))return null;if(-1==t)return null;var a=document.cookie.indexOf(";",n);return-1==a&&(a=document.cookie.length),unescape(document.cookie.substring(n,a))}function Set_Cookie(e,t,n,a,o,d){n="Sun, 01-Jan-2040 00:00:01 GMT",document.cookie=e+"="+escape(t)+(n?";expires="+n:"")+(a?";path="+a:"")+(o?";domain="+o:"")+(d?";secure":"")}function Delete_Cookie(e,t,n){Get_Cookie(e)&&(document.cookie=e+"="+(t?";path="+t:"")+(n?";domain="+n:"")+";expires=Thu, 01-Jan-70 00:00:01 GMT")}function storeMasterCookie(){Get_Cookie("MasterCookie")||Set_Cookie("MasterCookie","MasterCookie")}function storeIntelligentCookie(e,t){if(Get_Cookie("MasterCookie")){var n=Get_Cookie(e);if(!n||n!=t){Set_Cookie(e,t,expires_date);var n=Get_Cookie(e);n&&n==t||Delete_Cookie("MasterCookie")}}}function fileOps(e,t,n){if(e>4&&9>e){var a=document.getElementById("save_file_frame"),o=(a.contentWindow,a.contentDocument?a.contentDocument:a.contentWindow.document);o.getElementById("save_file_type").value=e}if(10==e)RYU.toggleDialog("loadrack",1),1==xfileman&&(document.getElementById("file_list").src="ryuzinewriter/php/scandir.php",setTimeout(function(){for(var e=document.getElementById("file_list").contentWindow.rackcats,t='<select id="chooser4">',n=0;n<e.length;n++)t=t+"<option>"+e[n]+"</option>";t+="</select>",document.getElementById("file_chooser4").innerHTML=t},300));else if(11==e)1==xfileman&&(document.getElementById("file_list").src="ryuzinewriter/php/scandir.php",setTimeout(function(){var e=document.getElementById("file_list").contentWindow.addons;if("string"==typeof t)install=[t];else{if(!Array.isArray(t))return;install=t}for(var a=install.length-1;a>-1;a--)for(var o=0;o<e.length;o++)install[a]==e[o]&&install.splice(a,1);for(var a=0;a<install.length;a++){var d=confirm('Allow "'+n+'" Writer add-on to install "'+install[a]+'" add-on for Ryuzine Reader and Rack?');if(1==d){if(document.getElementById("addon_installer"))document.getElementById("addon_installer").src="ryuzinewriter/php/install_addon.php";else{var l=document.createElement("iframe");l.setAttribute("id","addon_installer"),l.setAttribute("style","display:none;"),l.src="ryuzinewriter/php/install_addon.php",document.getElementById("lightbox").appendChild(l)}setTimeout(function(e,t){return function(){document.getElementById("addon_installer").contentWindow.document.getElementById("sender").value=e,document.getElementById("addon_installer").contentWindow.document.getElementById("package").value=t;var n=document.getElementById("addon_installer").contentWindow.document.getElementById("install_addon_form");n.submit()}}(n,install[a]),1e3)}}},500));else if(9==e)RYU.toggleDialog("package-options",1),document.getElementById("file_list").src="ryuzinewriter/php/scandir.php",setTimeout(function(){for(var e=document.getElementById("file_list").contentWindow.files,t=document.getElementById("file_list").contentWindow.configs,n=document.getElementById("file_list").contentWindow.styles,a=document.getElementById("file_list").contentWindow.rackcats,o=document.getElementById("file_list").contentWindow.fonts,d=document.getElementById("file_list").contentWindow.loose_fonts,l=document.getElementById("file_list").contentWindow.addons,i=document.getElementById("file_list").contentWindow.rackimages,s=document.getElementById("file_list").contentWindow.themes,c='Select File: <select id="packfile_drop">',r=0;r<e.length;r++)c=c+"<option>"+e[r]+"</option>";c+="</select>";for(var m='Select File: <select id="configfile_drop">',u=0;u<t.length;u++)m=m+"<option>"+t[u]+"</option>";m+="</select>";for(var g='Select File: <select id="cssfile_drop">',p=0;p<n.length;p++)g=g+"<option>"+n[p]+"</option>";g+="</select>",document.getElementById("add_file_drop").innerHTML=c,document.getElementById("add_config_drop").innerHTML=m,document.getElementById("add_css_drop").innerHTML=g,setSelectedIndex(document.getElementById("configfile_drop"),document.getElementById("configName").value),
setSelectedIndex(document.getElementById("cssfile_drop"),document.getElementById("editionName").value);for(var y="<table><tr>",h=0;h<a.length;h++)y+='<td><input type="checkbox" id="cat_'+a[h].replace(".htm","")+'"/> '+a[h]+"</td>",isEven(h)||(y+="</tr><tr>");y+="</tr></table>",document.getElementById("cats_list").innerHTML=y;for(var v="<table><tr>",r=0;r<o.length;r++)v+='<td><input type="checkbox" id="font_'+o[r]+'"/> '+o[r]+"</td>",isEven(r)||(v+="</tr><tr>");v+="</tr></table>",document.getElementById("fonts_list").innerHTML=v;for(var f="<table><tr>",r=0;r<d.length;r++)f+='<td><input type="checkbox" id="loose_font_'+d[r].replace(".","_")+'"/> '+d[r]+"</td>",isEven(r)||(f+="</tr><tr>");f+="</tr></table>",document.getElementById("loose_fonts_list").innerHTML=f;for(var _="<table><tr>",E=0;E<l.length;E++)_+='<td><input type="checkbox" id="add_'+l[E]+'"/> '+l[E]+"</td>",isEven(E)||(_+="</tr><tr>");_+="</tr></table>",document.getElementById("addon_list").innerHTML=_;for(var B="<table><tr>",h=0;h<i.length;h++)B+='<td><input type="checkbox" id="rackimg_'+i[h]+'"/> '+i[h]+"</td>",isEven(h)||(B+="</tr><tr>");B+="</tr></table>",document.getElementById("rackimg_list").innerHTML=B;for(var I="<table><tr>",E=0;E<s.length;E++)I+='<td><input type="checkbox" id="theme_'+s[E]+'"/> '+s[E]+"</td>",isEven(E)||(I+="</tr><tr>");I+="</tr></table>",document.getElementById("theme_list").innerHTML=I,RYU.syncPack2Opt()},300);else if(8==e)document.getElementById("savetype").innerHTML="Catalog",RYU.toggleDialog("save_file",1),filetype=e;else if(7==e)document.getElementById("savetype").innerHTML="Config",RYU.toggleDialog("save_file",1),filetype=e;else if(6==e)document.getElementById("savetype").innerHTML="CSS",RYU.toggleDialog("save_file",1),filetype=e;else if(5==e)document.getElementById("savetype").innerHTML="Ryuzine",RYU.toggleDialog("save_file",1),filetype=e;else if(4==e)RYU.toggleDialog("save_wip",1);else if(3==e)RYU.toggleDialog("loadpage",1),1==xfileman&&(document.getElementById("file_list").src="ryuzinewriter/php/scandir.php",setTimeout(function(){for(var e=document.getElementById("file_list").contentWindow.files,t='<select id="chooser">',n=0;n<e.length;n++)t=t+"<option>"+e[n]+"</option>";t+="</select>",document.getElementById("file_chooser").innerHTML=t},300));else if(2==e)RYU.toggleDialog("add-template",1);else if(1==e)if(1==config.rzw_filenew)RYU.clearEditor();else{var d=confirm("Clear current document from editor and open blank document? (Unsaved changes will be lost)");1==d&&(document.getElementById("magtitle").value="",document.getElementById("numpgs").value="2",document.getElementById("wcyes").checked=!1,document.getElementById("lbyes").checked=!1,document.getElementById("swbi").checked=!0,document.getElementById("urlbox").value="",document.getElementById("applogo").checked=!1,document.getElementById("hellogoodbye").checked=!1,document.getElementById("advert").checked=!1,document.getElementById("splashad").checked=!1,document.getElementById("copynote").value="",RYU.loadTemplate())}else if(12==e){getDocProps(),RYU.toggleDialog("doc-properties",1);var l=document.getElementById("doc_report");5==doc_converted?l.innerHTML="&gt; This is a Ryuzine Rack Newsstand document, NOT a publication.  Unless your are an advanced author editing this file is not recommended. Edit the Catalog File(s) with the RackBuilder Utility.":4==doc_converted?l.innerHTML="&gt; Incompatible positively ancient Ryuzine 0.9.5.x or earlier file.  Seriously, where did you get this file? Do you have a time machine!?":3==doc_converted?l.innerHTML='&gt; Converted from InDesign file exported for Dreamweaver. You should save this as a "wip" file.':2==doc_converted?l.innerHTML='&gt; Converted from an older Ryuzine file.  You should save this as a "wip" file or re-Build it.':1==doc_converted?l.innerHTML="1.0 compatible Ryuzine file":l.innerHTML="&gt; this document was not converted"}}function countChars(e,t){document.getElementById(""+t).innerHTML=document.getElementById(""+e).value.length}function submitPHPform(e){if("save_wip"==e)if(0==config.rzw_wysiwyg||"none"==document.getElementById("XinhaIFrame_inputBox").style.display)var t="textarea",n="inputBox",a="",o="";else var t="iframe",n="XinhaIFrame_inputBox",a="<!DOCTYPE html>\n<html>\n",o="\n</html>";else if("save_file"==e){var t="textarea",a="",o="";if(8==filetype)var n="dataBox";else if(7==filetype)var n="configBox";else if(6==filetype)var n="stylesBox";else{if(5!=filetype)return void alert(""+RYU._lc("Error: Unknown file type!"));var n="outputBox"}}if("iframe"==t)var d=document.getElementById(""+n).contentWindow.document.getElementsByTagName("html")[0].innerHTML;else var d=document.getElementById(""+n).value;var l=document.getElementById(e+"_frame"),i=(l.contentWindow,l.contentDocument?l.contentDocument:l.contentWindow.document),s=i.getElementById(e+"_form");i.getElementById(""+e+"content").value=a+d+o,"save_file"==e&&8==filetype&&(current_catalog=i.getElementsByName("save_file_name")[0].value),s.submit()}function setSelectedIndex(e,t){for(var n=0;n<document.getElementById("configfile_drop").options.length;n++)if(e.options[n].value==t)return void(e.options[n].selected=!0)}function buildPackage(){function e(){if(document.getElementById("zineadd").checked){if(t=1,document.getElementsByName("packfile_src")[1].checked)n=document.getElementById("packfile_drop").value,a="",o=document.getElementById("packfile_name").value;else{if(""==document.getElementById("outputBox").value||"Ryuzine File HTML code will be in this box."==document.getElementById("outputBox").value)return void alert(""+RYU._lc("HTML Export Box is empty!  Go to Editor, Build file, and then Package."));n=0,a=document.getElementById("outputBox").value,o=document.getElementById("packfile_name").value}document.getElementsByName("cssfile_src")[1].checked?""==document.getElementById("stylesBox")||"Custom Styles: Copy & Paste contents into your file thisissue.css"==document.getElementById("stylesBox")?(alert(""+RYU._lc("CSS Export Box is empty!  Using default thisissue.css file.")),m=0,u="",g=document.getElementById("cssfile_name").value):(m=1,u=document.getElementById("stylesBox").value,g=document.getElementById("cssfile_name").value):document.getElementsByName("cssfile_src")[2].checked?(m=document.getElementById("cssfile_drop").value,u="",g=document.getElementById("cssfile_name").value):(m=0,u="",g=document.getElementById("cssfile_name").value),l=document.getElementById("imagefolder_name").value}else t=0;if(document.getElementById("rackadd").checked){if(p=1,v="",document.getElementById("rackfile").checked&&(y="index.htm",o="issue.htm"),document.getElementsByName("catfile_src")[0].checked)h=0;else if(document.getElementsByName("catfile_src")[1].checked){if(""==document.getElementById("dataBox")||"RyuzineRack Data Catalog Code will be in this box."==document.getElementById("dataBox"))return void alert(""+RYU._lc("Data Export Box is empty!  Build a Catalog file or change the Package option."));h=1,v=document.getElementById("dataBox").value,f=document.getElementById("catfile_name").value}else h=2,v="",f="";T=document.getElementById("allrackimages").checked?1:0}else p=0,y="rack.htm",h=0,v="",f="catalog1.htm",T=0;if(document.getElementsByName("configfile_src")[1].checked?""==document.getElementById("configBox")||"// Custom Configuration File Javascript Code: //"==document.getElementById("configBox")?(alert(""+RYU._lc("Configuration Export Box is empty!  Using Default file.")),s=0,c="",r=document.getElementById("configfile_name").value):(s=1,c=document.getElementById("configBox").value,r=document.getElementById("configfile_name").value):document.getElementsByName("configfile_src")[2].checked?(s=document.getElementById("configfile_drop").value,c="",r=document.getElementById("configfile_name").value):(s=0,c="",r=document.getElementById("configfile_name").value),document.getElementsByName("packtype")[0].checked)(""!=opt_css||""!=opt_js||"test"==opt_config)&&(alert(""+RYU._lc("Some document Output Options are not compatible with this setting. The Output Options will now be adjusted and the Ryuzine File regenerated so it will work")),document.getElementById("custCSS").checked=!1,document.getElementById("custJS").checked=!1,document.getElementsByName("dTheme")[2].checked&&(document.getElementsByName("dTheme")[0].checked=!0),document.getElementsByName("configit")[0].checked=!0,document.getElementsByName("edition")[0].checked=!0,outputOptions(),RYU.clearSimulator(),RYU.refreshSrc(),RYU.reWrite(),i=0,b=0);else if(document.getElementsByName("packtype")[2].checked){if(document.getElementById("allfonts").checked)b=1;else{b=0;for(var e=0;e<fonts.length;e++)document.getElementById("font_"+fonts[e]).checked?C[e]=1:C[e]=0;for(var e=0;e<loose_fonts.length;e++)document.getElementById("loose_font_"+loose_fonts[e].replace(".","_")).checked?S[e]=1:S[e]=0}if(document.getElementById("alladdons").checked)k=1;else{k=0;for(var O=0;O<N.length;O++)document.getElementById("add_"+N[O]).checked?R[O]=1:R[O]=0}if(document.getElementById("allthemes").checked)x=1;else{x=0;for(var O=0;O<Y.length;O++)document.getElementById("theme_"+Y[O]).checked?U[O]=1:U[O]=0}document.getElementById("customJSadd").checked?(_=1,E=document.getElementById("customJSfile_name").value):(_=0,E=""),document.getElementById("customCSSadd").checked?(B=1,I=document.getElementById("customCSSfile_name").value):(B=0,I=""),w=document.getElementById("sourceadd").checked?1:0,i=document.getElementById("keepthumbs").checked?1:0}else document.getElementsByName("packtype")[1].checked?("test"==opt_config&&(alert(""+RYU._lc("Some document Output Options are not compatible with this setting. The Output Options will now be adjusted and the Ryuzine File regenerated so it will work")),document.getElementsByName("configit")[0].checked=!0,outputOptions(),RYU.clearSimulator(),RYU.refreshSrc(),RYU.reWrite()),b=1,k=1,x=1,i=0):alert(""+RYU._lc("Package type unknown!"));var A=document.getElementById("build_package_frame"),M=(A.contentWindow,A.contentDocument?A.contentDocument:A.contentWindow.document),P=M.getElementById("build_package_form");M.getElementById("mytitle").value=document.getElementById("pack_title").value,document.getElementsByName("packtype")[0].checked?M.getElementById("packtype").value=0:document.getElementsByName("packtype")[1].checked?M.getElementById("packtype").value=1:M.getElementById("packtype").value=2;var W=M.createElement("p");W.innerHTML="Building, Please wait....",M.getElementsByTagName("body")[0].appendChild(W),M.getElementById("zineadd").value=t,M.getElementById("packfile_src").value=n,M.getElementById("packfile_content").value=a,M.getElementById("packfile_name").value=o,M.getElementById("imagefile_src").value=d,M.getElementById("imagefolder_name").value=l,M.getElementById("keep_thumbs").value=i,M.getElementById("configfile_src").value=s,M.getElementById("configfile_content").value=c,M.getElementById("configfile_name").value=r,M.getElementById("cssfile_src").value=m,M.getElementById("cssfile_content").value=u,M.getElementById("cssfile_name").value=g,M.getElementById("rackadd").value=p,document.getElementById("rackfile").checked&&(M.getElementById("rackfile").value=1),M.getElementById("rackfile_name").value=y,M.getElementById("catfile_src").value=h,M.getElementById("catfile_content").value=v,M.getElementById("catfile_name").value=f,M.getElementById("allfonts").value=b,M.getElementById("alladdons").value=k,M.getElementById("allthemes").value=x,M.getElementById("allrackimages").value=T;for(var e=0;e<fonts.length;e++)M.getElementById("font_"+fonts[e]).value=C[e];for(var e=0;e<loose_fonts.length;e++)M.getElementById("loose_font_"+loose_fonts[e].replace(".","_")).value=S[e];for(var O=0;O<N.length;O++)M.getElementById("add_"+N[O]).value=R[O];for(var O=0;O<Y.length;O++)M.getElementById("theme_"+Y[O]).value=U[O];for(var j=0;j<H.length;j++)M.getElementById("rackimg_"+H[j]).value=L[j];for(var j=0;j<D.length;j++)M.getElementById("cat_"+D[j].replace(".htm","")).value=z[j];M.getElementById("customJSadd").value=_,M.getElementById("customJSfile_name").value=E,M.getElementById("customCSSadd").value=B,M.getElementById("customCSSfile_name").value=I,M.getElementById("sourceadd").value=w,document.getElementById("skip_zip").checked?M.getElementById("skip_zip").value=1:M.getElementById("skip_zip").value=0,document.getElementById("time_stamp").checked?M.getElementById("time_stamp").value=1:M.getElementById("time_stamp").value=0,P.submit()}var t=1,n=0,a="",o="index.htm",d=1,l="",i=0,s=0,c="",r="ryuzine.config.js",m=0,u="",g="thisissue.css",p=0,y="rack.htm",h=0,v="",f="catalog1.htm",_=0,E="",B=0,I="",w=0,b=1,k=0,x=0,T=1;document.getElementById("file_list").src="ryuzinewriter/php/scandir.php";var C=[],S=[],R=[],N=[],U=[],Y=[],z=[],D=[],L=[],H=[];setTimeout(function(){fonts=document.getElementById("file_list").contentWindow.fonts,loose_fonts=document.getElementById("file_list").contentWindow.loose_fonts,N=document.getElementById("file_list").contentWindow.addons,Y=document.getElementById("file_list").contentWindow.themes,H=document.getElementById("file_list").contentWindow.rackimages,D=document.getElementById("file_list").contentWindow.rackcats;for(var t=0;t<fonts.length;t++)document.getElementById("font_"+fonts[t]).checked?C[t]=1:C[t]=0;for(var t=0;t<loose_fonts.length;t++)document.getElementById("loose_font_"+loose_fonts[t].replace(".","_")).checked?S[t]=1:S[t]=0;for(var n=0;n<N.length;n++)document.getElementById("add_"+N[n]).checked?R[n]=1:R[n]=0;for(var n=0;n<Y.length;n++)document.getElementById("theme_"+Y[n]).checked?U[n]=1:U[n]=0;for(var a=0;a<H.length;a++)document.getElementById("rackimg_"+H[a]).checked?L[a]=1:L[a]=0;for(var a=0;a<D.length;a++)document.getElementById("cat_"+D[a].replace(".htm","")).checked?z[a]=1:z[a]=0;e()},300)}function syncPack2Opt(){if(splashTitle?document.getElementById("pack_title").value=splashTitle:document.getElementById("pack_title").value="Untitled",document.getElementsByName("configit")[0].checked||""!=document.getElementById("configName").value&&(document.getElementById("configfile_name").value=document.getElementById("configName").value),!document.getElementsByName("edition")[0].checked&&(""!=document.getElementById("editionName").value&&(document.getElementById("cssfile_name").value=document.getElementById("editionName").value),document.getElementsByName("edition")[1].checked)){for(var e=document.getElementById("cssfile_drop").getElementsByTagName("option"),t=0,n=0;n<e.length;n++)document.getElementById("editionName").value==e[n].value&&(t=1,document.getElementById("cssfile_drop").value=document.getElementById("editionName").value,document.getElementsByName("cssfile_src")[2].checked=!0,document.getElementById("add_css_drop").style.display="table-cell");0==t&&(alert(RYU._lc("The Custom Stylesheet file name given in the Output Format dialog does not appear to match any CSS files on the server. Resetting to Default.")),document.getElementsByName("edition")[0].checked=!0,document.getElementById("customFile").style.display="none",document.getElementsByName("cssfile_src")[0].checked=!0,document.getElementByid("add_css_drop").style.display="none",document.getElementById("cssfile_name").value="thisissue.css")}if(document.getElementById("file_list").src="ryuzinewriter/php/scandir.php",document.getElementById("alladdons").checked||setTimeout(function(){var e=document.getElementById("file_list").contentWindow.addons,t=document.getElementById("config_addons_list").getElementsByTagName("input");if(document.getElementsByName("configit")[2].checked){document.getElementsByName("configfile_src")[1].checked=!0,document.getElementById("add_config_drop").style.display="none";for(var n=0;n<e.length;n++){document.getElementById("add_"+e[n]).checked=!1;for(var a=0;a<t.length;a++)t[a].value==e[n]&&t[a].checked&&(document.getElementById("add_"+e[n]).checked=!0)}}},300),!document.getElementById("allthemes").checked&&document.getElementsByName("dTheme")[2].checked){var a=document.getElementById("dThemeName").value;setTimeout(function(){var e=document.getElementById("file_list").contentWindow.themes;if(document.getElementsByName("configit")[2].checked)if(document.getElementsByName("swapThemes")[1].checked)t=["deskTheme","winTheme","macTheme","nixTheme","iOSTheme","andTheme","wp7Theme","w8mTheme","bbtTheme"];else var t=null;for(var n=0;n<e.length;n++)if(a==e[n]&&(document.getElementById("theme_"+e[n]).checked=!0),document.getElementById("theme_"+e[n]).checked=!1,null!=t){for(var o=[],d=0;d<t.length;d++)""!=document.getElementById(""+t[d]).value&&-1===o.indexOf(""+t)&&o.push(document.getElementById(""+t[d]).value);for(var l=0;l<o.length;l++)o[l]==e[n]&&(document.getElementById("theme_"+e[n]).checked=!0)}},300)}document.getElementById("custCSS").checked&&(document.getElementById("customCSSfile_name").value=document.getElementById("custCSSName").value),document.getElementById("custJS").checked&&(document.getElementById("customJSfile_name").value=document.getElementById("cutJSName").value)}function writeHelp(){if("ontouchstart"in document.documentElement&&"webOS"!=device.Platform)var e="ontouchstart";else var e="onmousedown";var t=document.getElementById("help_box"),n="";window.innerWidth<600&&(card[6][2]="RYU.guidedHelp(8);RYU.splitView(1);",card[8][1]="RYU.guidedHelp(6);"),0==xfileman&&(card[13][2]="RYU.guidedHelp(16);RYU.slideSpace(3);",card[14][2]="",card[15][2]="",card[16][1]="RYU.guidedHelp(13);RYU.slideSpace(2);");for(var a=0;a<card.length;a++)n=n+'<div id="card'+a+'" class="help_card">\n<p class="l10n">'+card[a][0]+'</p>\n<div class="help_buttons">\n',n=0==a?n+'<div class="left" '+e+'="'+card[a][1]+'">X</div>\n<div class="right l10n" '+e+'="'+card[a][2]+'">Next</div>\n<div class="playall l10n"'+e+'="RYU.playHelp(0);">Play All</div>\n':a==card.length-1?n+'<div class="left" '+e+'="'+card[a][1]+'">&lt;</div>\n<div class="right" '+e+'="'+card[a][2]+'">X</div>\n':n+'<div class="left" '+e+'="'+card[a][1]+'">&lt;</div>\n<div class="right" '+e+'="'+card[a][2]+'">&gt;</div>\n',n+="</div>\n</div>";t.innerHTML=n}function helpPlay(e){1==e?("navbars_hide"==document.getElementById("controlbox0").className&&RYU.controlsToggle(1),document.getElementById("helper_glass").style.display="block",document.getElementById("helper").style.display="block",setTimeout(function(){document.getElementById("helper").className="helper_on card0"},100)):("navbars_hide"==document.getElementById("controlbox0").className&&RYU.controlsToggle(1),"controlset control_in"!=document.getElementById("controlset0").className&&(document.getElementById("controlset0").className="controlset control_in"),document.getElementById("helper").className="helper_off",setTimeout(function(){document.getElementById("helper_glass").style.display="none",document.getElementById("helper").style.display="none"},1200))}function guidedHelp(e,t){1==t?writeHelp():document.getElementById("helper").className="helper_on card"+e}function playHelp(e){if(0==e)var t=0;else var t=5e3;var n=t;e<card.length?(""!=card[e][2]?(guidedHelp(e),setTimeout(""+card[e][2],t),n=t):n=0,e+=1,setTimeout(function(){playHelp(e)},n)):e=null}function resize_panels(){if(1==config.rzw_wysiwyg){for(var e=document.getElementById("leftbox"),t=e.offsetHeight,n=e.getElementsByClassName("toolbar")[0].offsetHeight,a=e.getElementsByClassName("statusBar")[0].offsetHeight,o=t-(n+a),d=o/2-52,l=leftbox.getElementsByClassName("panel"),i=1;i<l.length;i++)l[i].getElementsByClassName("adjustable")[0].style.height=d+"px";document.getElementById("XinhaIFrame_inputBox").style.height=o+"px",winSize();var s=winSize(),c=document.getElementById("file_manager");s.H<654&&(c.style.height=""+parseInt(.9*s.H)+"px",c.style.marginTop="-"+parseInt(.9*s.H/2)+"px")}firstedit=!0}function thumbnail_size(e){(null==e||""==e)&&(e="small"),document.getElementById("pagemanager").className="adjustable "+e}function refresh_thumbnails(e){if(null!=e&&(show_thumbnails=e),0==show_thumbnails)for(var t=document.querySelectorAll("#pagemanager li.page_thumb"),n=0;n<t.length;n++)t[n].innerHTML='<div class="thumb"></div><div class="mylar"></div><div class="index"><p>'+n+"</p></div>";else for(var t=document.querySelectorAll("#pagemanager li.page_thumb"),a=document.getElementById("XinhaIFrame_inputBox").contentWindow.document.getElementsByClassName("page"),n=0;n<a.length;n++)for(var o=0;o<t.length;o++)o==n&&(t[n].innerHTML='<div class="thumb">'+a[n].innerHTML+'</div><div class="mylar"></div><div class="index"><p>'+n+"</p></div>");document.getElementById("pgcount").innerHTML=""+a.length}function select_page(e){if(e.shiftKey){document.querySelectorAll("#pagemanager li.selected");if(hasClass(e.currentTarget,"selected")){removeClass(e.currentTarget,"selected");for(var t=0;t<selected_items.length;t++)e.currentTarget.id==selected_items[t].id&&selected_items.splice(t,1)}else addClass(e.currentTarget,"selected"),selected_items.push(e.currentTarget)}else{selected_items.length=0;for(var n=document.querySelectorAll("#pagemanager li.page_thumb"),t=0;t<n.length;t++)e.currentTarget.id!=n[t].id&&removeClass(n[t],"selected");if(hasClass(e.currentTarget,"selected"))removeClass(e.currentTarget,"selected");else{selected_items.push(e.currentTarget),addClass(e.currentTarget,"selected");var a=e.currentTarget.id;a=a.split("pt"),a=a[1],document.getElementById("XinhaIFrame_inputBox").contentWindow.document.getElementsByClassName("page")[a].scrollIntoView(!0),document.getElementById("insert_at_index").value=a}}}function selectionOf(e){var t=document.querySelectorAll("#pagemanager li.page_thumb");if(selected_items.length=0,"all"==e)for(var n=0;n<t.length;n++)addClass(t[n],"selected"),selected_items.push(t[n]);else if("none"==e)for(var n=0;n<t.length;n++)removeClass(t[n],"selected")}function delete_page(){if(selected_items.length<1)return void alert(""+RYU._lc("No pages are selected!"));if(selected_items.length>1)var e=RYU._lc("pages ");else var e=RYU._lc("page ");for(var t=0;t<selected_items.length;t++){var n=selected_items[t].id;if(n=n.split("pt"),n=n[1],t==selected_items.length-1)var a="";else var a=", ";e=e+n+a}if(window.confirm(""+RYU._lc("Are you sure you want to delete ")+e+"?\n("+RYU._lc("This cannot be undone!")+")"))for(var t=0;t<selected_items.length;t++){var n=selected_items[t].id;n=n.split("pt"),n=n[1],selected_items[t].parentNode.removeChild(selected_items[t]);var o=document.getElementById("XinhaIFrame_inputBox").contentWindow.document;o.getElementById("page"+n).parentNode.removeChild(o.getElementById("page"+n))}reindex_pages()}function reindex_pages(){var e=document.getElementById("XinhaIFrame_inputBox").contentWindow.document.getElementsByClassName("page"),t=document.querySelectorAll("#pagemanager li.page_thumb");if(e.length!=t.length)if(t.length>e.length)for(var n=t.length-e.length,a=0;n>a;a++)t[t.length-1].parentNode.removeChild(t[t.length-1]),t=document.querySelectorAll("#pagemanager li.page_thumb");else for(var n=e.length-t.length,a=0;n>a;a++)add_thumbnail(t.length),t=document.querySelectorAll("#pagemanager li.page_thumb");for(var o=0;o<e.length;o++)e[o].id="page"+o,t[o].id="pt"+o,isEven(o)?(e[o].className="page recto",t[o].className="page_thumb recto"):(e[o].className="page verso",t[o].className="page_thumb verso");refresh_thumbnails()}function setMax(e){e.setAttribute("max",""+(document.getElementById("pagemanager").getElementsByClassName("page_thumb").length-1))}function add_thumbnail(e){var t=document.createElement("li");t.id="pt"+e,isEven(e)?t.className="page_thumb recto":t.className="page_thumb verso",t.innerHTML=""+e,t.draggable="true",t.addEventListener("dragstart",dragstart_reorder,!1),t.addEventListener("dragleave",dragleave_reorder,!1),t.addEventListener("dragenter",function(e){e.preventDefault()},!1),t.addEventListener("dragover",dragover_reorder,!1),t.addEventListener("drop",dropped_reorder,!1),t.addEventListener("click",select_page,!1),document.getElementById("pagemanager").getElementsByTagName("ul")[0].appendChild(t),refresh_thumbnails()}function add_page(e,t){if(!document.getElementById("XinhaIFrame_inputBox").contentWindow.document.getElementById("issue")){var n=document.createElement("div");n.id="issue",document.getElementById("XinhaIFrame_inputBox").contentWindow.document.getElementsByTagName("body")[0].appendChild(n)}var a=document.getElementById("XinhaIFrame_inputBox").contentWindow.document.getElementById("issue"),o=a.getElementsByClassName("page"),d=document.createElement("div");d.id="page"+o.length,isEven(o.length)?d.className="page recto":d.className="page verso",d.innerHTML='<h1 class="header section_head">'+RYU._lc("Heading")+'</h1>\n<div class="live page_box">'+RYU._lc("Put your page content here")+".</div>";var l=document.createElement("li");l.id="pt"+o.length,isEven(o.length)?l.className="page_thumb recto":l.className="page_thumb verso",l.innerHTML=""+o.length,l.draggable="true",l.addEventListener("dragstart",dragstart_reorder,!1),l.addEventListener("dragleave",dragleave_reorder,!1),l.addEventListener("dragenter",function(e){e.preventDefault()},!1),l.addEventListener("dragover",dragover_reorder,!1),l.addEventListener("drop",dropped_reorder,!1),l.addEventListener("click",select_page,!1);var i=document.getElementById("pagemanager").getElementsByTagName("ul")[0];"3"==e?(a.insertBefore(d,a.getElementsByClassName("page")[t]),i.insertBefore(l,document.getElementById("pt"+t))):"2"==e?(t+1>o.length?t=o.length:t+=1,a.insertBefore(d,a.getElementsByClassName("page")[t]),i.insertBefore(l,document.getElementById("pt"+t))):"1"==e?(a.insertBefore(d,a.firstChild),i.insertBefore(l,i.firstChild)):(a.appendChild(d),i.appendChild(l)),reindex_pages()}function insert_page(){1==selected_items.length?(dex=selected_items[0].id,dex=dex.split("pt"),dex=dex[1],add_page(3,dex)):add_page()}function insert_pages(){var e=1*document.getElementById("insert_pages_count").value,t=1*document.getElementById("insert_pages_where").value,n=1*document.getElementById("insert_at_index").value;if(0==e)return void alert(""+RYU._lc("insert count set at zero, no action taken."));if(3==t)for(var a=0;e>a;a++)add_page(3,n);else if(2==t)for(var a=0;e>a;a++)add_page(2,n);else if(1==t)for(var a=0;e>a;a++)add_page(1);else for(var a=0;e>a;a++)add_page(0)}function editor_layout(e){if(document.getElementById("XinhaIFrame_inputBox").contentWindow.document.getElementById("issue")){var t=document.getElementById("XinhaIFrame_inputBox").contentWindow.document.getElementById("issue"),n=document.getElementById("pagemanager").getElementsByTagName("ul")[0];2==e?(removeClass(t,"continuous"),removeClass(n,"continuous"),addClass(t,"spreads"),addClass(n,"spreads")):1==e?(removeClass(t,"spreads"),removeClass(n,"spreads"),addClass(t,"continuous"),addClass(n,"continuous")):(removeClass(t,"spreads"),removeClass(n,"spreads"),removeClass(t,"continuous"),removeClass(n,"continuous"))}}function right_bound(e){var t=document.getElementById("XinhaIFrame_inputBox").contentWindow.document.getElementById("issue"),n=document.getElementById("pagemanager").getElementsByTagName("ul")[0];1==e?(addClass(t,"bindright"),addClass(n,"bindright")):(removeClass(t,"bindright"),removeClass(n,"bindright"))}function show_outline(e){var t=document.getElementById("XinhaIFrame_inputBox").contentWindow.document.getElementById("issue");1==e?addClass(t,"outline"):removeClass(t,"outline")}function dragstart_reorder(e){var t=e.currentTarget.innerHTML;dragged_item=e.currentTarget,e.dataTransfer.setData("text",t)}function dragleave_reorder(e){e.preventDefault(),removeClass(e.currentTarget,"dragover")}function dragover_reorder(e){e.preventDefault(),addClass(e.currentTarget,"dragover")}function dropped_reorder(e){e.preventDefault(),removeClass(e.currentTarget,"dragover"),e.currentTarget.innerHTML=e.dataTransfer.getData("text"),editor_reorder(dragged_item,e.currentTarget)}function editor_reorder(e,t){pg=e.id,pg=pg.split("pt"),pg=pg[1];for(var n=e.parentNode.getElementsByClassName("page_thumb"),a=0,o=0,d=0;d<n.length;d++)n[d].id==t.id&&(a=d);for(var d=0;d<n.length;d++)n[d].id==e.id&&(o=d);a>o&&(a+=1),n[o].parentNode.insertBefore(n[o],n[a]);var l=document.getElementById("XinhaIFrame_inputBox").contentWindow.document.getElementsByClassName("page");l[o].parentNode.insertBefore(l[o],l[a]),reindex_pages()}function cssLinkCheck(e){var t=e.id.split("_");if(document.getElementById("css_object_"+t[2]+"_linked").checked){var n=["top","left","right","bottom"];if("input"==e.tagName.toLowerCase()){if("linked"==t[3])var a="css_object_"+t[2]+"_top";else var a=e.id;for(var o=0;o<n.length;o++)e.id!="css_object_"+t[2]+"_"+n[o]&&(document.getElementById("css_object_"+t[2]+"_"+n[o]).value=document.getElementById(""+a).value,document.getElementById("css_object_"+t[2]+"_"+n[o]+"_units").value=document.getElementById(a+"_units").value)}else for(var o=0;o<n.length;o++)e.id!="css_object_"+t[2]+"_"+n[o]+"_units"&&(document.getElementById("css_object_"+t[2]+"_"+n[o]+"_units").value=e.value)}}function buildCustomCSS(){var e="",t=document.getElementById("css_classname").value;""==t&&(standin.push(".mystyle"+standin.length),t=standin[standin.length-1],document.getElementById("css_classname").value=t);var n=document.getElementById("css_basedon").value;""!=n&&(t=n+t),e+=t+" {\n";var a=document.getElementById("css_family").value;""!=a&&(e+="font-family: "+a+";\n");var o=document.getElementById("css_weight").value;""!=o&&(e+="font-weight: "+o+";\n");var d=document.getElementById("css_style").value;""!=d&&(e+="font-style: "+d+";\n");var l=document.getElementById("css_fontsize").value,i=document.getElementById("css_fontsize_units").value;""!=l&&(e+="font-size: "+l+i+";\n");var s=document.getElementById("css_lineheight").value,c=document.getElementById("css_lineheight_units").value;""!=s&&(e+="line-height: "+s+c+";\n");var r=document.getElementById("css_decoration").value;""!=r&&(e+="text-decoration: "+r+";\n");var m=document.getElementById("css_textwrap").value;m.selectedIndex>0&&m.selectedIndex<8?e+="white-space: "+m+";\n":m.selectedIndex>7&&m.selectedIndex<12?e+="word-wrap: "+m+";\n":m.selectedIndex>11&&(e+="word-break: "+m+";\n");var u=document.getElementById("css_fontcolor").value;""!=u&&(e+="color: "+u+";\n");var g=document.getElementById("css_fontbackcolor").value;""!=g&&(e+="background-color: "+g+";\n");var p=document.getElementById("css_texttransform").value;""!=p&&(e+="text-transform: "+p+";\n");var y=document.getElementById("css_textalign").value;""!=y&&(e+="text-align: "+y+";\n");var h=document.getElementById("css_letterspace").value,v=document.getElementById("css_letterspace_length").value,f=document.getElementById("css_letterspace_units").value;"length"==h?e+="letter-spacing: "+v+f+";\n":"length"!=h&&""!=h&&(e+="letter-spacing: "+h+";\n");var _=document.getElementById("css_wordspace").value,E=document.getElementById("css_wordspace_length").value,B=document.getElementById("css_wordspace_units").value;"length"==_?e+="word-spacing: "+E+B+";\n":"length"!=_&&""!=h&&(e+="word-spacing: "+_+";\n");var I=document.getElementById("css_object_height").value,w=document.getElementById("css_object_height_units").value;""!=I&&(e+="auto"==w?"height: auto;\n":"height: "+I+w+";\n");var b=document.getElementById("css_object_width").value,k=document.getElementById("css_object_width_units").value;""!=b&&(e+="auto"==w?"width: auto;\n":"width: "+b+k+";\n");var x=document.getElementById("css_object_bgcolor").value;""!=x&&(e+="background-color: "+x+";\n");var T=document.getElementById("css_object_bgimage").value;""!=T&&(e+="background-image: url('"+T+"');\n");var C=document.getElementById("css_object_bgpos").value,S=document.getElementById("css_object_bgpos_x").value,R=document.getElementById("css_object_bgpos_x_units").value,N=document.getElementById("css_object_bgpos_y").value,U=document.getElementById("css_object_bgpos_y_units").value,Y=document.getElementById("css_object_bgsize").value,z=document.getElementById("css_object_bgsize_x").value,D=document.getElementById("css_object_bgsize_x_units").value,L=document.getElementById("css_object_bgsize_y").value,H=document.getElementById("css_object_bgsize_y_units").value;
document.getElementById("css_object_bg").checked&&("custom"!=C?e+="background-position: "+C+";\n":("auto"==R&&(S=""),""==S&&"auto"!=R&&(object_bgpos_units=""),"auto"==U&&(N=""),""==S&&"auto"!=R&&(object_bgpos_units=""),e+="background-position: "+S+R+" "+N+U+";\n"),""!=Y&&("custom"!=Y?e+="-webkit-background-size: "+Y+";\n-moz-background-size: "+Y+";\n-ms-background-size: "+Y+";\nbackground-size: "+Y+";\n":("auto"==D&&(S=""),""==z&&"auto"!=D&&(object_bgsize_units=""),"auto"==H&&(L=""),""==z&&"auto"!=D&&(object_bgsize_units=""),e+="-webkit-background-size: "+z+D+" "+L+H+";\n-moz-background-size: "+z+D+" "+L+H+";\n-ms-background-size: "+z+D+" "+L+H+";\nbackground-size: "+z+D+" "+L+H+";\n")));var O=document.getElementById("css_object_pos").value;""!=O&&(e+="position: "+O+";\n");var A=document.getElementById("css_object_display").value;""!=A&&(e+="display: "+A+";\n");var M=document.getElementById("css_object_pos_top").value,P=document.getElementById("css_object_pos_top_units").value,W=document.getElementById("css_object_pos_left").value,j=document.getElementById("css_object_pos_left_units").value,F=document.getElementById("css_object_pos_bottom").value,V=document.getElementById("css_object_pos_top_units").value,G=document.getElementById("css_object_pos_left").value,X=document.getElementById("css_object_pos_left_units").value;document.getElementById("css_object_pos_linked");""!=O&&(""==M&&"auto"!=P?P="":"auto"==P&&(M=""),""==W&&"auto"!=j?j="":"auto"==j&&(W=""),""==F&&"auto"!=V?V="":"auto"==V&&(F=""),""==G&&"auto"!=X?X="":"auto"==X&&(G=""),e+="top: "+M+P+";\nleft: "+W+j+";\nright: "+G+X+";\nbottom:"+F+V+";\n");var K=document.getElementById("css_object_pad_top").value,Z=document.getElementById("css_object_pad_top_units").value,q=document.getElementById("css_object_pad_left").value,J=document.getElementById("css_object_pad_left_units").value,$=document.getElementById("css_object_pad_bottom").value,Q=document.getElementById("css_object_pad_top_units").value,ee=document.getElementById("css_object_pad_left").value,te=document.getElementById("css_object_pad_left_units").value;document.getElementById("css_object_pad_linked");document.getElementById("css_object_pad").checked&&(""==K&&"auto"!=Z?Z="":"auto"==Z&&(K=""),""==q&&"auto"!=J?J="":"auto"==J&&(q=""),""==$&&"auto"!=Q?Q="":"auto"==Q&&($=""),""==ee&&"auto"!=te?te="":"auto"==te&&(ee=""),e+="padding: "+K+Z+" "+ee+te+" "+$+Q+" "+q+J+";\n");var ne=document.getElementById("css_object_margin_top").value,ae=document.getElementById("css_object_margin_top_units").value,oe=document.getElementById("css_object_margin_left").value,de=document.getElementById("css_object_margin_left_units").value,le=document.getElementById("css_object_margin_bottom").value,ie=document.getElementById("css_object_margin_top_units").value,se=document.getElementById("css_object_margin_left").value,ce=document.getElementById("css_object_margin_left_units").value;document.getElementById("css_object_margin_linked");document.getElementById("css_object_margin").checked&&(""==ne&&"auto"!=ae?ae="":"auto"==ae&&(ne=""),""==oe&&"auto"!=de?de="":"auto"==de&&(oe=""),""==le&&"auto"!=ie?ie="":"auto"==ie&&(le=""),""==se&&"auto"!=ce?ce="":"auto"==ce&&(se=""),e+="margin: "+ne+ae+" "+se+ce+" "+le+ie+" "+oe+de+";\n");var re=document.getElementById("css_object_borderstyle").value,me=document.getElementById("css_object_bordercolor").value,ue=document.getElementById("css_object_bordersize_top").value||"0",ge=document.getElementById("css_object_bordersize_top_units").value,pe=document.getElementById("css_object_bordersize_left").value||"0",ye=document.getElementById("css_object_bordersize_left_units").value,he=document.getElementById("css_object_bordersize_bottom").value||"0",ve=document.getElementById("css_object_bordersize_top_units").value,fe=document.getElementById("css_object_bordersize_left").value||"0",_e=document.getElementById("css_object_bordersize_left_units").value;document.getElementById("css_object_bordersize_linked");"none"!=re&&(e+="border-top: "+ue+ge+" "+re+" "+me+";\nborder-left:"+pe+ye+" "+re+" "+me+";\nborder-right: "+fe+_e+" "+re+" "+me+";\nborder-bottom: "+he+ve+" "+re+" "+me+";\n");var Ee=document.getElementById("css_column_count").value,Be=document.getElementById("css_column_gutter").value,Ie=document.getElementById("css_column_gutter_units").value,we=document.getElementById("css_column_width").value,be=document.getElementById("css_column_width_units").value;"0"!=Ee&&(e+="-webkit-column-count: "+Ee+";\n-moz-column-count: "+Ee+";\n-ms-column-count: "+Ee+";\ncolumn-count: "+Ee+";\n","auto"==Ie&&(colunn_gutter=""),e+="-webkit-column-gap: "+Be+Ie+";\n-moz-column-gap: "+Be+Ie+";\n-ms-column-gap: "+Be+Ie+";\ncolumn-gap: "+Be+Ie+";\n","auto"==be&&(we=""),e+="-webkit-column-width: "+we+be+";\n-moz-column-width: "+we+be+";\n-ms-column-width: "+we+be+";\ncolumn-width: "+we+be+";\n");var ke="",xe=document.getElementById("css_object_visibility").value,Te=document.getElementById("css_object_opacity").value;""!=xe&&(ke+="visibility: "+xe+";\n"),ke+="opacity: "+Te+";\n",document.getElementById("css_showhide_example").setAttribute("style",ke),document.getElementById("css_showhide").checked&&(e+=ke);var Ce="",Se=document.getElementById("css_textshadow_x"),Re=document.getElementById("css_textshadow_x_units").value,Ne=document.getElementById("css_textshadow_y"),Ue=document.getElementById("css_textshadow_y_units").value,Ye=document.getElementById("css_textshadow_blur").value,ze=document.getElementById("css_textshadow_blur_units").value,De=document.getElementById("css_textshadow_color"),Le=document.getElementById("css_textshadow_effect").value;"outerglow"==Le&&(Se.value=Ne.value="0"),Ce+="-webkit-text-shadow: "+Se.value+Re+" "+Ne.value+Ue+" "+Ye+ze+" "+De.value+";\n-moz-text-shadow: "+Se.value+Re+" "+Ne.value+Ue+" "+Ye+ze+" "+De.value+";\n-ms-text-shadow: "+Se.value+Re+" "+Ne.value+Ue+" "+Ye+ze+" "+De.value+";\ntext-shadow: "+Se.value+Re+" "+Ne.value+Ue+" "+Ye+ze+" "+De.value+";\n",document.getElementById("css_textshadow_example").setAttribute("style",Ce),document.getElementById("css_textshadow").checked&&(e+=Ce);var He="",Oe=document.getElementById("css_boxshadow_x"),Ae=document.getElementById("css_boxshadow_x_units").value,Me=document.getElementById("css_boxshadow_y"),Pe=document.getElementById("css_boxshadow_y_units").value,We=document.getElementById("css_boxshadow_blur").value,je=document.getElementById("css_boxshadow_blur_units").value,Fe=document.getElementById("css_boxshadow_color").value,Ve=document.getElementById("css_boxshadow_spread").value,Ge=document.getElementById("css_boxshadow_spread_units").value,Xe=document.getElementById("css_boxshadow_effect").value;if("innerglow"==Xe){Oe.value=Me.value="0";var Ke=" inset"}else if("outerglow"==Xe){Oe.value=Me.value="0";var Ke=""}else if("inset"==Xe)var Ke=" inset";else var Ke="";if(He+="-webkit-box-shadow: "+Oe.value+Ae+" "+Me.value+Pe+" "+We+je+" "+Ve+Ge+" "+Fe+Ke+";\n-moz-box-shadow: "+Oe.value+Ae+" "+Me.value+Pe+" "+We+je+" "+Ve+Ge+" "+Fe+Ke+";\n-ms-box-shadow: "+Oe.value+Ae+" "+Me.value+Pe+" "+We+je+" "+Ve+Ge+" "+Fe+Ke+";\nbox-shadow: "+Oe.value+Ae+" "+Me.value+Pe+" "+We+je+" "+Ve+Ge+" "+Fe+Ke+";\n",document.getElementById("css_boxshadow_example").setAttribute("style","border: 1px solid black;padding:5px;margin:5px auto;"+He),document.getElementById("css_boxshadow").checked&&(e+=He),document.getElementById("css_transition").checked){var Ze=document.getElementById("css_transition_property").value,qe=document.getElementById("css_transition_duration").value,Je=document.getElementById("css_transition_duration_units").value,$e=document.getElementById("css_transition_timing").value,Qe=document.getElementById("css_transition_delay").value,et=document.getElementById("css_transition_delay_units").value;e+="-webkit-transition: "+Ze+" "+qe+Je+" "+$e+" "+Qe+et+";\n-moz-transition: "+Ze+" "+qe+Je+" "+$e+" "+Qe+et+";\n-ms-transition: "+Ze+" "+qe+Je+" "+$e+" "+Qe+et+";\ntransition: "+Ze+" "+qe+Je+" "+$e+" "+Qe+et+";\n"}if(document.getElementById("css_transform").checked){var Ze=document.getElementById("css_transform_property").value,tt=document.getElementById("css_transform_x").value,nt=document.getElementById("css_transform_x_units"),at=document.getElementById("css_transform_y").value,ot=document.getElementById("css_transform_y_units"),dt=document.getElementById("css_transform_z").value,lt=document.getElementById("css_transform_z_units");if("none"==Ze||"initial"==Ze||"inherit"==Ze)e+="-webkit-transform: "+Ze+";\n-moz-transform: "+Ze+";\n-ms-transform: "+Ze+";\ntransform: "+Ze+";\n";else if(Ze.match(/scale/gi)){nt.value="%",ot.value="%",lt.value="%";var it=parseFloat(.1*tt),st=parseFloat(.1*at),ct=parseFloat(.1*dt);e+="scale3d"==Ze?"-webkit-transform: scale3d("+it+","+st+","+ct+");\n-moz-transform: scale3d("+it+","+st+","+ct+");\n-ms-transform: scale3d("+it+","+st+","+ct+");\ntransform: scale3d("+it+","+st+","+ct+");\n":"scale"==Ze?"-webkit-transform: scale("+it+","+st+");\n-moz-transform: scale("+it+","+st+");\n-ms-transform: scale("+it+","+st+");\ntransform: scale("+it+","+st+");\n":"scaleX"==Ze?"-webkit-transform: scaleX("+it+");\n-moz-transform: scaleX("+it+");\n-ms-transform: scaleX("+it+");\ntransform: scaleX("+it+");\n":"scaleY"==Ze?"-webkit-transform: scaleY("+st+");\n-moz-transform: scaleY("+st+");\n-ms-transform: scaleY("+st+");\ntransform: scaleY("+st+");\n":"-webkit-transform: scaleZ("+ct+");\n-moz-transform: scaleZ("+ct+");\n-ms-transform: scaleZ("+ct+");\ntransform: scaleZ("+ct+");\n"}else Ze.match(/rotate/gi)?(nt.value="deg",ot.value="deg",lt.value="deg",e+="rotate"==Ze?"-webkit-transform: rotate("+tt+"deg);\n-moz-transform: rotate("+tt+"deg);\n-ms-transform: rotate("+tt+"deg);\ntransform: rotate("+tt+"deg);\n":"rotateX"==Ze?"-webkit-transform: rotateX("+tt+"deg);\n-moz-transform: rotateX("+tt+"deg);\n-ms-transform: rotateX("+tt+"deg);\ntransform: rotateX("+tt+"deg);\n":"rotateY"==Ze?"-webkit-transform: rotateY("+at+"deg);\n-moz-transform: rotateY("+at+"deg);\n-ms-transform: rotateY("+at+"deg);\ntransform: rotateY("+at+"deg);\n":"-webkit-transform: rotateZ("+dt+"deg);\n-moz-transform: rotateZ("+dt+"deg);\n-ms-transform: rotateZ("+dt+"deg);\ntransform: rotateZ("+dt+"deg);\n"):Ze.match(/skew/gi)&&(nt.value="deg",ot.value="deg",lt.value="deg",e+="skew3d"==Ze?"-webkit-transform: skew3d("+tt+"deg,"+at+"deg,"+dt+"deg);\n-moz-transform: skew3d("+tt+"deg,"+at+"deg,"+dt+"deg);\n-ms-transform: skew3d("+tt+"deg,"+at+"deg,"+dt+"deg);\ntransform: skew3d("+tt+"deg,"+at+"deg,"+dt+"deg);\n":"skew"==Ze?"-webkit-transform: skew("+tt+"deg,"+at+"deg);\n-moz-transform: skew("+tt+"deg,"+at+"deg);\n-ms-transform: skew("+tt+"deg,"+at+"deg);\ntransform: skew("+tt+"deg,"+at+"deg);\n":"skewX"==Ze?"-webkit-transform: skewX("+tt+"deg);\n-moz-transform: skewX("+tt+"deg);\n-ms-transform: skewX("+tt+"deg);\ntransform: skewX("+tt+"deg);\n":"skewY"==Ze?"-webkit-transform: skewY("+at+"deg);\n-moz-transform: skewY("+at+"deg);\n-ms-transform: skewY("+at+"deg);\ntransform: skewY("+at+"deg);\n":"-webkit-transform: skewZ("+dt+"deg);\n-moz-transform: skewZ("+dt+"deg);\n-ms-transform: skewZ("+dt+"deg);\ntransform: skewZ("+dt+"deg);\n")}var rt="",mt=document.getElementById("css_filter_property").value,ut=document.getElementById("css_filter_value").value,gt=document.getElementById("css_filter_value_units").value;rt+="-webkit-filter: "+mt+"("+ut+gt+");\n-moz-filter: "+mt+"("+ut+gt+");\n-ms-filter: "+mt+"("+ut+gt+");\nfilter: "+mt+"("+ut+gt+");\n",document.getElementById("css_filter_example").setAttribute("style",rt),document.getElementById("css_filter").checked&&(e+=rt),e+="}\n\n",document.getElementById("newcss_style").value=e}function addCustomCSS(){var e=document.getElementById("newcss_style").value;name=e.split("{")[0].trim(),e=e.split("{")[1].split("}")[0].trim(),RYU.RYUStylist.addCustomCSS(name,e)}function all_addons_selected(e){var t=document.getElementById("available_addons").getElementsByTagName("input");if(selected_addons=[],1==e)for(var n=1;n<t.length;n++)add_selected_addon(t[n]);else for(var n=1;n<t.length;n++)cut_selected_addon(t[n])}function add_selected_addon(e){-1==selected_addons.indexOf(""+e.value)&&selected_addons.push(""+e.value),e.checked=!0,e.parentNode.parentNode.className="active",document.getElementById("addons_load_order").innerHTML="<strong>Add-On Load Order:</strong> "+selected_addons.toString().replace(/,/gi,", ")}function cut_selected_addon(e){-1!=selected_addons.indexOf(""+e.value)&&selected_addons.splice(selected_addons.indexOf(""+e.value),1),e.checked=!1,e.parentNode.parentNode.className="inactive",document.getElementById("addons_load_order").innerHTML="<strong>Add-On Load Order:</strong> "+selected_addons.toString().replace(/,/gi,", ")}var _lc=function(e){return e.toString(),e},version="1.0",addonsscroll=null,optscroll=null,aboutscroll=null,sheetscroll=null,galleryscroll=null,scrollHolder,css3d=0,config=void 0,p_toggle=0,W=null,H=null,inputMethod="mousedown",zoomed=0,defaultTheme="",p=0,x=1,z=0,events=0,prevW=0,prevH=0,aCheck=null,ctog=1,buildwait=2e3,exists=!1,hidecontrols=null,slidecontrols=null,upboxtimer=null,paneltimer=null,toolcheck=null,toolcactch=null,splashoff=null,splashout=null,splashload=null,handle=null,adtrigger=null,splashcatch=null,extsrc=0,r=0,u=0,t="phone",d=0,dView=0,dSim=1,devH=0,devW=0,customProfile="phone",customOS="iOS",customOSadds=[],customDevices=[],uEv=0,autoAdjust=1,opt_cache=1,opt_lang="en",opt_local=0,opt_IE=0,opt_round=0,opt_config="ryuzine.config.js",opt_themename="",opt_edition="thisissue.css",opt_css="",opt_js="",opt_touchsim=0,opt_loadwhen=0,opt_iscroll=0,opt_inpage=0,mySource={},mySourceFrame={},myOutput={},myCSS={},myDevice={},myWindow={},myScreen={},myStatus={},myNavBar={},myTabBar={},myTabStat={},devSelect={},alertCSS={},hide_dialogs=[],selected_addons=[],addons_info={},doc_title="",doc_author="",doc_applogo="",doc_summary="",doc_keywords="",doc_version="",doc_social_src=0,doc_social="",doc_link="",doc_welcome="",doc_banner="",doc_boxad="",doc_splash="",doc_goodbye="",doc_copyright="",doc_converted=0,bmarkData=[];initBmarkData();var cat_masthead="",rackData=[],current_catalog="";initRackData();var mediaType=[];initMediaTypes();var rackCategory=[];initRackCategories();var rackBuilder=[];initRack(),window.console||(window.console={}),window.console.log&&0!=DEBUG||(window.console.log=function(){});var cssdisabled=!1,cssTransitionsSupported=!1,cssTransform=getsupportedprop(["transform","MozTransform","WebkitTransform","msTransform","OTransform"]),cssTransitionDelay=getsupportedprop(["transitionDelay","MozTransitionDelay","WebkitTransitionDelay","msTransitionDelay","OTransitionDelay"]),cssTransitionDuration=getsupportedprop(["transitionDuration","MozTransitionDuration","WebkitTransitionDuration","msTransitionDuration","OTransitionDuration"]),css3borderRadius=getsupportedprop(["borderRadius","MozBorderRadius","WebkitBorderRadius"]),css3dCapable=getsupportedprop(["perspective","MozPerspective","WebkitPerspective","msPerspective","OPerspective"]),nativeScroll=getsupportedprop(["overflowScrolling","WebkitOverflowScrolling"]),device={};if(navigator.userAgent.match(/Android/i)){var ver=navigator.userAgent.match(/Android ./i);ver=ver[0].split(" "),ver=parseFloat(ver[1]),device.OS="Android",device.Platform="Android",device.v=ver}else if(navigator.userAgent.match(/Chrome/i)){device.Platform="Chrome";var fullVersion=""+parseFloat(navigator.appVersion),majorVersion=parseInt(navigator.appVersion,7),verOffset=navigator.userAgent.indexOf("Chrome");fullVersion=navigator.userAgent.substring(verOffset+7),device.v=parseInt(""+fullVersion,10)}else if(navigator.userAgent.match(/wOSBrowser/i)||navigator.userAgent.match(/webOS/i))device.Platform="webOS";else if(navigator.userAgent.match(/RIM/i)||navigator.userAgent.match(/PlayBook/i)||navigator.userAgent.match(/BlackBerry/i))device.Platform="BBOS";else if(navigator.userAgent.match(/Safari/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/iPad/i))if(navigator.userAgent.match(/iOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/iPad/i)){device.OS="iOS",device.Platform="iOS";var fullVersion=navigator.appVersion;fullVersion=fullVersion.split("OS ");var majorVersion=parseInt(fullVersion[1]);if(majorVersion>7&&(navigator.appVersion.match(/Version/gi)?(fullVersion=navigator.appVersion.split("Version/"),majorVersion=parseInt(fullVersion[1])):majorVersion=8),device.v=majorVersion,navigator.userAgent.match(/Safari/)){var fullVersion=navigator.appVersion;fullVersion=fullVersion.split("/");var majorVersion=parseInt(fullVersion[2]);device.subv=majorVersion}else device.app=1}else{device.Platform="Safari";var fullVersion=""+parseFloat(navigator.appVersion),majorVersion=parseInt(navigator.appVersion,7),verOffset=navigator.userAgent.indexOf("Safari");fullVersion=navigator.userAgent.substring(verOffset-6),device.v=parseInt(""+fullVersion,10)}else if(navigator.userAgent.match(/MSIE/i))navigator.userAgent.match(/IEMobile/i)?(device.OS="Windows Phone",device.Platform="WP7",iScroll=void 0):device.Platform="IE",/MSIE (\d+\.\d+);/.test(navigator.userAgent)&&(device.v=new Number(RegExp.$1)),(device.v<9||10==device.v)&&(iScroll=void 0,device.v>=10&&(device.metro=function(){var e=0;try{e=!!new ActiveXObject("htmlfile")}catch(t){e=0}return 0!=e&&(e=window.innerWidth==screen.width&&window.innerHeight==screen.height?1:0),e}));else if(navigator.userAgent.match(/Firefox/i))device.Platform="Firefox";else if(navigator.userAgent.match(/Fennec/i))device.Platform="FFM";else if(navigator.userAgent.match(/Opera/i)||window.opera){device.Platform="Opera";var fullVersion=window.opera.version();device.v=parseInt(""+fullVersion,10);var subVersion=fullVersion.split(".");device.subv=subVersion[1]}else device.Platform="Desktop";if(navigator.userAgent.match(/Windows/i)?device.OS="Windows":navigator.userAgent.match(/Macintosh/i)?device.OS="Mac":navigator.userAgent.match(/Linux/i)&&(device.OS="Linux"),storeMasterCookie(),storeIntelligentCookie("test","cookie value"),"undefined"!=typeof RYU.config)var config=RYU.config;if(void 0!=config){config.zoompan=config.zoomable;var maxzoom=config.maxzoom,AddOns=config.AddOns;config.importStyles,config.rzw_styles=config.myStyles,config.rzw_wysiwyg=config.wysiwyg,config.rzw_noobnags=config.noobnags,config.rzw_tabindex=config.tabindex,config.rzw_filenew=config.filenew;var xfileman=config.xfileman;Get_Cookie("deviceList")&&(customDevices=JSON.parse(Get_Cookie("deviceList")));for(var cd=0;cd<customDevices.length;cd++)config.deviceList.push(customDevices[cd]);config.addonsList=config.addonsList;for(var helpcards=42,card=[],c=0;helpcards>c;c++)card[c]=[];card[0][0]="Guided Tour<br/><br/>Navigate with button on bubble or Play All above.",card[0][1]="RYU.helpPlay(0);",card[0][2]="RYU.guidedHelp(1);RYU.slideSpace(0);",card[1][0]="The START Screen has shortcuts to common tasks.",card[1][1]="RYU.guidedHelp(0);",card[1][2]="RYU.guidedHelp(2);RYU.slideSpace(1);",card[2][0]="The EDITOR is where you create and update your Ryuzine publications.",card[2][1]="RYU.guidedHelp(1);RYU.slideSpace(0);",card[2][2]="RYU.guidedHelp(3);",card[3][0]="FILE<br/>Start fresh, from a template or open &amp; edit a file",card[3][1]="RYU.guidedHelp(2);",card[3][2]="RYU.guidedHelp(4);RYU.toggleDialog('add-template');",card[4][0]="TEMPLATE<br/>Enter info &amp; select elements to include in your magazine.",card[4][1]="RYU.guidedHelp(3);RYU.toggleDialog('add-template',0);",card[4][2]="RYU.guidedHelp(5);RYU.toggleDialog('add-template',0);RYU.toggleDialog('loadpage',1);",card[5][0]="OPEN FILE<br/>to import and edit existing files.",card[5][1]="RYU.guidedHelp(4);RYU.toggleDialog('loadpage',0);RYU.toggleDialog('add-template',1);",card[5][2]="RYU.guidedHelp(6);RYU.toggleDialog('loadpage',0);if(document.getElementById('chooser').value=='wip_newsample.htm'){RYU.selectFile(0);}",card[6][0]="Use the Editor Window to add or modify the content.",card[6][1]="RYU.guidedHelp(5);RYU.toggleDialog('loadpage',1);",card[6][2]="RYU.guidedHelp(7);RYU.uniqueElements();",card[7][0]="ELEMENTS<br/>Inserts Ryuzine specific elements in Editor.",card[7][1]="RYU.guidedHelp(6);",card[7][2]="RYU.guidedHelp(8);RYU.splitView(1);",card[8][0]="SPLIT VIEW<br/>Directly edit code and preview changes at the same time.",card[8][1]="RYU.guidedHelp(7);RYU.splitView();",card[8][2]="RYU.guidedHelp(9);RYU.splitView();",card[9][0]="OPTIONS<br/>Customize the output format of your magazine.",card[9][1]="RYU.guidedHelp(8);RYU.splitView(1);",card[9][2]="RYU.guidedHelp(10);RYU.toggleDialog('output-options',1);",card[10][0]="OPTIONS<br/>Easily set up which features your publication will support.",card[10][1]="RYU.guidedHelp(9);RYU.toggleDialog('output-options',0);",card[10][2]="RYU.guidedHelp(11);RYU.outputOptions();RYU.toggleDialog('output-options',0);",card[11][0]="BUILD!<br/>Processes your Editor content into Ryuzine format.",card[11][1]="RYU.guidedHelp(10);RYU.toggleDialog('output-options',1);",card[11][2]="RYU.guidedHelp(12);RYU.clearSimulator();RYU.refreshSrc();RYU.slideSpace(2);RYU.reWrite();",card[12][0]="OUTPUT<br/>Ryuzine code is generated automatically.",card[12][1]="RYU.guidedHelp(11);RYU.slideSpace(1);",card[12][2]="RYU.guidedHelp(13);",card[13][0]="HTML</br>Export box has the Ryuzine webapp code in it.",card[13][1]="RYU.guidedHelp(12);",card[13][2]="RYU.guidedHelp(14);",card[14][0]="SAVE!<br/>Individual component files or Packaged Publications.",card[14][1]="RYU.guidedHelp(13);",card[14][2]="RYU.guidedHelp(15);RYU.toggleDialog('package-options',1);",card[15][0]="PACKAGE<br/>Choose small, standard, or custom packages to ZIP",card[15][1]="RYU.guidedHelp(14);RYU.toggleDialog('package-options',0);",card[15][2]="RYU.guidedHelp(16);RYU.toggleDialog('package-options',0);RYU.slideSpace(3);",card[16][0]="SIMULATOR<br/>Preview your Ryuzine as various devices will show it.",card[16][1]="RYU.guidedHelp(15);RYU.toggleDialog('package-options',1);RYU.slideSpace(2);",card[16][2]="RYU.guidedHelp(17);",card[17][0]="DEVICE LIST<br/>Choose from many simulated device profiles.",card[17][1]="RYU.guidedHelp(16);",card[17][2]="RYU.guidedHelp(18);",card[18][0]="ADD DEVICES<br/>Create custom profiles for other simulated devices.",card[18][1]="RYU.guidedHelp(17);",card[18][2]="RYU.guidedHelp(19);RYU.toggleDialog('customize',1);",card[19][0]="Enter device profile data and submit. Profiles are stored for future sessions.",card[19][1]="RYU.guidedHelp(18);RYU.toggleDialog('customize',0);",card[19][2]="RYU.guidedHelp(20);RYU.toggleDialog('customize',0);RYU.rotateDevice();",card[20][0]="ROTATE<br/>Switch devices between portrait and landscape orientations.",card[20][1]="RYU.guidedHelp(19);RYU.toggleDialog('customize',1);RYU.rotateDevice();",card[20][2]="RYU.guidedHelp(21);RYU.rotateDevice();",card[21][0]="VIEWS<br/>Change simulator from browser mode, app view, and more.",card[21][1]="RYU.guidedHelp(20);RYU.rotateDevice();",card[21][2]="RYU.guidedHelp(22);",card[22][0]="ZOOM<br/>Shrink, Magnify, and Fit Simulator to your screen.",card[22][1]="RYU.guidedHelp(21);",card[22][2]="RYU.guidedHelp(23);RYU.slideSpace(4);",card[23][0]="CONFIGURE!<br/>Easily create custom issue configuration files.",card[23][1]="RYU.guidedHelp(22);RYU.slideSpace(3);",card[23][2]="RYU.guidedHelp(24);",card[24][0]="Select the Configuration Settings you want to use for your publication.",card[24][1]="RYU.guidedHelp(23);RYU.swapAppTab('configuration','configuration_tab0','configuration_section0');",card[24][2]="RYU.guidedHelp(25);RYU.swapAppTab('configuration','configuration_tab1','configuration_section1');",card[25][0]="TABS move from one configuration section to another.",card[25][1]="RYU.guidedHelp(24);RYU.swapAppTab('configuration','configuration_tab0','configuration_section0');",card[25][2]="RYU.guidedHelp(26);",card[26][0]="BUILD<br/>Instantly writes your custom configuration for you.",card[26][1]="RYU.guidedHelp(25);",card[26][2]="RYU.guidedHelp(27);RYU.buildConfigFile();",card[27][0]="EXPORT<br/>Configuration file code appears in export box.",card[27][1]="RYU.guidedHelp(26);RYU.slideSpace(4);",card[27][2]="RYU.guidedHelp(28);",card[28][0]="RYUZINE RACK<br/>Data Catalog files are easy to build and edit.",card[28][1]="RYU.guidedHelp(27);",card[28][2]="RYU.guidedHelp(29);RYU.slideSpace(5);",card[29][0]="EDIT DATA<br/>Using Data Builder is similar to editing a spreadsheet.",card[29][1]="RYU.guidedHelp(28);RYU.slideSpace(2);",card[29][2]="RYU.guidedHelp(30);",card[30][0]="LOAD<br/>Existing Data Catalogs",card[30][1]="RYU.guidedHelp(29);",card[30][2]="RYU.guidedHelp(31);RYU.toggleDialog('loadrack',1);",card[31][0]="CATALOGS are HTML files with simple tables in them.",card[31][1]="RYU.guidedHelp(30);RYU.slideSpace(2);RYU.toggleDialog('loadrack',0);",card[31][2]="RYU.guidedHelp(32);RYU.addRackData();RYU.toggleDialog('loadrack',0);",card[32][0]="ADD ITEMS<br/>Appends a new row to the end of the Data Catalog.",card[32][1]="RYU.guidedHelp(31);RYU.toggleDialog('loadrack',1);",card[32][2]="RYU.guidedHelp(33);",card[33][0]="DELETE ROW<br/>Tap the X at the end of any row to delete the row.",card[33][1]="RYU.guidedHelp(32);RYU.addRackData();",card[33][2]="RYU.guidedHelp(34);",card[34][0]="Media Type &amp; Category lists can also be customized for each catalog.",card[34][1]="RYU.guidedHelp(33);",card[34][2]="RYU.guidedHelp(35);RYU.toggleDialog('edittypes',1);",card[35][0]="These lists are synchronized with the Configuration Builder.",card[35][1]="RYU.guidedHelp(34);RYU.toggleDialog('edittypes',0);",card[35][2]="RYU.guidedHelp(36);RYU.toggleDialog('edittypes',0);",card[36][0]="BUILD<br/>Catalogs are built automatically with just a click!",card[36][1]="RYU.guidedHelp(35);RYU.toggleDialog('edittypes',1);",card[36][2]="RYU.guidedHelp(37);RYU.getRackData(1);",card[37][0]="EXPORT<br/>Data Catalog code prints out to the Export box.",card[37][1]="RYU.guidedHelp(36);RYU.slideSpace(5);",card[37][2]="RYU.guidedHelp(38);",card[38][0]="OPTIONS<br/>Shows additional settings.",card[38][1]="RYU.guidedHelp(37);",card[38][2]="RYU.guidedHelp(39);RYU.togglePanel('opt_panel');",card[39][0]="OPTIONS<br/>Let you set preferences for how Ryuzine Writer works for you.",card[39][1]="RYU.guidedHelp(38);RYU.togglePanel('opt_panel');",card[39][2]="RYU.guidedHelp(40);RYU.togglePanel('addons_panel');",card[40][0]="ADD-ONS<br/>Optional and third-party add-ons with workspaces can be accessed here.",card[40][1]="RYU.guidedHelp(39);RYU.togglePanel('addons_panel');",card[40][2]="RYU.guidedHelp(41);RYU.togglePanel('all');",card[41][0]="THANK YOU!<br/>for trying Ryuzine Writer!<br/><br/>Full Manual Available Online.",card[41][1]="RYU.guidedHelp(40);",card[41][2]="RYU.helpPlay(0);RYU.slideSpace(0);";var swapThemes=config.swapThemes,deskTheme=config.deskTheme,winTheme=config.winTheme,macTheme=config.macTheme,nixTheme=config.nixTheme,iOSTheme=config.iOSTheme,andTheme=config.andTheme,bbtTheme=config.bbtTheme,wp7Theme=config.wp7Theme,wp8Theme=config.wp8Theme}else alert(""+RYU._lc("Error: configuration file missing!"));if(1==xfileman){var php={baseurl:location.href.substring(0,location.href.lastIndexOf("/"))};RYU.php=php}var baseurl=location.href.substring(0,location.href.lastIndexOf("/"))+"/";Get_Cookie("rzw_animate")?config.animate=Get_Cookie("rzw_animate"):config.animate=1,(("Safari"==device.Platform||"iOS"==device.Platform)&&device.v<4||"Opera"==device.Platform&&device.v<15)&&(config.animate=0),Get_Cookie("rzw_nscroll")?config.nscroll=Get_Cookie("rzw_nscroll"):"iOS"==device.Platform&&void 0!=nativeScroll||"Android"==device.Platform&&device.v>2?config.nscroll=1:config.nscroll=0,Get_Cookie("rzw_zoompan")&&(config.zoompan=Get_Cookie("rzw_zoompan"),0==config.zoompan&&(config.nscroll=0)),"Android"==device.Platform&&(config.zoompan=1),Get_Cookie("rzw_myStyles")&&(config.rzw_styles=1*Get_Cookie("rzw_myStyles")),Get_Cookie("rzw_wysiwyg")&&(config.rzw_wysiwyg=1*Get_Cookie("rzw_wysiwyg")),Get_Cookie("rzw_zoomable")&&(config.zoompan=1*Get_Cookie("rzm_zoomable")),Get_Cookie("rzw_noobnags")&&(config.rzw_noobnags=1*Get_Cookie("rzw_noobnags")),Get_Cookie("rzw_hide_dialogs")&&(hide_dialogs=[Get_Cookie("rzw_hide_dialogs")]),Get_Cookie("rzw_tabindex")&&(config.rzw_tabindex=1*Get_Cookie("rzw_tabindex"));var metacontent="";zoomSet();var addon={};addon.register=function(e){if(!e.name)return void loadAddOns(addon_loaded+1);if("register"!=e.name){for(var t=0,n=0;n<Object.keys(addon).length;n++)Object.keys(addon)[n]==e.name&&(t=1);0==t&&(addon[""+e.name]={});for(var a=0,n=0;n<AddOns.length;n++)e.name==AddOns[n]&&(e.index=n,a=n);for(var o=0;o<Object.keys(e).length;o++)addon[""+e.name][""+Object.keys(e)[o]]=e[""+Object.keys(e)[o]];if(e=addon[""+e.name],e.info||(e.info={name:""+e.name,version:"0",author:"Unknown",url:"",license:"Unknown",about:"There is no description for this add-on."}),e.requires)for(var d=0;d<e.requires.length;d++){var l=e.requires[d].split("?"),i=0;if("ryuzinereader"==l[0]&&document.getElementById("ryuzinereader")||"ryuzinerack"==l[0]&&document.getElementById("ryuzinerack")||"ryuzinerack"==l[0]&&document.getElementById("ryuzinerack")||"ryuzinewriter"==l[0]&&document.getElementById("ryuzinewriter"))i=1,null!=l[1]&&parseFloat(version)<parseFloat(l[1])&&(i=0);else if("!ryuzinereader"==l[0]&&document.getElementById("ryuzinereader")||"!ryuzinepress"==l[0]&&document.getElementById("ryuzinepress")||"!ryuzinerack"==l[0]&&document.getElementById("ryuzinerack")||"!ryuzinewriter"==l[0]&&document.getElementById("ryuzinewriter"))i=2;else if(l[0].match(/!/gi)){i=1,l[0]=l[0].split("!")[1];for(var o=0;o<Object.keys(addon).length;o++)l[0]==Object.keys(addon)[o].toString()&&(i=3,null!=l[1]&&parseFloat(addon[""+Object.keys(addon)[o]].info.version)<parseFloat(l[1])&&(i=1))}else for(var o=0;o<Object.keys(addon).length;o++)l[0]==Object.keys(addon)[o].toString()&&(i=1,null!=l[1]&&parseFloat(addon[""+Object.keys(addon)[o]].info.version)<parseFloat(l[1])&&(i=0));if(1!=i){for(var o=Object.keys(e).length-1;o>-1;o--)"name"==Object.keys(e)[o]||"index"==Object.keys(e)[o]||"info"==Object.keys(e)[o]||"requires"==Object.keys(e)[o]||delete e[""+Object.keys(e)[o]];e.disabled=1}}if(e.inject){if(e.inject.js&&Array.isArray(e.inject.js))for(var s=e.inject.js.length-1;s>=0;s--)if(Array.isArray(e.inject.js[s])&&e.inject.js[s].length>0){if(null==e.inject.js[s][1])e.inject.js[s][1]=0;else if((3==e.inject.js[s][1]||4==e.inject.js[s][1])&&null!=e.inject.js[s][3]&&""!=e.inject.js[s][3])for(var l=e.inject.js[s][3].split("?"),i=0,d=0;d<document.getElementsByTagName("script").length;d++){var c=document.getElementsByTagName("script")[d].src.split("/");c=c[c.length-1].split("?"),l[0]==c[0]&&(i=1,null!=l[1]&&parseFloat(c[1])<parseFloat(l[1])&&(i=0))}}else e.inject.js.splice(s,1);if(e.inject.css&&Array.isArray(e.inject.css))for(var r=e.inject.css-1;r>=0;r--)if(Array.isArray(e.inject.css[r])&&e.inject.css[r].length>0){if(null==e.inject.css[r][3])e.inject.css[r][3]=0;else if(null!=e.inject.css[r][3]&&""!=e.inject.css[r][3])for(var l=e.inject.css[r][3].split("?"),i=0,d=0;d<document.getElementsByTagName("link").length;d++){var c=document.getElementsByTagName("link")[d].href.split("/");c=c[c.length-1].split("?"),l[0]==c[0]&&(i=1,null!=l[1]&&parseFloat(c[1])<parseFloat(l[1])&&(i=0))}}else e.inject.css.splice(r,1);addonInjector(e)}if(e.install&&RYU.fileOps(11,e.install,e.name),e.ui){if(e.ui.panels)for(var m=0;m<e.ui.panels.length;m++)addPanel(e.ui.panels[m][0],e.name+"_"+e.ui.panels[m][1],e.ui.panels[m][2],e.ui.panels[m][3],e.ui.panels[m][4]);if(e.ui.dialogs)for(var u=0;u<e.ui.dialogs.length;u++)addDialogBox(e.name+"_"+e.ui.dialogs[u][0],e.ui.dialogs[u][1],e.ui.dialogs[u][2],e.ui.dialogs[u][3],e.ui.dialogs[u][4],e.ui.dialogs[u][5]);if(e.ui.controls)for(var g=0;g<e.ui.controls.length;g++)addControl(e.ui.controls[g][0],e.name+"_"+e.ui.controls[g][1],e.ui.controls[g][2],e.ui.controls[g][3],e.ui.controls[g][4],e.ui.controls[g][5],e.ui.controls[g][6],e.ui.controls[g][7]);if(e.ui.workspaces)for(var p=0;p<e.ui.workspaces.length;p++)addWorkspace(e.name+"_"+e.ui.workspaces[p][0],e.ui.workspaces[p][1],e.ui.workspaces[p][2],e.ui.workspaces[p][3]);
}e.actions&&"function"==typeof e.actions&&e.actions(),loadAddOns(a+1)}};var addon_optData=[],iscrollers=[],optEvent={},regback=addon.register,addon_loaded=null,addon_timer,addPanel=function(e,t,n,a){(""==a||void 0==a)&&(a="left");var o=document.createElement("div");o.id=t+"_panel",(""==e||void 0==e)&&(e="a"),o.className="panel "+e+" "+a+" out";var d=document.createElement("div");d.className="titlebar",paneltitle=document.createElement("h1"),paneltitle.className="title l10n",paneltitle.innerHTML=n||"Custom Panel",panelclose=document.createElement("div"),panelclose.id=t+"_done",panelclose.className="button type2 right done",panelclose.innerHTML='<p><span class="symbol"></span><span class="label l10n">'+RYU._lc("Done")+"</span></p>",panelclose.addEventListener(iDown,function(){RYU.togglePanel(""+t+"_panel")},!1),d.appendChild(paneltitle),d.appendChild(panelclose),o.appendChild(d);var l=document.createElement("div");l.className="area",l.innerHTML='<div class="scrollbox"></div>',o.appendChild(l),document.getElementById("upbox").appendChild(o)},firstclass=0,addControl=function(e,t,n,a,o,d,l,i,s,c){function r(){if(1==insert&&0==firstclass)if(document.getElementById("party3opts"))var e=document.getElementById("party3opts");else{var e=document.createElement("ul");e.id="party3opts",e.className="opts"}else if(1==insert&&1==firstclass)var e=document.getElementById("opts");else if(document.getElementById(l+"_optlist"))var e=document.getElementById(l+"_optlist");else{var e=document.createElement("ul");e.id=l+"_optlist",e.className="opts"}return e}""==l||void 0==l?(l="opt_panel",insert=1):insert=0,"start"!=l||"button3"==e&&"button4"==e||(e="button3"),document.getElementById(""+l).getElementsByClassName("area")[0].getElementsByClassName("scrollbox").length>0?panel=document.getElementById(""+l).getElementsByClassName("area")[0].getElementsByClassName("scrollbox")[0]:panel=document.getElementById(""+l).getElementsByClassName("area")[0],null!=c&&(panel=document.getElementById(""+c),insert=0);var m=addon_optData.length,u=[];switch(addon_optData[m]=[],addon_optData[m][0]=e,addon_optData[m][1]=t,addon_optData[m][2]=n,null==a?addon_optData[m][3]=function(){}:addon_optData[m][3]=a,Array.isArray(o)&&(u=o,o=0),1==d?Get_Cookie(""+t)?o=Get_Cookie(""+t):config[""+t]?o=config[""+t]:null==o&&(o=1):d=0,null==o&&(o=1),addon_optData[m][4]=o,addon_optData[m][5]=d,addon_optData[m][6]=l,e){case"button1":case"button2":case"button3":case"button4":switch(e){case"button4":var g="type4";break;case"button3":var g="type3";break;case"button2":var g="type2";break;default:var g="type1"}var p=document.createElement("div");if(p.id=t,p.className="button "+g,p.innerHTML='<p><span class="symbol"></span><span class="label l10n">'+RYU._lc(n)+"</span></p>",p.addEventListener(eDown,optEvent[""+t]=a,!1),"button1"==e||"button2"==e){var y=t.split("_")[0];if(document.getElementById(""+y+"_buttonbox"))var h=document.getElementById(""+y+"_buttonbox");else{var h=document.createElement("div");h.id=y+"_buttonbox",h.className="buttonbox"}p.className=p.className+" left",h.appendChild(p),el=h}else el=p;break;case"text":var v=document.createElement("p");v.id=t,null!=s?v.className="smallprint "+s:v.className="smallprint",null!=a&&v.addEventListener(eDown,optEvent[""+t]=a,!1),v.innerHTML=n,el=v;break;case"select":case"drop":case"list":case"multi":var f=r(),_=document.createElement("li");_.id=t+"_li",_.className="opt-li";var E=document.createElement("span");E.className="optitem l10n",E.innerHTML=RYU._lc(n),_.appendChild(E);var B=document.createElement("p"),I=document.createElement("select");I.id=t,I.addEventListener("change",a,!1),("list"==e||"multi"==e)&&(I.addEventListener("mousedown",function(){event.stopPropagation()},!1),I.addEventListener("touchstart",function(){event.stopPropagation()},!1),I.className="listbox",I.size="2"),"multi"==e&&I.setAttribute("multiple",!0);for(var w=u[0][1],b=u[0][0],k=0;k<u.length;k++){var x=document.createElement("option");x.value=u[k][0],x.innerHTML=u[k][1],null!=u[k][2]&&0==o&&(x.setAttribute("selected","true"),w=u[k][1],b=u[k][0]),I.appendChild(x)}if(0==o&&(o=b),"drop"==e){var T=document.createElement("div");T.className="opt-switch opt-drop opt-off",I.addEventListener("change",function(e){return function(){RYU.setOptGhostList(""+e)}}(t),!1),I.addEventListener("mousedown",function(){event.stopPropagation()},!1),I.addEventListener("touchstart",function(){event.stopPropagation()},!1),T.appendChild(I),B.innerHTML=w,T.appendChild(B),_.appendChild(T)}else _.appendChild(I);f.appendChild(_),el=f;break;case"checkbox":var f=r(),_=document.createElement("li");_.id=t+"_li",_.className="opt-li";var E=document.createElement("span");E.className="optitem l10n",E.innerHTML=RYU._lc(n),_.appendChild(E);var C=document.createElement("input");C.className="opt-switch opt-check opt-off",C.type="checkbox",null!=i&&(C.name=i),Array.isArray(o)||(o="1"==o?[1,1]:[0,0]),C.value=o[0],1==o[1]&&(C.checked=!0),_.appendChild(C),f.appendChild(_),el=f;break;case"radio":var f=r(),_=document.createElement("li");_.id=t+"_li",_.className="opt-li";var E=document.createElement("span");E.className="optitem l10n",E.innerHTML=RYU._lc(n),_.appendChild(E);var S=document.createElement("input");S.className="opt-switch opt-radio opt-off",S.type="radio",null!=i&&(S.name=i),"1"==o&&(S.checked=!0),_.appendChild(S),f.appendChild(_),el=f;break;case"toggle":var f=r(),_=document.createElement("li");_.id="opt_"+t+"_li",_.className="opt-li";var R=document.createElement("span");if(R.id="opt_"+t+"_label",R.className="optitem l10n",R.innerHTML=RYU._lc(n),1==o)var N="opt-on";else var N="opt-off";var U=document.createElement("div");U.id="opt_"+t,U.className="opt-switch "+N,U.innerHTML='<span class="symbol"></span><span class="label"></span>',U.addEventListener(eDown,optEvent[""+t]=function(e){return function(){RYU.toggleOptSwitch(""+e)}}(t)),_.appendChild(R),_.appendChild(U),f.appendChild(_),el=f}if(1==d&&Set_Cookie(""+addon_optData[m][1],""+o),config[""+t]=o,1==insert&&0==firstclass&&!document.getElementById("addonheader")){var Y=document.createElement("h2");Y.id="addonheader",Y.className="smallprint l10n",Y.innerHTML=RYU._lc("Add-On Settings"),panel.appendChild(Y)}panel.appendChild(el);for(var k=0;k<iscrollers.length;k++)onRebind(iscrollers[k][1])},addWorkspace=function(e,t,n,a){var o=document.getElementsByClassName("navset").length,d=document.createElement("div");d.id="navset"+o,d.className="addon_ws navset nav_deck";var l=document.createElement("div");l.className="titlebar";var i=document.createElement("h1");if(i.className="title l10n",i.innerHTML=RYU._lc(t),l.appendChild(i),d.appendChild(l),Array.isArray(a)){a.length>12&&(a.length=12);for(var s=0;s<a.length;s++)if("button1"==a[s][0]||"button2"==a[s][0]){if(null==a[s][4])var c="left";else{a[s][4].match(/left/gi)||a[s][4].match(/right/gi)||(a[s][4]="left "+a[s][4]);var c=a[s][4]}var r=document.createElement("div");r.id=a[s][1],r.className="button "+c,r.innerHTML='<p><span class="symbol"></span><span class="label l10n">'+a[s][2]+"</span></p>",r.addEventListener(eDown,a[s][3],!1),d.appendChild(r)}}document.getElementById("navbar0").appendChild(d);var m=document.createElement("div");m.id=e+"_ws",m.className="addon_ws workspace ws_deck";var u=document.createElement("div");u.className="area";var g=document.createElement("div");g.className="scrollbox";var p=!1;if(Array.isArray(n)&&2==n[0].length&&(p=!0),p){var y=document.createElement("ul");y.className="tabs",u.className="area tabsections";for(var s=0,h=10;s<n.length;s++,h--){var v=document.createElement("li");v.id=e+"_tab"+s,v.className="tab l10n",v.setAttribute("style","z-index:"+h+";"),v.innerHTML=RYU._lc(n[s][0]),v.addEventListener(eDown,function(t){return function(){RYU.swapAppTab(e+"_ws",e+"_tab"+t,e+"_section"+t)}}(s),!1),y.appendChild(v);var f=document.createElement("div");f.id=e+"_section"+s,f.className="tabsection","string"==typeof n[s][1]&&(f.innerHTML=n[s][1]),0==s&&f.setAttribute("style","display:block;"),g.appendChild(f)}m.appendChild(y)}else"string"==typeof n&&(g.innerHTML=n);if(u.appendChild(g),m.appendChild(u),document.getElementById("sheet").appendChild(m),p){for(var s=0;s<n.length;s++)if(Array.isArray(n[s][1]))for(var _=0;_<n[s][1].length;_++)addControl(n[s][1][_][0],n[s][1][_][1],n[s][1][_][2],n[s][1][_][3],n[s][1][_][4],n[s][1][_][5],e+"_ws",n[s][1][_][7],n[s][1][_][8],e+"_section"+s)}else if(Array.isArray(n))for(var s=0;s<n.length;s++)addControl(n[s][0],n[s][1],n[s][2],n[s][3],n[s][4],n[s][5],e+"_ws",n[s][7],n[s][8]);workspace[o]=e+"_ws",addControl("button3",e,t,function(){RYU.slideSpace(o),RYU.togglePanel("all")},0,0,"addons_panel"),hasClass(document.getElementById("addonsbutton"),"empty")&&removeClass(document.getElementById("addonsbutton"),"empty")},dialogs=[],winSize=function(){"number"==typeof window.innerWidth?winSize=function(){var e=window.innerWidth,t=window.innerHeight;return{W:e,H:t}}:document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)?winSize=function(){var e=document.documentElement.clientWidth,t=document.documentElement.clientHeight;return{W:e,H:t}}:document.body&&(document.body.clientWidth||document.body.clientHeight)&&(winSize=function(){var e=document.body.clientWidth,t=document.body.clientHeight;return{W:e,H:t}})};winSize();var iClick=iEvent().iClick,iDown=iEvent().iDown,iUp=iEvent().iUp,iMove=iEvent().iMove,iOver=iEvent().iOver,iOut=iEvent().iOut,eDown=iEvent().eDown,appTab=[],toolCheck=function(){1==config.wysiwyg&&(null==toolcheck&&(toolcheck=window.setInterval(function(){if(document.getElementById("TO-table-prop")){window.clearInterval(toolcheck),toolcheck=null;var e=document.getElementById("TO-table-prop").parentNode.parentNode.parentNode.parentNode;e.id="table_operations",e.className=e.className+" hide"}},100)),toolcatch=setTimeout(function(){clearInterval(toolcheck),toolcheck=null,clearTimeout(toolcatch),toolcatch=null},5e3))},toggleTableOptions=function(){if(document.getElementById("table_operations")){var e=document.getElementById("table_operations");hasClass(e,"hide")?(addClass(e,"show"),removeClass(e,"hide")):(addClass(e,"hide"),removeClass(e,"show")),RYU.adjustBox(),RYU.resize_panels()}},toggleToolBar=function(){var e=document.getElementById("leftbox").getElementsByTagName("table")[0].getElementsByTagName("div")[0];hasClass(e,"collapsed")?removeClass(e,"collapsed"):(addClass(e,"collapsed"),e.parentNode.style.height=""),RYU.adjustBox(),RYU.resize_panels()},splashAction=function(){if(0!=config.rzw_themeset)var e=2;else var e=1;null==handle&&(handle=window.setInterval(function(){document.getElementById("tcheck").clientWidth==e&&1==document.getElementById("vcheck").clientWidth&&(clearSplash(splashad),window.clearInterval(handle),handle=null)},30)),splashcatch=setTimeout(function(){clearSplash(splashad),window.clearInterval(handle),handle=null,clearTimeout(splashcatch),splashcatch=null},2e3),splashAction=function(){}},xinhaInsert=function(){"XinhaIFrame_inputBox"==document.getElementById("inputBox").previousSibling.id&&(adjustEditor(),xinhaInsert=function(){})},aboutDialog=function(){var e='	<div style="height:72px;overflow:hidden;text-align:center;margin-bottom:5px;">		<a href="http://www.ryumaru.com" style="border: none;text-decoration:none;color: #000;">			<div id="aboutlogo"></div>		</a>	</div>	<p style="text-align:center;"><small><strong>Ryuzine Writer</strong><br/>	'+RYU._lc("Version")+" "+version+"<br/></p>	<p>"+RYU._lc("Ryuzine™ is a javascript application designed for publishing content to the web and mobile devices in a familiar magazine-style format.")+" "+RYU._lc("Publishing Kit available at")+' <a href="http://www.ryumaru.com/products/ryuzine" target="_blank">www.ryumaru.com</a>.</p>	<p>'+RYU._lc("Ryuzine was created by K.M. Hansen, original code ©2011-2015 All Rights Reserved.")+"</p>	<p>"+RYU._lc("Read the license and a list of project contributors:")+' <a href="'+baseurl+'ryuzinewriter/LICENSE.txt" target="_blank">'+RYU._lc("LICENSE FILE")+'</a>, <a href="'+baseurl+'ryuzinewriter/AUTHORS.txt" target="_blank">'+RYU._lc("CONTRIBUTORS")+"</a></p>	<p>"+RYU._lc("Ryuzine and the Ryuzine logos are trademarks of K.M. Hansen and Ryu Maru. All rights reserved. The names of other companies, products, services and content distributed via the Ryuzine publishing platform are the property of their respective owners.")+"</p><hr/>	<h2>Add-ons</h2>";for(var t in addon)addon.hasOwnProperty(t)&&"register"!=t&&void 0!=typeof addon[""+t].name&&(e+="<p>"+RYU._lc("Name")+": "+addon[""+t].info.name+"<br/>"+RYU._lc("Version")+" :"+addon[""+t].info.version+"<br/>"+RYU._lc("Author")+": "+addon[""+t].info.author+"<br/>"+RYU._lc("Website")+': <a href="'+addon[""+t].info.url+'" target="_blank">'+addon[""+t].info.url+"</a><br/>"+RYU._lc("License")+": "+addon[""+t].info.license+"<br/>"+RYU._lc("Description")+": "+addon[""+t].info.about+"<hr/>");addDialogBox("about",RYU._lc("About Ryuzine"),e),toggleDialog("about"),aboutDialog=function(){toggleDialog("about")}},pagecheck=[],clearStyleBox=0,workspace=[[],[],[],[],[],[]];workspace[0]="start",workspace[1]="editor",workspace[2]="export",workspace[3]="simulator",workspace[4]="configuration",workspace[5]="databuilder";var active_workspace=0,runonce=function(){1==RYU.config.wysiwyg&&RYU.resize_panels(),runonce=function(){}},split=0,htmlMode=function(e){1==config.rzw_wysiwyg&&Xinha.prototype.setMode(e,1)},touchmoveCheck=0,scrollIt=function(e){n=event.currentTarget,updown=event.touches[0].pageY,sideside=event.touches[0].pageX,n.addEventListener("touchmove",RYU.touchScroll),touchmoveCheck=0},touchScroll=function(e){var t=event.currentTarget,n=event.touches[0],a=updown-n.pageY,o=n.pageX;touchmoveCheck=1,(void 0==nativeScroll||void 0!=nativeScroll&&0==config.zoompan||0==nscroll)&&"undefined"==typeof iScroll&&(t.style.overflow="hidden","Android"==device.Platform&&device.v>2||event.preventDefault(),t.scrollTop=t.scrollTop+a,updown=n.pageY),swipeGesture(o,sideside),sideside=n.pageX,n=0},swipeGesture=function(e,t){},today=new Date,zero_date=new Date(0,0,0);today.setTime(today.getTime()-zero_date.getTime());var todays_date=new Date(today.getYear()+1,today.getMonth(),today.getDate(),0,0,0),expires_date=new Date(todays_date.getTime()+48384e5);storeMasterCookie(),storeIntelligentCookie("test","cookie value");var filetype=0,firstedit=!1,show_thumbnails=!0,selected_item,selected_items=[],dragged_item,standin=[];return{init:init,_lc:_lc,baseurl:baseurl,php:php,bookBinder:bookBinder,resize_panels:resize_panels,loadAddOns:loadAddOns,addon:addon,all_addons_selected:all_addons_selected,add_selected_addon:add_selected_addon,cut_selected_addon:cut_selected_addon,toggleOptSwitch:toggleOptSwitch,setOptGhostList:setOptGhostList,togglePanel:togglePanel,toggleDialog:toggleDialog,toggleTableOptions:toggleTableOptions,toggleToolBar:toggleToolBar,toggleDropBar:toggleDropBar,hideDialog:hideDialog,scrollIt:scrollIt,touchScroll:touchScroll,clearEditor:clearEditor,adjustBox:adjustBox,loadTemplate:loadTemplate,loadURL2Sim:loadURL2Sim,uniqueElements:uniqueElements,swapAppTab:swapAppTab,selectFile:selectFile,pullSource:pullSource,refreshSrc:refreshSrc,slideSpace:slideSpace,controlSlide:controlSlide,getDocProps:getDocProps,setDocProps:setDocProps,countChars:countChars,reWrite:reWrite,updatePreview:updatePreview,clearSimulator:clearSimulator,customPreview:customPreview,customProfile:function(e){customProfile=e},customOS:function(e){customOS=e},outputOptions:outputOptions,switchDevice:switchDevice,rotateDevice:rotateDevice,dView:function(e){dView=e,r=0==r?1:0,rotateDevice()},dSim:function(e){dSim=e,r=0==r?1:0,rotateDevice()},viewDrop:viewDrop,splitView:splitView,popOut:popOut,clearSplash:function(){clearTimeout(splashwait)},subMenu:subMenu,zoomFactor:zoomFactor,deviceSizer:deviceSizer,add2ConfigList:add2ConfigList,delConfigList:delConfigList,buildConfigFile:buildConfigFile,resetConfigFile:resetConfigFile,addRackData:addRackData,addRackRows:addRackRows,delRackData:delRackData,getRackData:getRackData,newRackCat:newRackCat,cat2data:cat2data,loadRackData:loadRackData,fixlayout:fixlayout,stylesToggle:stylesToggle,zoomSet:zoomSet,themeToggle:themeToggle,zoomToggle:zoomToggle,scrollToggle:scrollToggle,iScrollToggle:iScrollToggle,iScrollApply:iScrollApply,defaultPrevention:defaultPrevention,preventDefault:preventDefault,restoreDefault:restoreDefault,tapCheck:tapCheck,hasClass:hasClass,addClass:addClass,removeClass:removeClass,helpPlay:helpPlay,playHelp:playHelp,guidedHelp:guidedHelp,xpandIFRAME:xpandIFRAME,fileOps:fileOps,buildPackage:buildPackage,submitPHPform:submitPHPform,syncPack2Opt:syncPack2Opt,device:device,r:r,config:config,previewRack:previewRack,thumbnail_size:thumbnail_size,refresh_thumbnails:refresh_thumbnails,selectionOf:selectionOf,delete_page:delete_page,setMax:setMax,insert_page:insert_page,insert_pages:insert_pages,reindex_pages:reindex_pages,dragstart_reorder:dragstart_reorder,dragleave_reorder:dragleave_reorder,dragover_reorder:dragover_reorder,editor_reorder:editor_reorder,editor_layout:editor_layout,right_bound:right_bound,show_outline:show_outline,addCustomCSS:addCustomCSS,cssLinkCheck:cssLinkCheck,buildCustomCSS:buildCustomCSS}}();var RZW=function(){};window.onload=function(){RYU.init()};